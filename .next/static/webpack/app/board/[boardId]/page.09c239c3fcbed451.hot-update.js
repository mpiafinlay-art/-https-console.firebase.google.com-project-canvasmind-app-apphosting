"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/board/[boardId]/page",{

/***/ "(app-pages-browser)/./src/hooks/use-element-manager.ts":
/*!******************************************!*\
  !*** ./src/hooks/use-element-manager.ts ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useElementManager: function() { return /* binding */ useElementManager; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _firebase_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/firebase/provider */ \"(app-pages-browser)/./src/firebase/provider.tsx\");\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* __next_internal_client_entry_do_not_use__ useElementManager auto */ \n\n\n\nfunction useElementManager(boardId, getViewportCenter, getNextZIndex) {\n    const firestore = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_1__.useFirestore)();\n    const { user } = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_1__.useUser)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_3__.useToast)();\n    // CRÍTICO: Usar refs para funciones que pueden cambiar frecuentemente\n    // Esto previene re-creaciones constantes de addElement\n    const getViewportCenterRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(getViewportCenter);\n    const getNextZIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(getNextZIndex);\n    // Actualizar refs cuando cambian\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        getViewportCenterRef.current = getViewportCenter;\n        getNextZIndexRef.current = getNextZIndex;\n    }, [\n        getViewportCenter,\n        getNextZIndex\n    ]);\n    const addElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (type, props)=>{\n        if (!firestore || !user || !boardId) {\n            const errorMsg = !firestore ? \"Firestore no est\\xe1 disponible\" : !user ? \"Usuario no autenticado\" : \"Board ID no v\\xe1lido\";\n            return Promise.reject(new Error(errorMsg));\n        }\n        const elementsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(firestore, \"users\", user.uid, \"canvasBoards\", boardId, \"canvasElements\");\n        if (type === \"connector\") {\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)(elementsRef, {\n                type: \"connector\",\n                userId: user.uid,\n                properties: {},\n                content: props === null || props === void 0 ? void 0 : props.content,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n            });\n            return docRef.id;\n        }\n        const defaultPosition = getViewportCenterRef.current(); // ✅ Usar ref\n        // REGLA: Los nuevos elementos deben aparecer en PRIMERA CAPA (zIndex máximo)\n        // para que el usuario pueda arrastrarlos y reubicarlos fácilmente\n        // EXCEPCIÓN CRÍTICA: Los contenedores SIEMPRE están en la primera capa (zIndex 0)\n        // incluso antes que cuadernos, para que puedan recibir elementos arrastrados\n        let zIndex;\n        if (type === \"container\") {\n            zIndex = 0; // Contenedores siempre en primera capa (zIndex 0)\n        } else {\n            // Todos los demás elementos nuevos van a la PRIMERA CAPA (zIndex máximo + 1)\n            zIndex = getNextZIndexRef.current(); // ✅ Usar ref\n        }\n        // REGLA #1: Los elementos se abren centrados en el viewport del usuario\n        // Si no se proporciona una posición específica, usar el centro del viewport\n        // IMPORTANTE: Verificar que props existe antes de acceder a properties\n        const viewportCenter = props && props.properties && props.properties.position ? props.properties.position : defaultPosition;\n        const baseSize = props && props.properties && props.properties.size ? props.properties.size : {\n            width: 200,\n            height: 150\n        };\n        const sizeWidth = typeof baseSize.width === \"number\" ? baseSize.width : 200;\n        const sizeHeight = typeof baseSize.height === \"number\" ? baseSize.height : 150;\n        // Helper: Calcula la posición para centrar el elemento en el viewport VISIBLE\n        // REGLA CRÍTICA: Los elementos deben aparecer en el ESPACIO VISIBLE del usuario\n        // El elemento debe estar centrado en el área visible del tablero\n        const getCenteredPosition = (width, height)=>{\n            // Obtener el centro del viewport visible (ya calculado con scroll y scale)\n            const centerX = viewportCenter.x;\n            const centerY = viewportCenter.y;\n            // Calcular posición centrada ideal (centro del elemento = centro del viewport visible)\n            let x = centerX - width / 2;\n            let y = centerY - height / 2;\n            // CRÍTICO: Asegurar que el elemento aparezca SIEMPRE en el área visible\n            // Si el cálculo da negativo, ajustar para que al menos parte del elemento sea visible\n            // Mínimo: asegurar que la esquina superior izquierda esté dentro del viewport visible\n            const minOffset = 20; // Margen mínimo desde el borde visible\n            // Obtener dimensiones del viewport en coordenadas del canvas\n            const viewportWidth =  true ? window.innerWidth : 0;\n            const viewportHeight =  true ? window.innerHeight : 0;\n            // Asegurar que el elemento quede dentro del área visible del viewport\n            // Si el elemento es más pequeño que el viewport, centrarlo\n            // Si es más grande, asegurar que al menos parte sea visible\n            if (width <= viewportWidth) {\n                // Elemento cabe en el viewport: centrarlo\n                x = Math.max(minOffset, Math.min(x, centerX + viewportWidth / 2 - width));\n            } else {\n                // Elemento más grande que el viewport: alinear para que sea visible desde el inicio\n                x = Math.max(minOffset, centerX - viewportWidth / 4);\n            }\n            if (height <= viewportHeight) {\n                // Elemento cabe en el viewport: centrarlo\n                y = Math.max(minOffset, Math.min(y, centerY + viewportHeight / 2 - height));\n            } else {\n                // Elemento más grande que el viewport: alinear para que sea visible desde el inicio\n                y = Math.max(minOffset, centerY - viewportHeight / 4);\n            }\n            // Verificación final: NUNCA permitir coordenadas negativas\n            return {\n                x: Math.max(0, x),\n                y: Math.max(0, y)\n            };\n        };\n        // Construir baseProperties de forma segura\n        const baseProperties = {\n            size: baseSize,\n            zIndex: zIndex,\n            rotation: 0\n        };\n        // Agregar propiedades adicionales de props si existen\n        if (props && props.properties && typeof props.properties === \"object\") {\n            Object.assign(baseProperties, props.properties);\n        }\n        let newElementData;\n        switch(type){\n            case \"notepad\":\n                const notepadSize = {\n                    width: 794,\n                    height: 978\n                };\n                const notepadPos = getCenteredPosition(notepadSize.width, notepadSize.height);\n                newElementData = {\n                    type,\n                    x: notepadPos.x,\n                    y: notepadPos.y,\n                    width: notepadSize.width,\n                    height: notepadSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: notepadPos,\n                        size: notepadSize,\n                        format: \"letter\"\n                    },\n                    content: {\n                        title: \"Nuevo Cuaderno\",\n                        pages: Array(5).fill(\"<div><br></div>\"),\n                        currentPage: 0\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"notepad-simple\":\n                const notepadSimpleSize = {\n                    width: 302,\n                    height: 491\n                };\n                const notepadSimplePos = getCenteredPosition(notepadSimpleSize.width, notepadSimpleSize.height);\n                newElementData = {\n                    type,\n                    x: notepadSimplePos.x,\n                    y: notepadSimplePos.y,\n                    width: notepadSimpleSize.width,\n                    height: notepadSimpleSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: notepadSimplePos,\n                        size: notepadSimpleSize\n                    },\n                    content: {\n                        title: \"Nuevo Notepad\",\n                        text: \"<div><br></div>\"\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"super-notebook\":\n                // Tamaño exacto: 21cm x 27cm (794px x 1021px a 96 DPI)\n                const superNotebookSize = {\n                    width: 794,\n                    height: 1021\n                };\n                const superNotebookPos = getCenteredPosition(superNotebookSize.width, superNotebookSize.height);\n                newElementData = {\n                    type,\n                    x: superNotebookPos.x,\n                    y: superNotebookPos.y,\n                    width: superNotebookSize.width,\n                    height: superNotebookSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: superNotebookPos,\n                        size: superNotebookSize\n                    },\n                    content: {\n                        title: \"Super Cuaderno\",\n                        pages: Array(5).fill(\"<div><br></div>\"),\n                        currentPage: 0\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"sticky\":\n                const stickyColor = (props === null || props === void 0 ? void 0 : props.color) || \"yellow\";\n                const stickySize = {\n                    width: 224,\n                    height: 224\n                };\n                const stickyPos = getCenteredPosition(stickySize.width, stickySize.height);\n                const stickyElement = {\n                    type: \"sticky\",\n                    x: stickyPos.x,\n                    y: stickyPos.y,\n                    width: stickySize.width,\n                    height: stickySize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: stickyPos,\n                        size: stickySize,\n                        color: stickyColor\n                    },\n                    content: typeof (props === null || props === void 0 ? void 0 : props.content) === \"string\" ? props.content : \"Escribe algo...\",\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    ...(props === null || props === void 0 ? void 0 : props.tags) && {\n                        tags: props.tags\n                    }\n                };\n                newElementData = stickyElement;\n                break;\n            case \"todo\":\n                const todoSize = {\n                    width: 300,\n                    height: 150\n                };\n                const todoPos = getCenteredPosition(todoSize.width, todoSize.height);\n                newElementData = {\n                    type,\n                    x: todoPos.x,\n                    y: todoPos.y,\n                    width: todoSize.width,\n                    height: todoSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: todoPos,\n                        size: todoSize\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        title: \"Lista de Tareas\",\n                        items: []\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"image\":\n                const imagePos = getCenteredPosition(sizeWidth, sizeHeight);\n                newElementData = {\n                    type,\n                    x: imagePos.x,\n                    y: imagePos.y,\n                    width: sizeWidth,\n                    height: sizeHeight,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: imagePos,\n                        size: {\n                            width: sizeWidth,\n                            height: sizeHeight\n                        }\n                    },\n                    content: props === null || props === void 0 ? void 0 : props.content,\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"text\":\n                var _props_properties;\n                const textPos = getCenteredPosition(sizeWidth, sizeHeight);\n                const textBgColor = (props === null || props === void 0 ? void 0 : (_props_properties = props.properties) === null || _props_properties === void 0 ? void 0 : _props_properties.backgroundColor) || \"#ffffff\";\n                newElementData = {\n                    type,\n                    x: textPos.x,\n                    y: textPos.y,\n                    width: sizeWidth,\n                    height: sizeHeight,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: textPos,\n                        size: {\n                            width: sizeWidth,\n                            height: sizeHeight\n                        },\n                        backgroundColor: textBgColor\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || '<div style=\"font-size: 18px;\">Escribe algo...</div>',\n                    color: (props === null || props === void 0 ? void 0 : props.color) || \"white\",\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"container\":\n                var _props_properties1, _props_properties2;\n                // REGLA ESPECIAL: Elemento K85hC8M5spfsgRITnEQR (lienzo) debe ser 60% más pequeño y color #daf4c5\n                const defaultContainerSize = {\n                    width: 378,\n                    height: 567\n                }; // 10x15 cm en píxeles\n                const containerSize = (props === null || props === void 0 ? void 0 : (_props_properties1 = props.properties) === null || _props_properties1 === void 0 ? void 0 : _props_properties1.size) ? props.properties.size : defaultContainerSize;\n                // Si es el lienzo especial (título \"Lienzo\" o ID específico), reducir ancho 50%\n                const containerContent = (props === null || props === void 0 ? void 0 : props.content) && typeof props.content === \"object\" && \"title\" in props.content ? props.content : null;\n                const isSpecialLienzo = (containerContent === null || containerContent === void 0 ? void 0 : containerContent.title) === \"Lienzo\" || (containerContent === null || containerContent === void 0 ? void 0 : containerContent.title) === \"lienzo\";\n                const finalContainerSize = isSpecialLienzo ? {\n                    width: Math.round((typeof containerSize.width === \"number\" ? containerSize.width : 378) * 0.5),\n                    height: typeof containerSize.height === \"number\" ? containerSize.height : 567\n                } : containerSize;\n                const containerPos = getCenteredPosition(typeof finalContainerSize.width === \"number\" ? finalContainerSize.width : 378, typeof finalContainerSize.height === \"number\" ? finalContainerSize.height : 567);\n                const containerBackgroundColor = isSpecialLienzo ? \"#daf4c5\" // Color especial para lienzo\n                 : (props === null || props === void 0 ? void 0 : (_props_properties2 = props.properties) === null || _props_properties2 === void 0 ? void 0 : _props_properties2.backgroundColor) ? props.properties.backgroundColor : \"white\";\n                // REGLA: Lienzo debe tener zIndex = -1 (debajo de todos excepto cuadernos que tienen zIndex = 1)\n                const containerZIndex = isSpecialLienzo ? -1 : zIndex;\n                const finalContainerContent = containerContent || {\n                    title: \"Nuevo Contenedor\",\n                    elementIds: [],\n                    layout: \"single\"\n                };\n                newElementData = {\n                    type: \"container\",\n                    x: containerPos.x,\n                    y: containerPos.y,\n                    width: typeof finalContainerSize.width === \"number\" ? finalContainerSize.width : 378,\n                    height: typeof finalContainerSize.height === \"number\" ? finalContainerSize.height : 567,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: containerPos,\n                        size: finalContainerSize,\n                        backgroundColor: containerBackgroundColor,\n                        zIndex: containerZIndex\n                    },\n                    content: finalContainerContent,\n                    zIndex: containerZIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"comment\":\n                const commentSize = {\n                    width: 32,\n                    height: 32\n                };\n                const commentPos = getCenteredPosition(commentSize.width, commentSize.height);\n                newElementData = {\n                    type,\n                    x: commentPos.x,\n                    y: commentPos.y,\n                    width: commentSize.width,\n                    height: commentSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: commentPos,\n                        size: commentSize\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        title: \"\",\n                        label: \"\",\n                        comment: \"\"\n                    },\n                    parentId: (props === null || props === void 0 ? void 0 : props.parentId) || undefined,\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"moodboard\":\n                const moodboardSize = {\n                    width: 600,\n                    height: 500\n                };\n                const moodboardPos = getCenteredPosition(moodboardSize.width, moodboardSize.height);\n                newElementData = {\n                    type,\n                    x: moodboardPos.x,\n                    y: moodboardPos.y,\n                    width: moodboardSize.width,\n                    height: moodboardSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: moodboardPos,\n                        size: moodboardSize,\n                        backgroundColor: \"#ffffff\"\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        title: \"Nuevo Moodboard\",\n                        images: [],\n                        annotations: [],\n                        layout: \"grid\"\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"tabbed-notepad\":\n                const tabbedSize = {\n                    width: 500,\n                    height: 400\n                };\n                const tabbedPos = getCenteredPosition(tabbedSize.width, tabbedSize.height);\n                newElementData = {\n                    type,\n                    x: tabbedPos.x,\n                    y: tabbedPos.y,\n                    width: tabbedSize.width,\n                    height: tabbedSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: tabbedPos,\n                        size: tabbedSize,\n                        backgroundColor: \"#ffffff\"\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        title: \"Bloc de Notas\",\n                        tabs: [\n                            {\n                                id: \"tab-1\",\n                                title: \"Pesta\\xf1a 1\",\n                                content: \"\"\n                            }\n                        ],\n                        activeTabId: \"tab-1\"\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"accordion\":\n                const accordionSize = {\n                    width: 320,\n                    height: 240\n                }; // 20% más pequeño que 400x300\n                const accordionPos = getCenteredPosition(accordionSize.width, accordionSize.height);\n                newElementData = {\n                    type,\n                    x: accordionPos.x,\n                    y: accordionPos.y,\n                    width: accordionSize.width,\n                    height: accordionSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: accordionPos,\n                        size: accordionSize,\n                        backgroundColor: \"#ffffff\"\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        items: [\n                            {\n                                id: \"1\",\n                                title: \"Nuevo Item\",\n                                content: \"\"\n                            }\n                        ]\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"stopwatch\":\n                const stopwatchSize = {\n                    width: 200,\n                    height: 120\n                };\n                const stopwatchPos = getCenteredPosition(stopwatchSize.width, stopwatchSize.height);\n                newElementData = {\n                    type: \"stopwatch\",\n                    x: stopwatchPos.x,\n                    y: stopwatchPos.y,\n                    width: stopwatchSize.width,\n                    height: stopwatchSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: stopwatchPos,\n                        size: stopwatchSize,\n                        backgroundColor: \"#000000\"\n                    },\n                    content: {\n                        time: 0,\n                        isRunning: false\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"countdown\":\n                const countdownSize = {\n                    width: 200,\n                    height: 180\n                };\n                const countdownPos = getCenteredPosition(countdownSize.width, countdownSize.height);\n                newElementData = {\n                    type: \"countdown\",\n                    x: countdownPos.x,\n                    y: countdownPos.y,\n                    width: countdownSize.width,\n                    height: countdownSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: countdownPos,\n                        size: countdownSize,\n                        backgroundColor: \"#000000\"\n                    },\n                    content: {\n                        timeLeft: 0,\n                        selectedMinutes: 5,\n                        isRunning: false\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"highlight-text\":\n                var _props_properties3;\n                const highlightSize = {\n                    width: 300,\n                    height: 150\n                };\n                const highlightPos = getCenteredPosition(highlightSize.width, highlightSize.height);\n                const highlightColor = (props === null || props === void 0 ? void 0 : (_props_properties3 = props.properties) === null || _props_properties3 === void 0 ? void 0 : _props_properties3.backgroundColor) ? props.properties.backgroundColor : \"#fffb8b\";\n                newElementData = {\n                    type: \"highlight-text\",\n                    x: highlightPos.x,\n                    y: highlightPos.y,\n                    width: highlightSize.width,\n                    height: highlightSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: highlightPos,\n                        size: highlightSize,\n                        backgroundColor: highlightColor\n                    },\n                    content: {\n                        text: \"\"\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            case \"yellow-notepad\":\n                // Tamaño basado en las imágenes: aproximadamente 400x600px (portrait)\n                const yellowNotepadSize = {\n                    width: 400,\n                    height: 600\n                };\n                const yellowNotepadPos = getCenteredPosition(yellowNotepadSize.width, yellowNotepadSize.height);\n                newElementData = {\n                    type,\n                    x: yellowNotepadPos.x,\n                    y: yellowNotepadPos.y,\n                    width: yellowNotepadSize.width,\n                    height: yellowNotepadSize.height,\n                    userId: user.uid,\n                    properties: {\n                        ...baseProperties,\n                        position: yellowNotepadPos,\n                        size: yellowNotepadSize,\n                        backgroundColor: \"#FFFFE0\"\n                    },\n                    content: (props === null || props === void 0 ? void 0 : props.content) || {\n                        text: \"\",\n                        searchQuery: \"\"\n                    },\n                    zIndex,\n                    createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)(),\n                    updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n                };\n                break;\n            default:\n                return Promise.reject(new Error(\"Tipo de elemento inv\\xe1lido: \".concat(type)));\n        }\n        const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.addDoc)(elementsRef, newElementData);\n        return docRef.id;\n    }, [\n        firestore,\n        user,\n        boardId\n    ]); // ✅ Removido getNextZIndex y getViewportCenter - usar directamente sin dependencias\n    const updateElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((id, updates)=>{\n        if (!firestore || !user || !boardId) return;\n        const elementDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(firestore, \"users\", user.uid, \"canvasBoards\", boardId, \"canvasElements\", id);\n        // Limpiar valores undefined (Firestore no los acepta)\n        const cleanUpdates = {\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        };\n        Object.keys(updates).forEach((key)=>{\n            const value = updates[key];\n            if (value !== undefined) {\n                cleanUpdates[key] = value;\n            } else if (key === \"parentId\") {\n                // Si parentId es undefined, usar null para eliminarlo (Firestore acepta null)\n                cleanUpdates[key] = null;\n            }\n        });\n        // Actualizar el elemento\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(elementDocRef, cleanUpdates);\n        // AUTOGUARDADO DEL TABLERO: Actualizar también el tablero con updatedAt\n        // Esto asegura que el tablero refleje siempre la última modificación\n        const boardDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(firestore, \"users\", user.uid, \"canvasBoards\", boardId);\n        (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.updateDoc)(boardDocRef, {\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        }).catch((err)=>{\n            console.error(\"Error actualizando tablero:\", err);\n        });\n    }, [\n        firestore,\n        user,\n        boardId\n    ]);\n    const deleteElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (id, allElements)=>{\n        if (!firestore || !user || !boardId) return;\n        const elementToDeleteRef = allElements.find((el)=>el.id === id);\n        if (!elementToDeleteRef) return;\n        const elementsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(firestore, \"users\", user.uid, \"canvasBoards\", boardId, \"canvasElements\");\n        const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(firestore);\n        const elementDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(elementsRef, id);\n        if (elementToDeleteRef.type === \"container\") {\n            const containerContent = elementToDeleteRef.content;\n            if (containerContent && Array.isArray(containerContent.elementIds)) {\n                containerContent.elementIds.forEach((childId)=>{\n                    const childDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(elementsRef, childId);\n                    batch.delete(childDocRef);\n                });\n            }\n        }\n        batch.delete(elementDocRef);\n        await batch.commit();\n    }, [\n        firestore,\n        user,\n        boardId\n    ]);\n    const unanchorElement = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (elementId)=>{\n        var _parentProps_position, _parentProps_size, _parentProps_size1, _parentProps_position1;\n        if (!firestore || !user || !boardId) return;\n        const elementsRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.collection)(firestore, \"users\", user.uid, \"canvasBoards\", boardId, \"canvasElements\");\n        const elementDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(elementsRef, elementId);\n        const elementSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(elementDocRef);\n        if (!elementSnap.exists()) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: \"El elemento no existe.\"\n            });\n            return;\n        }\n        const elementData = elementSnap.data();\n        if (!(elementData === null || elementData === void 0 ? void 0 : elementData.parentId)) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: \"El elemento no est\\xe1 anclado a ning\\xfan contenedor.\"\n            });\n            return;\n        }\n        const element = elementData;\n        const parentId = element.parentId;\n        const parentDocRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.doc)(elementsRef, parentId);\n        const parentSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.getDoc)(parentDocRef);\n        if (!parentSnap.exists()) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: \"No se encontr\\xf3 el contenedor padre.\"\n            });\n            return;\n        }\n        const parentElementData = parentSnap.data();\n        if (!parentElementData) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: \"No se pudo obtener datos del contenedor padre.\"\n            });\n            return;\n        }\n        const parentElement = parentElementData;\n        const parentContent = parentElement === null || parentElement === void 0 ? void 0 : parentElement.content;\n        const parentProps = parentElement === null || parentElement === void 0 ? void 0 : parentElement.properties;\n        // Remove elementId from parent's content\n        const newElementIds = ((parentContent === null || parentContent === void 0 ? void 0 : parentContent.elementIds) || []).filter((id)=>id !== elementId);\n        var _parentProps_position_x;\n        // Calcular nueva posición mejorada: a la derecha del panel con un offset\n        const parentX = (_parentProps_position_x = parentProps === null || parentProps === void 0 ? void 0 : (_parentProps_position = parentProps.position) === null || _parentProps_position === void 0 ? void 0 : _parentProps_position.x) !== null && _parentProps_position_x !== void 0 ? _parentProps_position_x : 0;\n        const parentWidth = typeof (parentProps === null || parentProps === void 0 ? void 0 : (_parentProps_size = parentProps.size) === null || _parentProps_size === void 0 ? void 0 : _parentProps_size.width) === \"number\" ? parentProps.size.width : ((parentProps === null || parentProps === void 0 ? void 0 : (_parentProps_size1 = parentProps.size) === null || _parentProps_size1 === void 0 ? void 0 : _parentProps_size1.width) ? parseFloat(String(parentProps.size.width)) : 300) || 300;\n        var _parentProps_position_y;\n        const parentY = (_parentProps_position_y = parentProps === null || parentProps === void 0 ? void 0 : (_parentProps_position1 = parentProps.position) === null || _parentProps_position1 === void 0 ? void 0 : _parentProps_position1.y) !== null && _parentProps_position_y !== void 0 ? _parentProps_position_y : 0;\n        // Obtener posición original del elemento si existe, o calcular nueva\n        const elementProps = element.properties;\n        const originalPosition = (elementProps === null || elementProps === void 0 ? void 0 : elementProps.position) || {\n            x: element.x || 0,\n            y: element.y || 0\n        };\n        // Si el elemento tenía una posición original válida, intentar restaurarla\n        // Si no, colocar a la derecha del panel\n        const newPosition = originalPosition.x > 0 && originalPosition.y > 0 ? originalPosition // Restaurar posición original\n         : {\n            x: parentX + parentWidth + 20,\n            y: parentY + 50\n        };\n        const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.writeBatch)(firestore);\n        // Update parent\n        batch.update(parentDocRef, {\n            content: {\n                ...parentContent,\n                elementIds: newElementIds\n            },\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        });\n        // Update child - restaurar propiedades completas y asegurar visibilidad\n        const safeProperties = elementProps || {};\n        const elementSize = typeof element.width === \"number\" && typeof element.height === \"number\" ? {\n            width: element.width,\n            height: element.height\n        } : safeProperties.size || {\n            width: 200,\n            height: 150\n        };\n        batch.update(elementDocRef, {\n            parentId: null,\n            hidden: false,\n            x: newPosition.x,\n            y: newPosition.y,\n            properties: {\n                ...safeProperties,\n                position: newPosition,\n                size: elementSize\n            },\n            updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_2__.serverTimestamp)()\n        });\n        try {\n            await batch.commit();\n            toast({\n                title: \"Elemento desanclado\",\n                description: \"El elemento ha sido devuelto al lienzo.\"\n            });\n        } catch (error) {\n            console.error(\"Error al desanclar elemento:\", error);\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: \"No se pudo desanclar el elemento.\"\n            });\n        }\n    }, [\n        firestore,\n        user,\n        boardId,\n        toast\n    ]);\n    return {\n        addElement,\n        updateElement,\n        deleteElement,\n        unanchorElement\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2UtZWxlbWVudC1tYW5hZ2VyLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozt1RUFHdUQ7QUFDSztBQVVoQztBQUdpQjtBQUV0QyxTQUFTYSxrQkFBa0JDLE9BQWUsRUFBRUMsaUJBQWlELEVBQUVDLGFBQWlEO0lBQ3JKLE1BQU1DLFlBQVlkLGdFQUFZQTtJQUM5QixNQUFNLEVBQUVlLElBQUksRUFBRSxHQUFHZCwyREFBT0E7SUFDeEIsTUFBTSxFQUFFZSxLQUFLLEVBQUUsR0FBR1AsMERBQVFBO0lBRTFCLHNFQUFzRTtJQUN0RSx1REFBdUQ7SUFDdkQsTUFBTVEsdUJBQXVCbkIsNkNBQU1BLENBQUNjO0lBQ3BDLE1BQU1NLG1CQUFtQnBCLDZDQUFNQSxDQUFDZTtJQUVoQyxpQ0FBaUM7SUFDakNkLGdEQUFTQSxDQUFDO1FBQ1JrQixxQkFBcUJFLE9BQU8sR0FBR1A7UUFDL0JNLGlCQUFpQkMsT0FBTyxHQUFHTjtJQUM3QixHQUFHO1FBQUNEO1FBQW1CQztLQUFjO0lBRXJDLE1BQU1PLGFBQWF2QixrREFBV0EsQ0FBQyxPQUFPd0IsTUFBbUJDO1FBQ3ZELElBQUksQ0FBQ1IsYUFBYSxDQUFDQyxRQUFRLENBQUNKLFNBQVM7WUFDbkMsTUFBTVksV0FBVyxDQUFDVCxZQUFZLG9DQUFpQyxDQUFDQyxPQUFPLDJCQUEyQjtZQUNsRyxPQUFPUyxRQUFRQyxNQUFNLENBQUMsSUFBSUMsTUFBTUg7UUFDbEM7UUFDQSxNQUFNSSxjQUFjekIsOERBQVVBLENBQUNZLFdBQVcsU0FBU0MsS0FBS2EsR0FBRyxFQUFFLGdCQUFnQmpCLFNBQVM7UUFDdEYsSUFBSVUsU0FBUyxhQUFhO1lBQ3hCLE1BQU1RLFNBQVMsTUFBTXRCLDBEQUFNQSxDQUFDb0IsYUFBYTtnQkFDdkNOLE1BQU07Z0JBQ05TLFFBQVFmLEtBQUthLEdBQUc7Z0JBQ2hCRyxZQUFZLENBQUM7Z0JBQ2JDLE9BQU8sRUFBRVYsa0JBQUFBLDRCQUFBQSxNQUFP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QkFDVjVJLE1BQU0rSTtZQUNSO1lBQ0F0SixXQUFXN0IsbUVBQWVBO1FBQzlCO1FBRUEsSUFBSTtZQUNGLE1BQU1rSixNQUFNSyxNQUFNO1lBQ2xCNUksTUFBTTtnQkFDSm9ELE9BQU87Z0JBQ1ArRixhQUFhO1lBQ2Y7UUFDRixFQUFFLE9BQU9sQixPQUFPO1lBQ2RELFFBQVFDLEtBQUssQ0FBQyxnQ0FBZ0NBO1lBQzlDakksTUFBTTtnQkFDSmtKLFNBQVM7Z0JBQ1Q5RixPQUFPO2dCQUNQK0YsYUFBYTtZQUNmO1FBQ0Y7SUFDRixHQUFHO1FBQUNySjtRQUFXQztRQUFNSjtRQUFTSztLQUFNO0lBRXBDLE9BQU87UUFBRUk7UUFBWWlIO1FBQWVhO1FBQWVXO0lBQWdCO0FBQ3JFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9ob29rcy91c2UtZWxlbWVudC1tYW5hZ2VyLnRzP2E5ODYiXSwic291cmNlc0NvbnRlbnQiOlsiXG4ndXNlIGNsaWVudCc7XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUZpcmVzdG9yZSwgdXNlVXNlciB9IGZyb20gJ0AvZmlyZWJhc2UvcHJvdmlkZXInO1xuaW1wb3J0IHtcbiAgY29sbGVjdGlvbixcbiAgZG9jLFxuICB1cGRhdGVEb2MsXG4gIHNlcnZlclRpbWVzdGFtcCxcbiAgd3JpdGVCYXRjaCxcbiAgYWRkRG9jLFxuICBkZWxldGVEb2MsXG4gIGdldERvYyxcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB0eXBlIHsgRWxlbWVudFR5cGUsIENhbnZhc0VsZW1lbnQsIFdpdGhJZCwgQ2FudmFzRWxlbWVudFByb3BlcnRpZXMsIENvbnRhaW5lckNvbnRlbnQsIFN0aWNreUNhbnZhc0VsZW1lbnQsIEVsZW1lbnRDb250ZW50IH0gZnJvbSAnQC9saWIvdHlwZXMnO1xuaW1wb3J0IHsgc3RhcnRPZldlZWsgfSBmcm9tICdkYXRlLWZucyc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUVsZW1lbnRNYW5hZ2VyKGJvYXJkSWQ6IHN0cmluZywgZ2V0Vmlld3BvcnRDZW50ZXI6ICgpID0+IHsgeDogbnVtYmVyLCB5OiBudW1iZXIgfSwgZ2V0TmV4dFpJbmRleDogKGJhc2VFbGVtZW50SWQ/OiBzdHJpbmcpID0+IG51bWJlcikge1xuICBjb25zdCBmaXJlc3RvcmUgPSB1c2VGaXJlc3RvcmUoKTtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VVc2VyKCk7XG4gIGNvbnN0IHsgdG9hc3QgfSA9IHVzZVRvYXN0KCk7XG5cbiAgLy8gQ1LDjVRJQ086IFVzYXIgcmVmcyBwYXJhIGZ1bmNpb25lcyBxdWUgcHVlZGVuIGNhbWJpYXIgZnJlY3VlbnRlbWVudGVcbiAgLy8gRXN0byBwcmV2aWVuZSByZS1jcmVhY2lvbmVzIGNvbnN0YW50ZXMgZGUgYWRkRWxlbWVudFxuICBjb25zdCBnZXRWaWV3cG9ydENlbnRlclJlZiA9IHVzZVJlZihnZXRWaWV3cG9ydENlbnRlcik7XG4gIGNvbnN0IGdldE5leHRaSW5kZXhSZWYgPSB1c2VSZWYoZ2V0TmV4dFpJbmRleCk7XG5cbiAgLy8gQWN0dWFsaXphciByZWZzIGN1YW5kbyBjYW1iaWFuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZ2V0Vmlld3BvcnRDZW50ZXJSZWYuY3VycmVudCA9IGdldFZpZXdwb3J0Q2VudGVyO1xuICAgIGdldE5leHRaSW5kZXhSZWYuY3VycmVudCA9IGdldE5leHRaSW5kZXg7XG4gIH0sIFtnZXRWaWV3cG9ydENlbnRlciwgZ2V0TmV4dFpJbmRleF0pO1xuXG4gIGNvbnN0IGFkZEVsZW1lbnQgPSB1c2VDYWxsYmFjayhhc3luYyAodHlwZTogRWxlbWVudFR5cGUsIHByb3BzPzogeyBjb2xvcj86IHN0cmluZzsgY29udGVudD86IEVsZW1lbnRDb250ZW50OyBwcm9wZXJ0aWVzPzogQ2FudmFzRWxlbWVudFByb3BlcnRpZXM7IHBhcmVudElkPzogc3RyaW5nOyB0YWdzPzogc3RyaW5nW10gfSk6IFByb21pc2U8c3RyaW5nPiA9PiB7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIgfHwgIWJvYXJkSWQpIHtcbiAgICAgIGNvbnN0IGVycm9yTXNnID0gIWZpcmVzdG9yZSA/ICdGaXJlc3RvcmUgbm8gZXN0w6EgZGlzcG9uaWJsZScgOiAhdXNlciA/ICdVc3VhcmlvIG5vIGF1dGVudGljYWRvJyA6ICdCb2FyZCBJRCBubyB2w6FsaWRvJztcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoZXJyb3JNc2cpKTtcbiAgICB9XG4gICAgY29uc3QgZWxlbWVudHNSZWYgPSBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgJ3VzZXJzJywgdXNlci51aWQsICdjYW52YXNCb2FyZHMnLCBib2FyZElkLCAnY2FudmFzRWxlbWVudHMnKTtcbiAgICBpZiAodHlwZSA9PT0gJ2Nvbm5lY3RvcicpIHtcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhlbGVtZW50c1JlZiwge1xuICAgICAgICB0eXBlOiAnY29ubmVjdG9yJyxcbiAgICAgICAgdXNlcklkOiB1c2VyLnVpZCxcbiAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgIGNvbnRlbnQ6IHByb3BzPy5jb250ZW50LFxuICAgICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gZG9jUmVmLmlkO1xuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRQb3NpdGlvbiA9IGdldFZpZXdwb3J0Q2VudGVyUmVmLmN1cnJlbnQoKTsgLy8g4pyFIFVzYXIgcmVmXG4gICAgXG4gICAgLy8gUkVHTEE6IExvcyBudWV2b3MgZWxlbWVudG9zIGRlYmVuIGFwYXJlY2VyIGVuIFBSSU1FUkEgQ0FQQSAoekluZGV4IG3DoXhpbW8pXG4gICAgLy8gcGFyYSBxdWUgZWwgdXN1YXJpbyBwdWVkYSBhcnJhc3RyYXJsb3MgeSByZXViaWNhcmxvcyBmw6FjaWxtZW50ZVxuICAgIC8vIEVYQ0VQQ0nDk04gQ1LDjVRJQ0E6IExvcyBjb250ZW5lZG9yZXMgU0lFTVBSRSBlc3TDoW4gZW4gbGEgcHJpbWVyYSBjYXBhICh6SW5kZXggMClcbiAgICAvLyBpbmNsdXNvIGFudGVzIHF1ZSBjdWFkZXJub3MsIHBhcmEgcXVlIHB1ZWRhbiByZWNpYmlyIGVsZW1lbnRvcyBhcnJhc3RyYWRvc1xuICAgIGxldCB6SW5kZXg7XG4gICAgaWYgKHR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgIHpJbmRleCA9IDA7IC8vIENvbnRlbmVkb3JlcyBzaWVtcHJlIGVuIHByaW1lcmEgY2FwYSAoekluZGV4IDApXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVG9kb3MgbG9zIGRlbcOhcyBlbGVtZW50b3MgbnVldm9zIHZhbiBhIGxhIFBSSU1FUkEgQ0FQQSAoekluZGV4IG3DoXhpbW8gKyAxKVxuICAgICAgICB6SW5kZXggPSBnZXROZXh0WkluZGV4UmVmLmN1cnJlbnQoKTsgLy8g4pyFIFVzYXIgcmVmXG4gICAgfVxuXG4gICAgLy8gUkVHTEEgIzE6IExvcyBlbGVtZW50b3Mgc2UgYWJyZW4gY2VudHJhZG9zIGVuIGVsIHZpZXdwb3J0IGRlbCB1c3VhcmlvXG4gICAgLy8gU2kgbm8gc2UgcHJvcG9yY2lvbmEgdW5hIHBvc2ljacOzbiBlc3BlY8OtZmljYSwgdXNhciBlbCBjZW50cm8gZGVsIHZpZXdwb3J0XG4gICAgLy8gSU1QT1JUQU5URTogVmVyaWZpY2FyIHF1ZSBwcm9wcyBleGlzdGUgYW50ZXMgZGUgYWNjZWRlciBhIHByb3BlcnRpZXNcbiAgICBjb25zdCB2aWV3cG9ydENlbnRlciA9IChwcm9wcyAmJiBwcm9wcy5wcm9wZXJ0aWVzICYmIHByb3BzLnByb3BlcnRpZXMucG9zaXRpb24pIFxuICAgICAgPyBwcm9wcy5wcm9wZXJ0aWVzLnBvc2l0aW9uIFxuICAgICAgOiBkZWZhdWx0UG9zaXRpb247XG4gICAgY29uc3QgYmFzZVNpemUgPSAocHJvcHMgJiYgcHJvcHMucHJvcGVydGllcyAmJiBwcm9wcy5wcm9wZXJ0aWVzLnNpemUpXG4gICAgICA/IHByb3BzLnByb3BlcnRpZXMuc2l6ZVxuICAgICAgOiB7IHdpZHRoOiAyMDAsIGhlaWdodDogMTUwIH07XG4gICAgY29uc3Qgc2l6ZVdpZHRoID0gdHlwZW9mIGJhc2VTaXplLndpZHRoID09PSAnbnVtYmVyJyA/IGJhc2VTaXplLndpZHRoIDogMjAwO1xuICAgIGNvbnN0IHNpemVIZWlnaHQgPSB0eXBlb2YgYmFzZVNpemUuaGVpZ2h0ID09PSAnbnVtYmVyJyA/IGJhc2VTaXplLmhlaWdodCA6IDE1MDtcblxuICAgIC8vIEhlbHBlcjogQ2FsY3VsYSBsYSBwb3NpY2nDs24gcGFyYSBjZW50cmFyIGVsIGVsZW1lbnRvIGVuIGVsIHZpZXdwb3J0IFZJU0lCTEVcbiAgICAvLyBSRUdMQSBDUsONVElDQTogTG9zIGVsZW1lbnRvcyBkZWJlbiBhcGFyZWNlciBlbiBlbCBFU1BBQ0lPIFZJU0lCTEUgZGVsIHVzdWFyaW9cbiAgICAvLyBFbCBlbGVtZW50byBkZWJlIGVzdGFyIGNlbnRyYWRvIGVuIGVsIMOhcmVhIHZpc2libGUgZGVsIHRhYmxlcm9cbiAgICBjb25zdCBnZXRDZW50ZXJlZFBvc2l0aW9uID0gKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgICAvLyBPYnRlbmVyIGVsIGNlbnRybyBkZWwgdmlld3BvcnQgdmlzaWJsZSAoeWEgY2FsY3VsYWRvIGNvbiBzY3JvbGwgeSBzY2FsZSlcbiAgICAgIGNvbnN0IGNlbnRlclggPSB2aWV3cG9ydENlbnRlci54O1xuICAgICAgY29uc3QgY2VudGVyWSA9IHZpZXdwb3J0Q2VudGVyLnk7XG4gICAgICBcbiAgICAgIC8vIENhbGN1bGFyIHBvc2ljacOzbiBjZW50cmFkYSBpZGVhbCAoY2VudHJvIGRlbCBlbGVtZW50byA9IGNlbnRybyBkZWwgdmlld3BvcnQgdmlzaWJsZSlcbiAgICAgIGxldCB4ID0gY2VudGVyWCAtICh3aWR0aCAvIDIpO1xuICAgICAgbGV0IHkgPSBjZW50ZXJZIC0gKGhlaWdodCAvIDIpO1xuICAgICAgXG4gICAgICAvLyBDUsONVElDTzogQXNlZ3VyYXIgcXVlIGVsIGVsZW1lbnRvIGFwYXJlemNhIFNJRU1QUkUgZW4gZWwgw6FyZWEgdmlzaWJsZVxuICAgICAgLy8gU2kgZWwgY8OhbGN1bG8gZGEgbmVnYXRpdm8sIGFqdXN0YXIgcGFyYSBxdWUgYWwgbWVub3MgcGFydGUgZGVsIGVsZW1lbnRvIHNlYSB2aXNpYmxlXG4gICAgICAvLyBNw61uaW1vOiBhc2VndXJhciBxdWUgbGEgZXNxdWluYSBzdXBlcmlvciBpenF1aWVyZGEgZXN0w6kgZGVudHJvIGRlbCB2aWV3cG9ydCB2aXNpYmxlXG4gICAgICBjb25zdCBtaW5PZmZzZXQgPSAyMDsgLy8gTWFyZ2VuIG3DrW5pbW8gZGVzZGUgZWwgYm9yZGUgdmlzaWJsZVxuICAgICAgXG4gICAgICAvLyBPYnRlbmVyIGRpbWVuc2lvbmVzIGRlbCB2aWV3cG9ydCBlbiBjb29yZGVuYWRhcyBkZWwgY2FudmFzXG4gICAgICBjb25zdCB2aWV3cG9ydFdpZHRoID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IDE5MjA7XG4gICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93LmlubmVySGVpZ2h0IDogMTA4MDtcbiAgICAgIFxuICAgICAgLy8gQXNlZ3VyYXIgcXVlIGVsIGVsZW1lbnRvIHF1ZWRlIGRlbnRybyBkZWwgw6FyZWEgdmlzaWJsZSBkZWwgdmlld3BvcnRcbiAgICAgIC8vIFNpIGVsIGVsZW1lbnRvIGVzIG3DoXMgcGVxdWXDsW8gcXVlIGVsIHZpZXdwb3J0LCBjZW50cmFybG9cbiAgICAgIC8vIFNpIGVzIG3DoXMgZ3JhbmRlLCBhc2VndXJhciBxdWUgYWwgbWVub3MgcGFydGUgc2VhIHZpc2libGVcbiAgICAgIGlmICh3aWR0aCA8PSB2aWV3cG9ydFdpZHRoKSB7XG4gICAgICAgIC8vIEVsZW1lbnRvIGNhYmUgZW4gZWwgdmlld3BvcnQ6IGNlbnRyYXJsb1xuICAgICAgICB4ID0gTWF0aC5tYXgobWluT2Zmc2V0LCBNYXRoLm1pbih4LCBjZW50ZXJYICsgdmlld3BvcnRXaWR0aCAvIDIgLSB3aWR0aCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRWxlbWVudG8gbcOhcyBncmFuZGUgcXVlIGVsIHZpZXdwb3J0OiBhbGluZWFyIHBhcmEgcXVlIHNlYSB2aXNpYmxlIGRlc2RlIGVsIGluaWNpb1xuICAgICAgICB4ID0gTWF0aC5tYXgobWluT2Zmc2V0LCBjZW50ZXJYIC0gdmlld3BvcnRXaWR0aCAvIDQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoaGVpZ2h0IDw9IHZpZXdwb3J0SGVpZ2h0KSB7XG4gICAgICAgIC8vIEVsZW1lbnRvIGNhYmUgZW4gZWwgdmlld3BvcnQ6IGNlbnRyYXJsb1xuICAgICAgICB5ID0gTWF0aC5tYXgobWluT2Zmc2V0LCBNYXRoLm1pbih5LCBjZW50ZXJZICsgdmlld3BvcnRIZWlnaHQgLyAyIC0gaGVpZ2h0KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBFbGVtZW50byBtw6FzIGdyYW5kZSBxdWUgZWwgdmlld3BvcnQ6IGFsaW5lYXIgcGFyYSBxdWUgc2VhIHZpc2libGUgZGVzZGUgZWwgaW5pY2lvXG4gICAgICAgIHkgPSBNYXRoLm1heChtaW5PZmZzZXQsIGNlbnRlclkgLSB2aWV3cG9ydEhlaWdodCAvIDQpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWZXJpZmljYWNpw7NuIGZpbmFsOiBOVU5DQSBwZXJtaXRpciBjb29yZGVuYWRhcyBuZWdhdGl2YXNcbiAgICAgIHJldHVybiB7IFxuICAgICAgICB4OiBNYXRoLm1heCgwLCB4KSwgXG4gICAgICAgIHk6IE1hdGgubWF4KDAsIHkpXG4gICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBDb25zdHJ1aXIgYmFzZVByb3BlcnRpZXMgZGUgZm9ybWEgc2VndXJhXG4gICAgY29uc3QgYmFzZVByb3BlcnRpZXM6IFBhcnRpYWw8Q2FudmFzRWxlbWVudFByb3BlcnRpZXM+ID0ge1xuICAgICAgc2l6ZTogYmFzZVNpemUsXG4gICAgICB6SW5kZXg6IHpJbmRleCxcbiAgICAgIHJvdGF0aW9uOiAwLFxuICAgIH07XG4gICAgXG4gICAgLy8gQWdyZWdhciBwcm9waWVkYWRlcyBhZGljaW9uYWxlcyBkZSBwcm9wcyBzaSBleGlzdGVuXG4gICAgaWYgKHByb3BzICYmIHByb3BzLnByb3BlcnRpZXMgJiYgdHlwZW9mIHByb3BzLnByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBPYmplY3QuYXNzaWduKGJhc2VQcm9wZXJ0aWVzLCBwcm9wcy5wcm9wZXJ0aWVzKTtcbiAgICB9XG5cbiAgICBsZXQgbmV3RWxlbWVudERhdGE6IE9taXQ8V2l0aElkPENhbnZhc0VsZW1lbnQ+LCAnaWQnPiAmIHsgdHlwZTogRWxlbWVudFR5cGUgfTtcblxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnbm90ZXBhZCc6XG4gICAgICAgIGNvbnN0IG5vdGVwYWRTaXplID0geyB3aWR0aDogNzk0LCBoZWlnaHQ6IDk3OCB9O1xuICAgICAgICBjb25zdCBub3RlcGFkUG9zID0gZ2V0Q2VudGVyZWRQb3NpdGlvbihub3RlcGFkU2l6ZS53aWR0aCwgbm90ZXBhZFNpemUuaGVpZ2h0KTtcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IG5vdGVwYWRQb3MueCwgeTogbm90ZXBhZFBvcy55LCB3aWR0aDogbm90ZXBhZFNpemUud2lkdGgsIGhlaWdodDogbm90ZXBhZFNpemUuaGVpZ2h0LCB1c2VySWQ6IHVzZXIudWlkLCBwcm9wZXJ0aWVzOiB7IC4uLmJhc2VQcm9wZXJ0aWVzLCBwb3NpdGlvbjogbm90ZXBhZFBvcywgc2l6ZTogbm90ZXBhZFNpemUsIGZvcm1hdDogJ2xldHRlcicgfSwgY29udGVudDogeyB0aXRsZTogJ051ZXZvIEN1YWRlcm5vJywgcGFnZXM6IEFycmF5KDUpLmZpbGwoJzxkaXY+PGJyPjwvZGl2PicpLCBjdXJyZW50UGFnZTogMCB9LCB6SW5kZXgsIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfTsgYnJlYWs7XG4gICAgICBjYXNlICdub3RlcGFkLXNpbXBsZSc6XG4gICAgICAgIGNvbnN0IG5vdGVwYWRTaW1wbGVTaXplID0geyB3aWR0aDogMzAyLCBoZWlnaHQ6IDQ5MSB9O1xuICAgICAgICBjb25zdCBub3RlcGFkU2ltcGxlUG9zID0gZ2V0Q2VudGVyZWRQb3NpdGlvbihub3RlcGFkU2ltcGxlU2l6ZS53aWR0aCwgbm90ZXBhZFNpbXBsZVNpemUuaGVpZ2h0KTtcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IG5vdGVwYWRTaW1wbGVQb3MueCwgeTogbm90ZXBhZFNpbXBsZVBvcy55LCB3aWR0aDogbm90ZXBhZFNpbXBsZVNpemUud2lkdGgsIGhlaWdodDogbm90ZXBhZFNpbXBsZVNpemUuaGVpZ2h0LCB1c2VySWQ6IHVzZXIudWlkLCBwcm9wZXJ0aWVzOiB7IC4uLmJhc2VQcm9wZXJ0aWVzLCBwb3NpdGlvbjogbm90ZXBhZFNpbXBsZVBvcywgc2l6ZTogbm90ZXBhZFNpbXBsZVNpemUgfSwgY29udGVudDogeyB0aXRsZTogJ051ZXZvIE5vdGVwYWQnLCB0ZXh0OiAnPGRpdj48YnI+PC9kaXY+JyB9LCB6SW5kZXgsIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfTsgYnJlYWs7XG4gICAgICBjYXNlICdzdXBlci1ub3RlYm9vayc6XG4gICAgICAgIC8vIFRhbWHDsW8gZXhhY3RvOiAyMWNtIHggMjdjbSAoNzk0cHggeCAxMDIxcHggYSA5NiBEUEkpXG4gICAgICAgIGNvbnN0IHN1cGVyTm90ZWJvb2tTaXplID0geyB3aWR0aDogNzk0LCBoZWlnaHQ6IDEwMjEgfTtcbiAgICAgICAgY29uc3Qgc3VwZXJOb3RlYm9va1BvcyA9IGdldENlbnRlcmVkUG9zaXRpb24oc3VwZXJOb3RlYm9va1NpemUud2lkdGgsIHN1cGVyTm90ZWJvb2tTaXplLmhlaWdodCk7XG4gICAgICAgIG5ld0VsZW1lbnREYXRhID0geyB0eXBlLCB4OiBzdXBlck5vdGVib29rUG9zLngsIHk6IHN1cGVyTm90ZWJvb2tQb3MueSwgd2lkdGg6IHN1cGVyTm90ZWJvb2tTaXplLndpZHRoLCBoZWlnaHQ6IHN1cGVyTm90ZWJvb2tTaXplLmhlaWdodCwgdXNlcklkOiB1c2VyLnVpZCwgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IHN1cGVyTm90ZWJvb2tQb3MsIHNpemU6IHN1cGVyTm90ZWJvb2tTaXplIH0sIGNvbnRlbnQ6IHsgdGl0bGU6ICdTdXBlciBDdWFkZXJubycsIHBhZ2VzOiBBcnJheSg1KS5maWxsKCc8ZGl2Pjxicj48L2Rpdj4nKSwgY3VycmVudFBhZ2U6IDAgfSwgekluZGV4LCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07IGJyZWFrO1xuICAgICAgY2FzZSAnc3RpY2t5JzpcbiAgICAgICAgY29uc3Qgc3RpY2t5Q29sb3IgPSBwcm9wcz8uY29sb3IgfHwgJ3llbGxvdyc7XG4gICAgICAgIGNvbnN0IHN0aWNreVNpemUgPSB7IHdpZHRoOiAyMjQsIGhlaWdodDogMjI0IH07XG4gICAgICAgIGNvbnN0IHN0aWNreVBvcyA9IGdldENlbnRlcmVkUG9zaXRpb24oc3RpY2t5U2l6ZS53aWR0aCwgc3RpY2t5U2l6ZS5oZWlnaHQpO1xuICAgICAgICBjb25zdCBzdGlja3lFbGVtZW50OiBPbWl0PFN0aWNreUNhbnZhc0VsZW1lbnQsICdpZCc+ID0geyBcbiAgICAgICAgICB0eXBlOiAnc3RpY2t5JywgXG4gICAgICAgICAgeDogc3RpY2t5UG9zLngsIFxuICAgICAgICAgIHk6IHN0aWNreVBvcy55LCBcbiAgICAgICAgICB3aWR0aDogc3RpY2t5U2l6ZS53aWR0aCwgXG4gICAgICAgICAgaGVpZ2h0OiBzdGlja3lTaXplLmhlaWdodCwgXG4gICAgICAgICAgdXNlcklkOiB1c2VyLnVpZCwgXG4gICAgICAgICAgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IHN0aWNreVBvcywgc2l6ZTogc3RpY2t5U2l6ZSwgY29sb3I6IHN0aWNreUNvbG9yIH0gYXMgQ2FudmFzRWxlbWVudFByb3BlcnRpZXMsIFxuICAgICAgICAgIGNvbnRlbnQ6ICh0eXBlb2YgcHJvcHM/LmNvbnRlbnQgPT09ICdzdHJpbmcnID8gcHJvcHMuY29udGVudCA6ICdFc2NyaWJlIGFsZ28uLi4nKSwgXG4gICAgICAgICAgekluZGV4LCBcbiAgICAgICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCBcbiAgICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICAgIC4uLihwcm9wcz8udGFncyAmJiB7IHRhZ3M6IHByb3BzLnRhZ3MgfSksXG4gICAgICAgIH07XG4gICAgICAgIG5ld0VsZW1lbnREYXRhID0gc3RpY2t5RWxlbWVudDsgYnJlYWs7XG4gICAgICBjYXNlICd0b2RvJzpcbiAgICAgICAgY29uc3QgdG9kb1NpemUgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMTUwIH07XG4gICAgICAgIGNvbnN0IHRvZG9Qb3MgPSBnZXRDZW50ZXJlZFBvc2l0aW9uKHRvZG9TaXplLndpZHRoLCB0b2RvU2l6ZS5oZWlnaHQpO1xuICAgICAgICBuZXdFbGVtZW50RGF0YSA9IHsgdHlwZSwgeDogdG9kb1Bvcy54LCB5OiB0b2RvUG9zLnksIHdpZHRoOiB0b2RvU2l6ZS53aWR0aCwgaGVpZ2h0OiB0b2RvU2l6ZS5oZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiB0b2RvUG9zLCBzaXplOiB0b2RvU2l6ZSB9LCBjb250ZW50OiBwcm9wcz8uY29udGVudCB8fCB7IHRpdGxlOiAnTGlzdGEgZGUgVGFyZWFzJywgaXRlbXM6IFtdIH0sIHpJbmRleCwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9OyBicmVhaztcbiAgICAgIGNhc2UgJ2ltYWdlJzpcbiAgICAgICAgY29uc3QgaW1hZ2VQb3MgPSBnZXRDZW50ZXJlZFBvc2l0aW9uKHNpemVXaWR0aCwgc2l6ZUhlaWdodCk7XG4gICAgICAgIG5ld0VsZW1lbnREYXRhID0geyB0eXBlLCB4OiBpbWFnZVBvcy54LCB5OiBpbWFnZVBvcy55LCB3aWR0aDogc2l6ZVdpZHRoLCBoZWlnaHQ6IHNpemVIZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiBpbWFnZVBvcywgc2l6ZTogeyB3aWR0aDogc2l6ZVdpZHRoLCBoZWlnaHQ6IHNpemVIZWlnaHQgfSB9LCBjb250ZW50OiBwcm9wcz8uY29udGVudCwgekluZGV4LCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07IGJyZWFrO1xuICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgIGNvbnN0IHRleHRQb3MgPSBnZXRDZW50ZXJlZFBvc2l0aW9uKHNpemVXaWR0aCwgc2l6ZUhlaWdodCk7XG4gICAgICAgIGNvbnN0IHRleHRCZ0NvbG9yID0gKHByb3BzPy5wcm9wZXJ0aWVzIGFzIENhbnZhc0VsZW1lbnRQcm9wZXJ0aWVzKT8uYmFja2dyb3VuZENvbG9yIHx8ICcjZmZmZmZmJztcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IHRleHRQb3MueCwgeTogdGV4dFBvcy55LCB3aWR0aDogc2l6ZVdpZHRoLCBoZWlnaHQ6IHNpemVIZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiB0ZXh0UG9zLCBzaXplOiB7IHdpZHRoOiBzaXplV2lkdGgsIGhlaWdodDogc2l6ZUhlaWdodCB9LCBiYWNrZ3JvdW5kQ29sb3I6IHRleHRCZ0NvbG9yIH0sIGNvbnRlbnQ6IHByb3BzPy5jb250ZW50IHx8ICc8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxOHB4O1wiPkVzY3JpYmUgYWxnby4uLjwvZGl2PicsIGNvbG9yOiBwcm9wcz8uY29sb3IgfHwgJ3doaXRlJywgekluZGV4LCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07IGJyZWFrO1xuICAgICAgY2FzZSAnY29udGFpbmVyJzpcbiAgICAgICAgLy8gUkVHTEEgRVNQRUNJQUw6IEVsZW1lbnRvIEs4NWhDOE01c3Bmc2dSSVRuRVFSIChsaWVuem8pIGRlYmUgc2VyIDYwJSBtw6FzIHBlcXVlw7FvIHkgY29sb3IgI2RhZjRjNVxuICAgICAgICBjb25zdCBkZWZhdWx0Q29udGFpbmVyU2l6ZSA9IHsgd2lkdGg6IDM3OCwgaGVpZ2h0OiA1NjcgfTsgLy8gMTB4MTUgY20gZW4gcMOteGVsZXNcbiAgICAgICAgY29uc3QgY29udGFpbmVyU2l6ZSA9IChwcm9wcz8ucHJvcGVydGllcz8uc2l6ZSkgXG4gICAgICAgICAgPyBwcm9wcy5wcm9wZXJ0aWVzLnNpemUgXG4gICAgICAgICAgOiBkZWZhdWx0Q29udGFpbmVyU2l6ZTtcbiAgICAgICAgLy8gU2kgZXMgZWwgbGllbnpvIGVzcGVjaWFsICh0w610dWxvIFwiTGllbnpvXCIgbyBJRCBlc3BlY8OtZmljbyksIHJlZHVjaXIgYW5jaG8gNTAlXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNvbnRlbnQgPSBwcm9wcz8uY29udGVudCAmJiB0eXBlb2YgcHJvcHMuY29udGVudCA9PT0gJ29iamVjdCcgJiYgJ3RpdGxlJyBpbiBwcm9wcy5jb250ZW50IFxuICAgICAgICAgID8gKHByb3BzLmNvbnRlbnQgYXMgYW55KSBcbiAgICAgICAgICA6IG51bGw7XG4gICAgICAgIGNvbnN0IGlzU3BlY2lhbExpZW56byA9IGNvbnRhaW5lckNvbnRlbnQ/LnRpdGxlID09PSAnTGllbnpvJyB8fCBjb250YWluZXJDb250ZW50Py50aXRsZSA9PT0gJ2xpZW56byc7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29udGFpbmVyU2l6ZSA9IGlzU3BlY2lhbExpZW56byBcbiAgICAgICAgICA/IHsgd2lkdGg6IE1hdGgucm91bmQoKHR5cGVvZiBjb250YWluZXJTaXplLndpZHRoID09PSAnbnVtYmVyJyA/IGNvbnRhaW5lclNpemUud2lkdGggOiAzNzgpICogMC41KSwgaGVpZ2h0OiB0eXBlb2YgY29udGFpbmVyU2l6ZS5oZWlnaHQgPT09ICdudW1iZXInID8gY29udGFpbmVyU2l6ZS5oZWlnaHQgOiA1NjcgfVxuICAgICAgICAgIDogY29udGFpbmVyU2l6ZTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUG9zID0gZ2V0Q2VudGVyZWRQb3NpdGlvbih0eXBlb2YgZmluYWxDb250YWluZXJTaXplLndpZHRoID09PSAnbnVtYmVyJyA/IGZpbmFsQ29udGFpbmVyU2l6ZS53aWR0aCA6IDM3OCwgdHlwZW9mIGZpbmFsQ29udGFpbmVyU2l6ZS5oZWlnaHQgPT09ICdudW1iZXInID8gZmluYWxDb250YWluZXJTaXplLmhlaWdodCA6IDU2Nyk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckJhY2tncm91bmRDb2xvciA9IGlzU3BlY2lhbExpZW56b1xuICAgICAgICAgID8gJyNkYWY0YzUnIC8vIENvbG9yIGVzcGVjaWFsIHBhcmEgbGllbnpvXG4gICAgICAgICAgOiAoKHByb3BzPy5wcm9wZXJ0aWVzPy5iYWNrZ3JvdW5kQ29sb3IpIFxuICAgICAgICAgICAgPyBwcm9wcy5wcm9wZXJ0aWVzLmJhY2tncm91bmRDb2xvciBcbiAgICAgICAgICAgIDogJ3doaXRlJyk7XG4gICAgICAgIC8vIFJFR0xBOiBMaWVuem8gZGViZSB0ZW5lciB6SW5kZXggPSAtMSAoZGViYWpvIGRlIHRvZG9zIGV4Y2VwdG8gY3VhZGVybm9zIHF1ZSB0aWVuZW4gekluZGV4ID0gMSlcbiAgICAgICAgY29uc3QgY29udGFpbmVyWkluZGV4ID0gaXNTcGVjaWFsTGllbnpvID8gLTEgOiB6SW5kZXg7XG4gICAgICAgIGNvbnN0IGZpbmFsQ29udGFpbmVyQ29udGVudCA9IGNvbnRhaW5lckNvbnRlbnQgfHwgeyB0aXRsZTogJ051ZXZvIENvbnRlbmVkb3InLCBlbGVtZW50SWRzOiBbXSwgbGF5b3V0OiAnc2luZ2xlJyB9O1xuICAgICAgICBuZXdFbGVtZW50RGF0YSA9IHsgdHlwZTogJ2NvbnRhaW5lcicsIHg6IGNvbnRhaW5lclBvcy54LCB5OiBjb250YWluZXJQb3MueSwgd2lkdGg6IHR5cGVvZiBmaW5hbENvbnRhaW5lclNpemUud2lkdGggPT09ICdudW1iZXInID8gZmluYWxDb250YWluZXJTaXplLndpZHRoIDogMzc4LCBoZWlnaHQ6IHR5cGVvZiBmaW5hbENvbnRhaW5lclNpemUuaGVpZ2h0ID09PSAnbnVtYmVyJyA/IGZpbmFsQ29udGFpbmVyU2l6ZS5oZWlnaHQgOiA1NjcsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiBjb250YWluZXJQb3MsIHNpemU6IGZpbmFsQ29udGFpbmVyU2l6ZSwgYmFja2dyb3VuZENvbG9yOiBjb250YWluZXJCYWNrZ3JvdW5kQ29sb3IsIHpJbmRleDogY29udGFpbmVyWkluZGV4IH0sIGNvbnRlbnQ6IGZpbmFsQ29udGFpbmVyQ29udGVudCwgekluZGV4OiBjb250YWluZXJaSW5kZXgsIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfTsgYnJlYWs7XG4gICAgICBjYXNlICdjb21tZW50JzpcbiAgICAgICAgY29uc3QgY29tbWVudFNpemUgPSB7IHdpZHRoOiAzMiwgaGVpZ2h0OiAzMiB9O1xuICAgICAgICBjb25zdCBjb21tZW50UG9zID0gZ2V0Q2VudGVyZWRQb3NpdGlvbihjb21tZW50U2l6ZS53aWR0aCwgY29tbWVudFNpemUuaGVpZ2h0KTtcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IGNvbW1lbnRQb3MueCwgeTogY29tbWVudFBvcy55LCB3aWR0aDogY29tbWVudFNpemUud2lkdGgsIGhlaWdodDogY29tbWVudFNpemUuaGVpZ2h0LCB1c2VySWQ6IHVzZXIudWlkLCBwcm9wZXJ0aWVzOiB7IC4uLmJhc2VQcm9wZXJ0aWVzLCBwb3NpdGlvbjogY29tbWVudFBvcywgc2l6ZTogY29tbWVudFNpemUgfSwgY29udGVudDogcHJvcHM/LmNvbnRlbnQgfHwgeyB0aXRsZTogJycsIGxhYmVsOiAnJywgY29tbWVudDogJycgfSwgcGFyZW50SWQ6IHByb3BzPy5wYXJlbnRJZCB8fCB1bmRlZmluZWQsIHpJbmRleCwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9OyBicmVhaztcbiAgICAgIGNhc2UgJ21vb2Rib2FyZCc6XG4gICAgICAgIGNvbnN0IG1vb2Rib2FyZFNpemUgPSB7IHdpZHRoOiA2MDAsIGhlaWdodDogNTAwIH07XG4gICAgICAgIGNvbnN0IG1vb2Rib2FyZFBvcyA9IGdldENlbnRlcmVkUG9zaXRpb24obW9vZGJvYXJkU2l6ZS53aWR0aCwgbW9vZGJvYXJkU2l6ZS5oZWlnaHQpO1xuICAgICAgICBuZXdFbGVtZW50RGF0YSA9IHsgdHlwZSwgeDogbW9vZGJvYXJkUG9zLngsIHk6IG1vb2Rib2FyZFBvcy55LCB3aWR0aDogbW9vZGJvYXJkU2l6ZS53aWR0aCwgaGVpZ2h0OiBtb29kYm9hcmRTaXplLmhlaWdodCwgdXNlcklkOiB1c2VyLnVpZCwgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IG1vb2Rib2FyZFBvcywgc2l6ZTogbW9vZGJvYXJkU2l6ZSwgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZicgfSwgY29udGVudDogcHJvcHM/LmNvbnRlbnQgfHwgeyB0aXRsZTogJ051ZXZvIE1vb2Rib2FyZCcsIGltYWdlczogW10sIGFubm90YXRpb25zOiBbXSwgbGF5b3V0OiAnZ3JpZCcgfSwgekluZGV4LCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07IGJyZWFrO1xuICAgICAgY2FzZSAndGFiYmVkLW5vdGVwYWQnOlxuICAgICAgICBjb25zdCB0YWJiZWRTaXplID0geyB3aWR0aDogNTAwLCBoZWlnaHQ6IDQwMCB9O1xuICAgICAgICBjb25zdCB0YWJiZWRQb3MgPSBnZXRDZW50ZXJlZFBvc2l0aW9uKHRhYmJlZFNpemUud2lkdGgsIHRhYmJlZFNpemUuaGVpZ2h0KTtcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IHRhYmJlZFBvcy54LCB5OiB0YWJiZWRQb3MueSwgd2lkdGg6IHRhYmJlZFNpemUud2lkdGgsIGhlaWdodDogdGFiYmVkU2l6ZS5oZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiB0YWJiZWRQb3MsIHNpemU6IHRhYmJlZFNpemUsIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnIH0sIGNvbnRlbnQ6IHByb3BzPy5jb250ZW50IHx8IHsgdGl0bGU6ICdCbG9jIGRlIE5vdGFzJywgdGFiczogW3sgaWQ6ICd0YWItMScsIHRpdGxlOiAnUGVzdGHDsWEgMScsIGNvbnRlbnQ6ICcnIH1dLCBhY3RpdmVUYWJJZDogJ3RhYi0xJyB9LCB6SW5kZXgsIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfTsgYnJlYWs7XG4gICAgICBjYXNlICdhY2NvcmRpb24nOlxuICAgICAgICBjb25zdCBhY2NvcmRpb25TaXplID0geyB3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MCB9OyAvLyAyMCUgbcOhcyBwZXF1ZcOxbyBxdWUgNDAweDMwMFxuICAgICAgICBjb25zdCBhY2NvcmRpb25Qb3MgPSBnZXRDZW50ZXJlZFBvc2l0aW9uKGFjY29yZGlvblNpemUud2lkdGgsIGFjY29yZGlvblNpemUuaGVpZ2h0KTtcbiAgICAgICAgbmV3RWxlbWVudERhdGEgPSB7IHR5cGUsIHg6IGFjY29yZGlvblBvcy54LCB5OiBhY2NvcmRpb25Qb3MueSwgd2lkdGg6IGFjY29yZGlvblNpemUud2lkdGgsIGhlaWdodDogYWNjb3JkaW9uU2l6ZS5oZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiBhY2NvcmRpb25Qb3MsIHNpemU6IGFjY29yZGlvblNpemUsIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnIH0sIGNvbnRlbnQ6IHByb3BzPy5jb250ZW50IHx8IHsgaXRlbXM6IFt7IGlkOiAnMScsIHRpdGxlOiAnTnVldm8gSXRlbScsIGNvbnRlbnQ6ICcnIH1dIH0sIHpJbmRleCwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9OyBicmVhaztcbiAgICAgIGNhc2UgJ3N0b3B3YXRjaCc6XG4gICAgICAgIGNvbnN0IHN0b3B3YXRjaFNpemUgPSB7IHdpZHRoOiAyMDAsIGhlaWdodDogMTIwIH07XG4gICAgICAgIGNvbnN0IHN0b3B3YXRjaFBvcyA9IGdldENlbnRlcmVkUG9zaXRpb24oc3RvcHdhdGNoU2l6ZS53aWR0aCwgc3RvcHdhdGNoU2l6ZS5oZWlnaHQpO1xuICAgICAgICBuZXdFbGVtZW50RGF0YSA9IHsgdHlwZTogJ3N0b3B3YXRjaCcgYXMgRWxlbWVudFR5cGUsIHg6IHN0b3B3YXRjaFBvcy54LCB5OiBzdG9wd2F0Y2hQb3MueSwgd2lkdGg6IHN0b3B3YXRjaFNpemUud2lkdGgsIGhlaWdodDogc3RvcHdhdGNoU2l6ZS5oZWlnaHQsIHVzZXJJZDogdXNlci51aWQsIHByb3BlcnRpZXM6IHsgLi4uYmFzZVByb3BlcnRpZXMsIHBvc2l0aW9uOiBzdG9wd2F0Y2hQb3MsIHNpemU6IHN0b3B3YXRjaFNpemUsIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnIH0sIGNvbnRlbnQ6IHsgdGltZTogMCwgaXNSdW5uaW5nOiBmYWxzZSB9LCB6SW5kZXgsIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCkgfSBhcyBPbWl0PFdpdGhJZDxDYW52YXNFbGVtZW50PiwgJ2lkJz4gJiB7IHR5cGU6IEVsZW1lbnRUeXBlIH07IGJyZWFrO1xuICAgICAgY2FzZSAnY291bnRkb3duJzpcbiAgICAgICAgY29uc3QgY291bnRkb3duU2l6ZSA9IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAxODAgfTtcbiAgICAgICAgY29uc3QgY291bnRkb3duUG9zID0gZ2V0Q2VudGVyZWRQb3NpdGlvbihjb3VudGRvd25TaXplLndpZHRoLCBjb3VudGRvd25TaXplLmhlaWdodCk7XG4gICAgICAgIG5ld0VsZW1lbnREYXRhID0geyB0eXBlOiAnY291bnRkb3duJyBhcyBFbGVtZW50VHlwZSwgeDogY291bnRkb3duUG9zLngsIHk6IGNvdW50ZG93blBvcy55LCB3aWR0aDogY291bnRkb3duU2l6ZS53aWR0aCwgaGVpZ2h0OiBjb3VudGRvd25TaXplLmhlaWdodCwgdXNlcklkOiB1c2VyLnVpZCwgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IGNvdW50ZG93blBvcywgc2l6ZTogY291bnRkb3duU2l6ZSwgYmFja2dyb3VuZENvbG9yOiAnIzAwMDAwMCcgfSwgY29udGVudDogeyB0aW1lTGVmdDogMCwgc2VsZWN0ZWRNaW51dGVzOiA1LCBpc1J1bm5pbmc6IGZhbHNlIH0sIHpJbmRleCwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9IGFzIE9taXQ8V2l0aElkPENhbnZhc0VsZW1lbnQ+LCAnaWQnPiAmIHsgdHlwZTogRWxlbWVudFR5cGUgfTsgYnJlYWs7XG4gICAgICBjYXNlICdoaWdobGlnaHQtdGV4dCc6XG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodFNpemUgPSB7IHdpZHRoOiAzMDAsIGhlaWdodDogMTUwIH07XG4gICAgICAgIGNvbnN0IGhpZ2hsaWdodFBvcyA9IGdldENlbnRlcmVkUG9zaXRpb24oaGlnaGxpZ2h0U2l6ZS53aWR0aCwgaGlnaGxpZ2h0U2l6ZS5oZWlnaHQpO1xuICAgICAgICBjb25zdCBoaWdobGlnaHRDb2xvciA9IChwcm9wcz8ucHJvcGVydGllcz8uYmFja2dyb3VuZENvbG9yKSA/IHByb3BzLnByb3BlcnRpZXMuYmFja2dyb3VuZENvbG9yIDogJyNmZmZiOGInO1xuICAgICAgICBuZXdFbGVtZW50RGF0YSA9IHsgdHlwZTogJ2hpZ2hsaWdodC10ZXh0JyBhcyBFbGVtZW50VHlwZSwgeDogaGlnaGxpZ2h0UG9zLngsIHk6IGhpZ2hsaWdodFBvcy55LCB3aWR0aDogaGlnaGxpZ2h0U2l6ZS53aWR0aCwgaGVpZ2h0OiBoaWdobGlnaHRTaXplLmhlaWdodCwgdXNlcklkOiB1c2VyLnVpZCwgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IGhpZ2hsaWdodFBvcywgc2l6ZTogaGlnaGxpZ2h0U2l6ZSwgYmFja2dyb3VuZENvbG9yOiBoaWdobGlnaHRDb2xvciB9LCBjb250ZW50OiB7IHRleHQ6ICcnIH0sIHpJbmRleCwgY3JlYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSwgdXBkYXRlZEF0OiBzZXJ2ZXJUaW1lc3RhbXAoKSB9IGFzIE9taXQ8V2l0aElkPENhbnZhc0VsZW1lbnQ+LCAnaWQnPiAmIHsgdHlwZTogRWxlbWVudFR5cGUgfTsgYnJlYWs7XG4gICAgICBjYXNlICd5ZWxsb3ctbm90ZXBhZCc6XG4gICAgICAgIC8vIFRhbWHDsW8gYmFzYWRvIGVuIGxhcyBpbcOhZ2VuZXM6IGFwcm94aW1hZGFtZW50ZSA0MDB4NjAwcHggKHBvcnRyYWl0KVxuICAgICAgICBjb25zdCB5ZWxsb3dOb3RlcGFkU2l6ZSA9IHsgd2lkdGg6IDQwMCwgaGVpZ2h0OiA2MDAgfTtcbiAgICAgICAgY29uc3QgeWVsbG93Tm90ZXBhZFBvcyA9IGdldENlbnRlcmVkUG9zaXRpb24oeWVsbG93Tm90ZXBhZFNpemUud2lkdGgsIHllbGxvd05vdGVwYWRTaXplLmhlaWdodCk7XG4gICAgICAgIG5ld0VsZW1lbnREYXRhID0geyB0eXBlLCB4OiB5ZWxsb3dOb3RlcGFkUG9zLngsIHk6IHllbGxvd05vdGVwYWRQb3MueSwgd2lkdGg6IHllbGxvd05vdGVwYWRTaXplLndpZHRoLCBoZWlnaHQ6IHllbGxvd05vdGVwYWRTaXplLmhlaWdodCwgdXNlcklkOiB1c2VyLnVpZCwgcHJvcGVydGllczogeyAuLi5iYXNlUHJvcGVydGllcywgcG9zaXRpb246IHllbGxvd05vdGVwYWRQb3MsIHNpemU6IHllbGxvd05vdGVwYWRTaXplLCBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGRkUwJyB9LCBjb250ZW50OiBwcm9wcz8uY29udGVudCB8fCB7IHRleHQ6ICcnLCBzZWFyY2hRdWVyeTogJycgfSwgekluZGV4LCBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLCB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07IGJyZWFrO1xuICAgICAgZGVmYXVsdDogcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcihgVGlwbyBkZSBlbGVtZW50byBpbnbDoWxpZG86ICR7dHlwZX1gKSk7XG4gICAgfVxuICBcbiAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoZWxlbWVudHNSZWYsIG5ld0VsZW1lbnREYXRhKTtcbiAgICByZXR1cm4gZG9jUmVmLmlkO1xuICB9LCBbZmlyZXN0b3JlLCB1c2VyLCBib2FyZElkXSk7IC8vIOKchSBSZW1vdmlkbyBnZXROZXh0WkluZGV4IHkgZ2V0Vmlld3BvcnRDZW50ZXIgLSB1c2FyIGRpcmVjdGFtZW50ZSBzaW4gZGVwZW5kZW5jaWFzXG5cbiAgY29uc3QgdXBkYXRlRWxlbWVudCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPENhbnZhc0VsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIgfHwgIWJvYXJkSWQpIHJldHVybjtcbiAgICBjb25zdCBlbGVtZW50RG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgJ3VzZXJzJywgdXNlci51aWQsICdjYW52YXNCb2FyZHMnLCBib2FyZElkLCAnY2FudmFzRWxlbWVudHMnLCBpZCk7XG4gICAgXG4gICAgLy8gTGltcGlhciB2YWxvcmVzIHVuZGVmaW5lZCAoRmlyZXN0b3JlIG5vIGxvcyBhY2VwdGEpXG4gICAgY29uc3QgY2xlYW5VcGRhdGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0geyB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH07XG4gICAgT2JqZWN0LmtleXModXBkYXRlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAodXBkYXRlcyBhcyBhbnkpW2tleV07XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjbGVhblVwZGF0ZXNba2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdwYXJlbnRJZCcpIHtcbiAgICAgICAgLy8gU2kgcGFyZW50SWQgZXMgdW5kZWZpbmVkLCB1c2FyIG51bGwgcGFyYSBlbGltaW5hcmxvIChGaXJlc3RvcmUgYWNlcHRhIG51bGwpXG4gICAgICAgIGNsZWFuVXBkYXRlc1trZXldID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICAvLyBBY3R1YWxpemFyIGVsIGVsZW1lbnRvXG4gICAgdXBkYXRlRG9jKGVsZW1lbnREb2NSZWYsIGNsZWFuVXBkYXRlcyk7XG4gICAgXG4gICAgLy8gQVVUT0dVQVJEQURPIERFTCBUQUJMRVJPOiBBY3R1YWxpemFyIHRhbWJpw6luIGVsIHRhYmxlcm8gY29uIHVwZGF0ZWRBdFxuICAgIC8vIEVzdG8gYXNlZ3VyYSBxdWUgZWwgdGFibGVybyByZWZsZWplIHNpZW1wcmUgbGEgw7psdGltYSBtb2RpZmljYWNpw7NuXG4gICAgY29uc3QgYm9hcmREb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCAndXNlcnMnLCB1c2VyLnVpZCwgJ2NhbnZhc0JvYXJkcycsIGJvYXJkSWQpO1xuICAgIHVwZGF0ZURvYyhib2FyZERvY1JlZiwgeyB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpIH0pLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhY3R1YWxpemFuZG8gdGFibGVybzonLCBlcnIpO1xuICAgIH0pO1xuICB9LCBbZmlyZXN0b3JlLCB1c2VyLCBib2FyZElkXSk7XG5cbiAgY29uc3QgZGVsZXRlRWxlbWVudCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nLCBhbGxFbGVtZW50czogV2l0aElkPENhbnZhc0VsZW1lbnQ+W10pID0+IHtcbiAgICBpZiAoIWZpcmVzdG9yZSB8fCAhdXNlciB8fCAhYm9hcmRJZCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnN0IGVsZW1lbnRUb0RlbGV0ZVJlZiA9IGFsbEVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IGlkKTtcbiAgICBpZiAoIWVsZW1lbnRUb0RlbGV0ZVJlZikgcmV0dXJuO1xuXG4gICAgY29uc3QgZWxlbWVudHNSZWYgPSBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgJ3VzZXJzJywgdXNlci51aWQsICdjYW52YXNCb2FyZHMnLCBib2FyZElkLCAnY2FudmFzRWxlbWVudHMnKTtcbiAgICBjb25zdCBiYXRjaCA9IHdyaXRlQmF0Y2goZmlyZXN0b3JlKTtcbiAgICBjb25zdCBlbGVtZW50RG9jUmVmID0gZG9jKGVsZW1lbnRzUmVmLCBpZCk7XG5cbiAgICBpZiAoZWxlbWVudFRvRGVsZXRlUmVmLnR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNvbnRlbnQgPSBlbGVtZW50VG9EZWxldGVSZWYuY29udGVudCBhcyBDb250YWluZXJDb250ZW50O1xuICAgICAgICBpZiAoY29udGFpbmVyQ29udGVudCAmJiBBcnJheS5pc0FycmF5KGNvbnRhaW5lckNvbnRlbnQuZWxlbWVudElkcykpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lckNvbnRlbnQuZWxlbWVudElkcy5mb3JFYWNoKChjaGlsZElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZERvY1JlZiA9IGRvYyhlbGVtZW50c1JlZiwgY2hpbGRJZCk7XG4gICAgICAgICAgICAgICAgYmF0Y2guZGVsZXRlKGNoaWxkRG9jUmVmKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGJhdGNoLmRlbGV0ZShlbGVtZW50RG9jUmVmKTtcblxuICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuICB9LCBbZmlyZXN0b3JlLCB1c2VyLCBib2FyZElkXSk7XG5cbiAgY29uc3QgdW5hbmNob3JFbGVtZW50ID0gdXNlQ2FsbGJhY2soYXN5bmMgKGVsZW1lbnRJZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKCFmaXJlc3RvcmUgfHwgIXVzZXIgfHwgIWJvYXJkSWQpIHJldHVybjtcblxuICAgIGNvbnN0IGVsZW1lbnRzUmVmID0gY29sbGVjdGlvbihmaXJlc3RvcmUsICd1c2VycycsIHVzZXIudWlkLCAnY2FudmFzQm9hcmRzJywgYm9hcmRJZCwgJ2NhbnZhc0VsZW1lbnRzJyk7XG4gICAgY29uc3QgZWxlbWVudERvY1JlZiA9IGRvYyhlbGVtZW50c1JlZiwgZWxlbWVudElkKTtcbiAgICBcbiAgICBjb25zdCBlbGVtZW50U25hcCA9IGF3YWl0IGdldERvYyhlbGVtZW50RG9jUmVmKTtcbiAgICBpZiAoIWVsZW1lbnRTbmFwLmV4aXN0cygpKSB7XG4gICAgICB0b2FzdCh7IFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICB0aXRsZTogXCJFcnJvclwiLCBcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRWwgZWxlbWVudG8gbm8gZXhpc3RlLlwiIFxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGVsZW1lbnREYXRhID0gZWxlbWVudFNuYXAuZGF0YSgpO1xuICAgIGlmICghZWxlbWVudERhdGE/LnBhcmVudElkKSB7XG4gICAgICB0b2FzdCh7IFxuICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICB0aXRsZTogXCJFcnJvclwiLCBcbiAgICAgICAgZGVzY3JpcHRpb246IFwiRWwgZWxlbWVudG8gbm8gZXN0w6EgYW5jbGFkbyBhIG5pbmfDum4gY29udGVuZWRvci5cIiBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50RGF0YSBhcyBDYW52YXNFbGVtZW50O1xuICAgIGNvbnN0IHBhcmVudElkID0gZWxlbWVudC5wYXJlbnRJZDtcbiAgICBjb25zdCBwYXJlbnREb2NSZWYgPSBkb2MoZWxlbWVudHNSZWYsIHBhcmVudElkKTtcbiAgICBjb25zdCBwYXJlbnRTbmFwID0gYXdhaXQgZ2V0RG9jKHBhcmVudERvY1JlZik7XG5cbiAgICBpZiAoIXBhcmVudFNuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHRvYXN0KHsgXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgIHRpdGxlOiBcIkVycm9yXCIsIFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJObyBzZSBlbmNvbnRyw7MgZWwgY29udGVuZWRvciBwYWRyZS5cIiBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudEVsZW1lbnREYXRhID0gcGFyZW50U25hcC5kYXRhKCk7XG4gICAgaWYgKCFwYXJlbnRFbGVtZW50RGF0YSkge1xuICAgICAgdG9hc3QoeyBcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIiwgXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIk5vIHNlIHB1ZG8gb2J0ZW5lciBkYXRvcyBkZWwgY29udGVuZWRvciBwYWRyZS5cIiBcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmVudEVsZW1lbnQgPSBwYXJlbnRFbGVtZW50RGF0YSBhcyBDYW52YXNFbGVtZW50O1xuICAgIGNvbnN0IHBhcmVudENvbnRlbnQgPSBwYXJlbnRFbGVtZW50Py5jb250ZW50IGFzIENvbnRhaW5lckNvbnRlbnQgfCB1bmRlZmluZWQ7XG4gICAgY29uc3QgcGFyZW50UHJvcHMgPSBwYXJlbnRFbGVtZW50Py5wcm9wZXJ0aWVzIGFzIENhbnZhc0VsZW1lbnRQcm9wZXJ0aWVzIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gUmVtb3ZlIGVsZW1lbnRJZCBmcm9tIHBhcmVudCdzIGNvbnRlbnRcbiAgICBjb25zdCBuZXdFbGVtZW50SWRzID0gKHBhcmVudENvbnRlbnQ/LmVsZW1lbnRJZHMgfHwgW10pLmZpbHRlcihpZCA9PiBpZCAhPT0gZWxlbWVudElkKTtcblxuICAgIC8vIENhbGN1bGFyIG51ZXZhIHBvc2ljacOzbiBtZWpvcmFkYTogYSBsYSBkZXJlY2hhIGRlbCBwYW5lbCBjb24gdW4gb2Zmc2V0XG4gICAgY29uc3QgcGFyZW50WCA9IHBhcmVudFByb3BzPy5wb3NpdGlvbj8ueCA/PyAwO1xuICAgIGNvbnN0IHBhcmVudFdpZHRoID0gdHlwZW9mIHBhcmVudFByb3BzPy5zaXplPy53aWR0aCA9PT0gJ251bWJlcicgXG4gICAgICA/IHBhcmVudFByb3BzLnNpemUud2lkdGggXG4gICAgICA6IChwYXJlbnRQcm9wcz8uc2l6ZT8ud2lkdGggPyBwYXJzZUZsb2F0KFN0cmluZyhwYXJlbnRQcm9wcy5zaXplLndpZHRoKSkgOiAzMDApIHx8IDMwMDtcbiAgICBjb25zdCBwYXJlbnRZID0gcGFyZW50UHJvcHM/LnBvc2l0aW9uPy55ID8/IDA7XG4gICAgXG4gICAgLy8gT2J0ZW5lciBwb3NpY2nDs24gb3JpZ2luYWwgZGVsIGVsZW1lbnRvIHNpIGV4aXN0ZSwgbyBjYWxjdWxhciBudWV2YVxuICAgIGNvbnN0IGVsZW1lbnRQcm9wcyA9IGVsZW1lbnQucHJvcGVydGllcyBhcyBDYW52YXNFbGVtZW50UHJvcGVydGllcyB8IHVuZGVmaW5lZDtcbiAgICBjb25zdCBvcmlnaW5hbFBvc2l0aW9uID0gZWxlbWVudFByb3BzPy5wb3NpdGlvbiB8fCB7IHg6IGVsZW1lbnQueCB8fCAwLCB5OiBlbGVtZW50LnkgfHwgMCB9O1xuICAgIFxuICAgIC8vIFNpIGVsIGVsZW1lbnRvIHRlbsOtYSB1bmEgcG9zaWNpw7NuIG9yaWdpbmFsIHbDoWxpZGEsIGludGVudGFyIHJlc3RhdXJhcmxhXG4gICAgLy8gU2kgbm8sIGNvbG9jYXIgYSBsYSBkZXJlY2hhIGRlbCBwYW5lbFxuICAgIGNvbnN0IG5ld1Bvc2l0aW9uID0gb3JpZ2luYWxQb3NpdGlvbi54ID4gMCAmJiBvcmlnaW5hbFBvc2l0aW9uLnkgPiAwXG4gICAgICA/IG9yaWdpbmFsUG9zaXRpb24gLy8gUmVzdGF1cmFyIHBvc2ljacOzbiBvcmlnaW5hbFxuICAgICAgOiB7XG4gICAgICAgICAgeDogcGFyZW50WCArIHBhcmVudFdpZHRoICsgMjAsIC8vIEEgbGEgZGVyZWNoYSBkZWwgcGFuZWwgY29uIDIwcHggZGUgbWFyZ2VuXG4gICAgICAgICAgeTogcGFyZW50WSArIDUwLCAvLyBMaWdlcmFtZW50ZSBhYmFqbyBkZWwgcGFuZWxcbiAgICAgICAgfTtcblxuICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChmaXJlc3RvcmUpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBwYXJlbnRcbiAgICBiYXRjaC51cGRhdGUocGFyZW50RG9jUmVmLCB7IFxuICAgICAgY29udGVudDogeyAuLi5wYXJlbnRDb250ZW50LCBlbGVtZW50SWRzOiBuZXdFbGVtZW50SWRzIH0sXG4gICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjaGlsZCAtIHJlc3RhdXJhciBwcm9waWVkYWRlcyBjb21wbGV0YXMgeSBhc2VndXJhciB2aXNpYmlsaWRhZFxuICAgIGNvbnN0IHNhZmVQcm9wZXJ0aWVzID0gZWxlbWVudFByb3BzIHx8IHt9O1xuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdHlwZW9mIGVsZW1lbnQud2lkdGggPT09ICdudW1iZXInICYmIHR5cGVvZiBlbGVtZW50LmhlaWdodCA9PT0gJ251bWJlcidcbiAgICAgID8geyB3aWR0aDogZWxlbWVudC53aWR0aCwgaGVpZ2h0OiBlbGVtZW50LmhlaWdodCB9XG4gICAgICA6IChzYWZlUHJvcGVydGllcy5zaXplIHx8IHsgd2lkdGg6IDIwMCwgaGVpZ2h0OiAxNTAgfSk7XG4gICAgXG4gICAgYmF0Y2gudXBkYXRlKGVsZW1lbnREb2NSZWYsIHtcbiAgICAgICAgcGFyZW50SWQ6IG51bGwsXG4gICAgICAgIGhpZGRlbjogZmFsc2UsXG4gICAgICAgIHg6IG5ld1Bvc2l0aW9uLngsXG4gICAgICAgIHk6IG5ld1Bvc2l0aW9uLnksXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAuLi5zYWZlUHJvcGVydGllcyxcbiAgICAgICAgICBwb3NpdGlvbjogbmV3UG9zaXRpb24sXG4gICAgICAgICAgc2l6ZTogZWxlbWVudFNpemUsXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG4gICAgICB0b2FzdCh7IFxuICAgICAgICB0aXRsZTogXCJFbGVtZW50byBkZXNhbmNsYWRvXCIsIFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJFbCBlbGVtZW50byBoYSBzaWRvIGRldnVlbHRvIGFsIGxpZW56by5cIiBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBkZXNhbmNsYXIgZWxlbWVudG86JywgZXJyb3IpO1xuICAgICAgdG9hc3QoeyBcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgdGl0bGU6IFwiRXJyb3JcIiwgXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIk5vIHNlIHB1ZG8gZGVzYW5jbGFyIGVsIGVsZW1lbnRvLlwiIFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbZmlyZXN0b3JlLCB1c2VyLCBib2FyZElkLCB0b2FzdF0pO1xuXG4gIHJldHVybiB7IGFkZEVsZW1lbnQsIHVwZGF0ZUVsZW1lbnQsIGRlbGV0ZUVsZW1lbnQsIHVuYW5jaG9yRWxlbWVudCB9O1xufVxuIl0sIm5hbWVzIjpbInVzZUNhbGxiYWNrIiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlRmlyZXN0b3JlIiwidXNlVXNlciIsImNvbGxlY3Rpb24iLCJkb2MiLCJ1cGRhdGVEb2MiLCJzZXJ2ZXJUaW1lc3RhbXAiLCJ3cml0ZUJhdGNoIiwiYWRkRG9jIiwiZ2V0RG9jIiwidXNlVG9hc3QiLCJ1c2VFbGVtZW50TWFuYWdlciIsImJvYXJkSWQiLCJnZXRWaWV3cG9ydENlbnRlciIsImdldE5leHRaSW5kZXgiLCJmaXJlc3RvcmUiLCJ1c2VyIiwidG9hc3QiLCJnZXRWaWV3cG9ydENlbnRlclJlZiIsImdldE5leHRaSW5kZXhSZWYiLCJjdXJyZW50IiwiYWRkRWxlbWVudCIsInR5cGUiLCJwcm9wcyIsImVycm9yTXNnIiwiUHJvbWlzZSIsInJlamVjdCIsIkVycm9yIiwiZWxlbWVudHNSZWYiLCJ1aWQiLCJkb2NSZWYiLCJ1c2VySWQiLCJwcm9wZXJ0aWVzIiwiY29udGVudCIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsImlkIiwiZGVmYXVsdFBvc2l0aW9uIiwiekluZGV4Iiwidmlld3BvcnRDZW50ZXIiLCJwb3NpdGlvbiIsImJhc2VTaXplIiwic2l6ZSIsIndpZHRoIiwiaGVpZ2h0Iiwic2l6ZVdpZHRoIiwic2l6ZUhlaWdodCIsImdldENlbnRlcmVkUG9zaXRpb24iLCJjZW50ZXJYIiwieCIsImNlbnRlclkiLCJ5IiwibWluT2Zmc2V0Iiwidmlld3BvcnRXaWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ2aWV3cG9ydEhlaWdodCIsImlubmVySGVpZ2h0IiwiTWF0aCIsIm1heCIsIm1pbiIsImJhc2VQcm9wZXJ0aWVzIiwicm90YXRpb24iLCJPYmplY3QiLCJhc3NpZ24iLCJuZXdFbGVtZW50RGF0YSIsIm5vdGVwYWRTaXplIiwibm90ZXBhZFBvcyIsImZvcm1hdCIsInRpdGxlIiwicGFnZXMiLCJBcnJheSIsImZpbGwiLCJjdXJyZW50UGFnZSIsIm5vdGVwYWRTaW1wbGVTaXplIiwibm90ZXBhZFNpbXBsZVBvcyIsInRleHQiLCJzdXBlck5vdGVib29rU2l6ZSIsInN1cGVyTm90ZWJvb2tQb3MiLCJzdGlja3lDb2xvciIsImNvbG9yIiwic3RpY2t5U2l6ZSIsInN0aWNreVBvcyIsInN0aWNreUVsZW1lbnQiLCJ0YWdzIiwidG9kb1NpemUiLCJ0b2RvUG9zIiwiaXRlbXMiLCJpbWFnZVBvcyIsInRleHRQb3MiLCJ0ZXh0QmdDb2xvciIsImJhY2tncm91bmRDb2xvciIsImRlZmF1bHRDb250YWluZXJTaXplIiwiY29udGFpbmVyU2l6ZSIsImNvbnRhaW5lckNvbnRlbnQiLCJpc1NwZWNpYWxMaWVuem8iLCJmaW5hbENvbnRhaW5lclNpemUiLCJyb3VuZCIsImNvbnRhaW5lclBvcyIsImNvbnRhaW5lckJhY2tncm91bmRDb2xvciIsImNvbnRhaW5lclpJbmRleCIsImZpbmFsQ29udGFpbmVyQ29udGVudCIsImVsZW1lbnRJZHMiLCJsYXlvdXQiLCJjb21tZW50U2l6ZSIsImNvbW1lbnRQb3MiLCJsYWJlbCIsImNvbW1lbnQiLCJwYXJlbnRJZCIsInVuZGVmaW5lZCIsIm1vb2Rib2FyZFNpemUiLCJtb29kYm9hcmRQb3MiLCJpbWFnZXMiLCJhbm5vdGF0aW9ucyIsInRhYmJlZFNpemUiLCJ0YWJiZWRQb3MiLCJ0YWJzIiwiYWN0aXZlVGFiSWQiLCJhY2NvcmRpb25TaXplIiwiYWNjb3JkaW9uUG9zIiwic3RvcHdhdGNoU2l6ZSIsInN0b3B3YXRjaFBvcyIsInRpbWUiLCJpc1J1bm5pbmciLCJjb3VudGRvd25TaXplIiwiY291bnRkb3duUG9zIiwidGltZUxlZnQiLCJzZWxlY3RlZE1pbnV0ZXMiLCJoaWdobGlnaHRTaXplIiwiaGlnaGxpZ2h0UG9zIiwiaGlnaGxpZ2h0Q29sb3IiLCJ5ZWxsb3dOb3RlcGFkU2l6ZSIsInllbGxvd05vdGVwYWRQb3MiLCJzZWFyY2hRdWVyeSIsInVwZGF0ZUVsZW1lbnQiLCJ1cGRhdGVzIiwiZWxlbWVudERvY1JlZiIsImNsZWFuVXBkYXRlcyIsImtleXMiLCJmb3JFYWNoIiwia2V5IiwidmFsdWUiLCJib2FyZERvY1JlZiIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiZGVsZXRlRWxlbWVudCIsImFsbEVsZW1lbnRzIiwiZWxlbWVudFRvRGVsZXRlUmVmIiwiZmluZCIsImVsIiwiYmF0Y2giLCJpc0FycmF5IiwiY2hpbGRJZCIsImNoaWxkRG9jUmVmIiwiZGVsZXRlIiwiY29tbWl0IiwidW5hbmNob3JFbGVtZW50IiwiZWxlbWVudElkIiwicGFyZW50UHJvcHMiLCJlbGVtZW50U25hcCIsImV4aXN0cyIsInZhcmlhbnQiLCJkZXNjcmlwdGlvbiIsImVsZW1lbnREYXRhIiwiZGF0YSIsImVsZW1lbnQiLCJwYXJlbnREb2NSZWYiLCJwYXJlbnRTbmFwIiwicGFyZW50RWxlbWVudERhdGEiLCJwYXJlbnRFbGVtZW50IiwicGFyZW50Q29udGVudCIsIm5ld0VsZW1lbnRJZHMiLCJmaWx0ZXIiLCJwYXJlbnRYIiwicGFyZW50V2lkdGgiLCJwYXJzZUZsb2F0IiwiU3RyaW5nIiwicGFyZW50WSIsImVsZW1lbnRQcm9wcyIsIm9yaWdpbmFsUG9zaXRpb24iLCJuZXdQb3NpdGlvbiIsInVwZGF0ZSIsInNhZmVQcm9wZXJ0aWVzIiwiZWxlbWVudFNpemUiLCJoaWRkZW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/use-element-manager.ts\n"));

/***/ })

});