"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/board/[boardId]/page",{

/***/ "(app-pages-browser)/./src/app/board/[boardId]/page.tsx":
/*!******************************************!*\
  !*** ./src/app/board/[boardId]/page.tsx ***!
  \******************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ BoardPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=Loader2!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/loader-circle.js\");\n/* harmony import */ var _firebase_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/firebase/provider */ \"(app-pages-browser)/./src/firebase/provider.tsx\");\n/* harmony import */ var _lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/store/boardStore */ \"(app-pages-browser)/./src/lib/store/boardStore.ts\");\n/* harmony import */ var _hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/use-board-state */ \"(app-pages-browser)/./src/hooks/use-board-state.ts\");\n/* harmony import */ var _hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/hooks/use-element-manager */ \"(app-pages-browser)/./src/hooks/use-element-manager.ts\");\n/* harmony import */ var _hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/hooks/use-media-query */ \"(app-pages-browser)/./src/hooks/use-media-query.ts\");\n/* harmony import */ var _hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/hooks/use-toast */ \"(app-pages-browser)/./src/hooks/use-toast.ts\");\n/* harmony import */ var _lib_upload_helper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/lib/upload-helper */ \"(app-pages-browser)/./src/lib/upload-helper.ts\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! html2canvas */ \"(app-pages-browser)/./node_modules/html2canvas/dist/html2canvas.js\");\n/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _components_canvas_canvas__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/canvas/canvas */ \"(app-pages-browser)/./src/components/canvas/canvas.tsx\");\n/* harmony import */ var _components_canvas_tools_sidebar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/canvas/tools-sidebar */ \"(app-pages-browser)/./src/components/canvas/tools-sidebar.tsx\");\n/* harmony import */ var _components_canvas_formatting_toolbar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/components/canvas/formatting-toolbar */ \"(app-pages-browser)/./src/components/canvas/formatting-toolbar.tsx\");\n/* harmony import */ var _components_canvas_elements_add_image_from_url_dialog__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/components/canvas/elements/add-image-from-url-dialog */ \"(app-pages-browser)/./src/components/canvas/elements/add-image-from-url-dialog.tsx\");\n/* harmony import */ var _components_canvas_change_format_dialog__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/components/canvas/change-format-dialog */ \"(app-pages-browser)/./src/components/canvas/change-format-dialog.tsx\");\n/* harmony import */ var _components_canvas_elements_edit_comment_dialog__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/components/canvas/elements/edit-comment-dialog */ \"(app-pages-browser)/./src/components/canvas/elements/edit-comment-dialog.tsx\");\n/* harmony import */ var _components_canvas_element_info_panel__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/components/canvas/element-info-panel */ \"(app-pages-browser)/./src/components/canvas/element-info-panel.tsx\");\n/* harmony import */ var _components_canvas_rename_board_dialog__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @/components/canvas/rename-board-dialog */ \"(app-pages-browser)/./src/components/canvas/rename-board-dialog.tsx\");\n/* harmony import */ var _hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @/hooks/use-dictation */ \"(app-pages-browser)/./src/hooks/use-dictation.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n// Hooks y Contextos\n\n\n\n\n\n\n// Utilidades y Tipos\n\n\n// Componentes del Canvas\n\n\n\n// Diálogos\n\n\n\n\n\n// Hook de dictado\n\nfunction BoardPage(param) {\n    let { params } = param;\n    var _elements_find;\n    _s();\n    const { boardId } = params;\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const { user, isUserLoading: authLoading, userError } = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useUser)();\n    const storage = (0,_firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useStorage)();\n    const { toast } = (0,_hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__.useToast)();\n    const isMobile = (0,_hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__.useMediaQuery)(\"(max-width: 768px)\");\n    // DEBUG: Log inmediato al inicio del componente\n    console.log(\"\\uD83C\\uDFAF [BoardPage] Componente iniciado\", {\n        boardId,\n        hasUser: !!user,\n        userId: user === null || user === void 0 ? void 0 : user.uid,\n        isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n        authLoading,\n        pathname:  true ? window.location.pathname : 0\n    });\n    // CRÍTICO: Usar refs para funciones de Zustand y toast para evitar bucles infinitos\n    const loadBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const createBoardRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const cleanupRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const toastRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(toast);\n    // Actualizar refs cuando cambian\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        toastRef.current = toast;\n    }, [\n        toast\n    ]);\n    // DEBUG: Log cuando el componente se monta\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        console.log(\"\\uD83D\\uDE80 [BoardPage] Componente montado\", {\n            boardId\n        });\n    }, [\n        boardId\n    ]);\n    // DEBUG: Log del estado del usuario\n    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{\n        console.log(\"\\uD83D\\uDD0D [BoardPage] Estado del usuario:\", {\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            isUserLoading: authLoading,\n            userError: userError === null || userError === void 0 ? void 0 : userError.message,\n            userEmail: user === null || user === void 0 ? void 0 : user.email,\n            isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n            sessionStorage:  true ? {\n                hasRecentLogin: sessionStorage.getItem(\"hasRecentLogin\"),\n                loginTimestamp: sessionStorage.getItem(\"loginTimestamp\"),\n                redirectingToBoard: sessionStorage.getItem(\"redirectingToBoard\")\n            } : 0\n        });\n    }, [\n        user,\n        authLoading,\n        userError\n    ]);\n    // -- ESTADO GLOBAL DEL TABLERO (Zustand) --\n    const { elements, board, loadBoard, createBoard, updateElement, deleteElement, selectedElementIds, setSelectedElementIds, isLoading: isBoardLoading, error, cleanup } = (0,_lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__.useBoardStore)();\n    // CRÍTICO: Actualizar refs cuando las funciones de Zustand cambian\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        loadBoardRef.current = loadBoard;\n        createBoardRef.current = createBoard;\n        cleanupRef.current = cleanup;\n    }, [\n        loadBoard,\n        createBoard,\n        cleanup\n    ]);\n    // -- ESTADO LOCAL Y HOOKS --\n    // CRÍTICO: useBoardState crea listeners DUPLICADOS de Firebase para elements\n    // Solo usar para boards, handleRenameBoard, handleDeleteBoard, clearCanvas\n    // NO usar elements de useBoardState - usar solo de useBoardStore\n    const { boards, handleRenameBoard, handleDeleteBoard, clearCanvas } = (0,_hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__.useBoardState)(boardId);\n    const canvasRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // Wrapper functions para coincidir con los tipos esperados\n    const handleRenameBoardWrapper = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setIsRenameBoardDialogOpen(true);\n    }, []);\n    const handleSaveRenameBoard = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((newName)=>{\n        handleRenameBoard(newName);\n        setIsRenameBoardDialogOpen(false);\n    }, [\n        handleRenameBoard\n    ]);\n    const clearCanvasWrapper = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        clearCanvas(elements);\n    }, [\n        elements,\n        clearCanvas\n    ]);\n    // Estados de UI\n    const [isFormatToolbarOpen, setIsFormatToolbarOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [isImageUrlDialogOpen, setIsImageUrlDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [changeFormatDialogOpen, setChangeFormatDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isPanningActive, setIsPanningActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isRenameBoardDialogOpen, setIsRenameBoardDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Estados de Selección y Edición\n    const [selectedElement, setSelectedElement] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [activatedElementId, setActivatedElementId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [selectedNotepadForFormat, setSelectedNotepadForFormat] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isDirty, setIsDirty] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isEditCommentDialogOpen, setIsEditCommentDialogOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedCommentForEdit, setSelectedCommentForEdit] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    // Ref para almacenar zIndex original de elementos cuando se editan\n    const originalZIndexRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    // Panel de información del elemento (Opción 4: Combinación Panel + Consola)\n    const [isInfoPanelVisible, setIsInfoPanelVisible] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false); // Oculto por defecto, se muestra al seleccionar elemento\n    // -- DICTADO DE VOZ --\n    // Hook de dictado simplificado según Readme 18 Nov\n    const { isSupported: isDictationSupported, isListening: isDictationListening, transcript, finalTranscript, interimTranscript, permissionError, toggle: toggleDictation } = (0,_hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__.useDictation)();\n    // liveTranscript combina finalTranscript + interimTranscript para mostrar en tiempo real\n    const liveTranscript = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        // Combinar texto final acumulado con texto provisional\n        const final = finalTranscript || \"\";\n        const interim = interimTranscript || \"\";\n        // Si hay texto provisional, agregarlo al final del texto final\n        if (interim.trim()) {\n            return final + (final ? \" \" : \"\") + interim;\n        }\n        return final;\n    }, [\n        finalTranscript,\n        interimTranscript\n    ]);\n    const handleToggleDictation = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            await toggleDictation();\n        } catch (error) {\n            console.error(\"Error al alternar dictado:\", error);\n        }\n    }, [\n        toggleDictation\n    ]);\n    // Mostrar error de permisos al usuario\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (permissionError) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error de Permisos\",\n                description: permissionError,\n                duration: 5000\n            });\n        }\n    }, [\n        permissionError,\n        toast\n    ]);\n    // -- GESTIÓN DE ELEMENTOS --\n    const getViewportCenter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (canvasRef.current) {\n            const center = canvasRef.current.getViewportCenter();\n            // CRÍTICO: Asegurar que cuando el scroll está en 0,0, los elementos se creen cerca del origen\n            // El viewport center debe ser relativo a la posición visible, no absoluta\n            return center;\n        }\n        // Fallback: retornar centro del viewport visible (no absoluto)\n        if (true) {\n            return {\n                x: window.innerWidth / 2,\n                y: window.innerHeight / 2\n            };\n        }\n        return {\n            x: 40000,\n            y: 40000\n        }; // Fallback para SSR\n    }, []);\n    // CRÍTICO: Usar ref para elements para evitar recreación de función\n    const elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(elements);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        elementsRef.current = elements;\n    }, [\n        elements\n    ]);\n    const getNextZIndex = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const currentElements = elementsRef.current;\n        if (!currentElements || currentElements.length === 0) return 1;\n        const zIndexes = currentElements.filter((e)=>typeof e.zIndex === \"number\").map((e)=>e.zIndex);\n        return zIndexes.length > 0 ? Math.max(...zIndexes) + 1 : 2;\n    }, []); // ✅ Sin dependencias - usa ref\n    const { addElement } = (0,_hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__.useElementManager)(boardId, getViewportCenter, getNextZIndex);\n    // -- EFECTOS --\n    // Sincronizar selección\n    // CRÍTICO: Optimizado para evitar re-renders constantes y bucles infinitos\n    const selectedElementId = selectedElementIds.length === 1 ? selectedElementIds[0] : null;\n    const foundElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(()=>{\n        if (!selectedElementId || !elements || elements.length === 0) return null;\n        return elements.find((el)=>el.id === selectedElementId) || null;\n    }, [\n        selectedElementId,\n        elements.length,\n        selectedElementId ? (_elements_find = elements.find((e)=>e.id === selectedElementId)) === null || _elements_find === void 0 ? void 0 : _elements_find.updatedAt : null\n    ]); // ✅ Depender de length y updatedAt, no del array completo\n    // CRÍTICO: Solo actualizar si el ID realmente cambió (evitar bucles infinitos)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        var _foundElement_id;\n        const foundId = (_foundElement_id = foundElement === null || foundElement === void 0 ? void 0 : foundElement.id) !== null && _foundElement_id !== void 0 ? _foundElement_id : null;\n        var _selectedElement_id;\n        const currentId = (_selectedElement_id = selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id) !== null && _selectedElement_id !== void 0 ? _selectedElement_id : null;\n        if (foundId !== currentId) {\n            setSelectedElement(foundElement);\n        }\n    }, [\n        foundElement === null || foundElement === void 0 ? void 0 : foundElement.id,\n        selectedElement === null || selectedElement === void 0 ? void 0 : selectedElement.id\n    ]); // ✅ Depender solo de IDs, no de objetos completos\n    // -- LOGGING EN CONSOLA cuando se selecciona un elemento --\n    // OPTIMIZADO: Solo loggear en desarrollo y con información esencial\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (selectedElement) {\n            // Mostrar panel automáticamente cuando se selecciona un elemento\n            setIsInfoPanelVisible(true);\n            // Solo loggear en desarrollo y de forma optimizada\n            if (true) {\n                var _selectedElement_properties_position, _selectedElement_properties, _selectedElement_properties_position1, _selectedElement_properties1, _selectedElement_properties_size, _selectedElement_properties2, _selectedElement_properties_size1, _selectedElement_properties3;\n                console.log(\"\\uD83D\\uDCCB Elemento seleccionado:\", {\n                    id: selectedElement.id,\n                    type: selectedElement.type,\n                    position: {\n                        x: ((_selectedElement_properties = selectedElement.properties) === null || _selectedElement_properties === void 0 ? void 0 : (_selectedElement_properties_position = _selectedElement_properties.position) === null || _selectedElement_properties_position === void 0 ? void 0 : _selectedElement_properties_position.x) || selectedElement.x || 0,\n                        y: ((_selectedElement_properties1 = selectedElement.properties) === null || _selectedElement_properties1 === void 0 ? void 0 : (_selectedElement_properties_position1 = _selectedElement_properties1.position) === null || _selectedElement_properties_position1 === void 0 ? void 0 : _selectedElement_properties_position1.y) || selectedElement.y || 0\n                    },\n                    size: {\n                        width: ((_selectedElement_properties2 = selectedElement.properties) === null || _selectedElement_properties2 === void 0 ? void 0 : (_selectedElement_properties_size = _selectedElement_properties2.size) === null || _selectedElement_properties_size === void 0 ? void 0 : _selectedElement_properties_size.width) || selectedElement.width || 0,\n                        height: ((_selectedElement_properties3 = selectedElement.properties) === null || _selectedElement_properties3 === void 0 ? void 0 : (_selectedElement_properties_size1 = _selectedElement_properties3.size) === null || _selectedElement_properties_size1 === void 0 ? void 0 : _selectedElement_properties_size1.height) || selectedElement.height || 0\n                    },\n                    zIndex: selectedElement.zIndex,\n                    parentId: selectedElement.parentId\n                });\n                // Log completo solo si está habilitado el debug\n                if (window.DEBUG_ELEMENTS) {\n                    console.log(\"Elemento completo:\", selectedElement);\n                }\n            }\n        } else {\n            // Ocultar panel cuando no hay elemento seleccionado\n            setIsInfoPanelVisible(false);\n        }\n    }, [\n        selectedElement\n    ]);\n    // -- ATAJO DE TECLADO: Ctrl+Shift+D para mostrar/ocultar panel --\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleKeyDown = (e)=>{\n            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === \"D\") {\n                e.preventDefault();\n                setIsInfoPanelVisible((prev)=>!prev);\n            }\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return ()=>window.removeEventListener(\"keydown\", handleKeyDown);\n    }, []);\n    // CRÍTICO: REFS para prevenir múltiples ejecuciones\n    const hasLoadedRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const isLoadingRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const waitTimerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const currentBoardIdRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    // CONSOLIDADO: Un solo useEffect para login y carga de tablero\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (false) {}\n        console.log(\"\\uD83D\\uDD04 [BoardPage] useEffect ejecutado\", {\n            boardId,\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n            authLoading,\n            isLoading: isLoadingRef.current,\n            hasLoaded: hasLoadedRef.current,\n            currentBoardId: currentBoardIdRef.current\n        });\n        // Resetear flags si cambió boardId\n        if (currentBoardIdRef.current !== boardId) {\n            console.log(\"\\uD83D\\uDD04 [BoardPage] BoardId cambi\\xf3, reseteando flags\", {\n                old: currentBoardIdRef.current,\n                new: boardId\n            });\n            hasLoadedRef.current = false;\n            isLoadingRef.current = false;\n            currentBoardIdRef.current = boardId;\n        }\n        // Prevenir múltiples ejecuciones\n        if (isLoadingRef.current || authLoading) {\n            console.log(\"⏸️ [BoardPage] Saltando ejecuci\\xf3n (ya cargando o auth cargando)\", {\n                isLoading: isLoadingRef.current,\n                authLoading\n            });\n            return;\n        }\n        // Limpiar timer anterior\n        if (waitTimerRef.current) {\n            clearTimeout(waitTimerRef.current);\n            waitTimerRef.current = null;\n        }\n        // Verificar login reciente (solo en cliente)\n        const hasRecentLogin =  true ? sessionStorage.getItem(\"hasRecentLogin\") === \"true\" : 0;\n        const loginTimestamp =  true ? sessionStorage.getItem(\"loginTimestamp\") : 0;\n        const redirectingToBoard =  true ? sessionStorage.getItem(\"redirectingToBoard\") : 0;\n        const anonymousUserId =  true ? sessionStorage.getItem(\"anonymousUserId\") : 0;\n        // CRÍTICO: Aumentar tiempo de espera a 2 minutos para dar tiempo a Firebase Auth de inicializar\n        const isLoginRecent = hasRecentLogin && loginTimestamp && Date.now() - parseInt(loginTimestamp) < 120000;\n        console.log(\"\\uD83D\\uDD0D [BoardPage] Estado de autenticaci\\xf3n:\", {\n            hasUser: !!user,\n            userId: user === null || user === void 0 ? void 0 : user.uid,\n            hasRecentLogin,\n            loginTimestamp,\n            redirectingToBoard,\n            boardId,\n            isLoginRecent,\n            anonymousUserId,\n            timeSinceLogin: loginTimestamp ? Date.now() - parseInt(loginTimestamp) : null\n        });\n        // Redirigir si no hay usuario y no hay login reciente\n        if (!user && !isLoginRecent) {\n            console.log(\"⚠️ [BoardPage] No hay usuario ni login reciente, redirigiendo a inicio...\");\n            if (true) {\n                sessionStorage.clear();\n                localStorage.clear();\n                window.location.replace(\"/\");\n            }\n            return;\n        }\n        // Esperar si hay login reciente pero no usuario (CRÍTICO para usuarios anónimos después de redirect)\n        if (isLoginRecent && !user) {\n            // CRÍTICO: Aumentar tiempo de espera - Firebase Auth puede tardar en inicializar después de redirect\n            const waitTime = redirectingToBoard === boardId ? 60000 : 30000; // 60s si es el tablero correcto, 30s si no\n            console.log(\"⏳ [BoardPage] Esperando usuario despu\\xe9s de login reciente...\", {\n                waitTime,\n                redirectingToBoard,\n                boardId,\n                hasRecentLogin,\n                loginTimestamp,\n                anonymousUserId,\n                timeSinceLogin: loginTimestamp ? Date.now() - parseInt(loginTimestamp) : null\n            });\n            waitTimerRef.current = setTimeout(()=>{\n                if (!user && \"object\" !== \"undefined\") {\n                    console.log(\"⚠️ [BoardPage] Timeout: Usuario no disponible despu\\xe9s de esperar, redirigiendo...\");\n                    // CRÍTICO: No limpiar sessionStorage completamente - puede haber información útil\n                    // Solo limpiar flags de login, mantener anonymousUserId si existe\n                    sessionStorage.removeItem(\"hasRecentLogin\");\n                    sessionStorage.removeItem(\"loginTimestamp\");\n                    sessionStorage.removeItem(\"redirectingToBoard\");\n                    window.location.replace(\"/\");\n                }\n            }, waitTime);\n            return;\n        }\n        // Cargar/crear tablero (SOLO UNA VEZ)\n        if ((user === null || user === void 0 ? void 0 : user.uid) && !hasLoadedRef.current && loadBoardRef.current && createBoardRef.current) {\n            console.log(\"✅ [BoardPage] Usuario disponible, cargando/creando tablero\", {\n                userId: user.uid,\n                boardId,\n                isAnonymous: user.isAnonymous\n            });\n            hasLoadedRef.current = true;\n            isLoadingRef.current = true;\n            const userId = user.uid;\n            if (boardId === \"new\") {\n                createBoardRef.current(userId).then((newBoardId)=>{\n                    isLoadingRef.current = false;\n                    if (newBoardId && \"object\" !== \"undefined\") {\n                        sessionStorage.setItem(\"hasRecentLogin\", \"true\");\n                        sessionStorage.setItem(\"loginTimestamp\", Date.now().toString());\n                        window.location.href = \"/board/\".concat(newBoardId);\n                    } else {\n                        hasLoadedRef.current = false;\n                    }\n                }).catch((error)=>{\n                    isLoadingRef.current = false;\n                    hasLoadedRef.current = false;\n                    console.error(\"❌ Error al crear tablero:\", error);\n                });\n            } else {\n                loadBoardRef.current(boardId, userId).then((loadedBoardId)=>{\n                    isLoadingRef.current = false;\n                    if (loadedBoardId && \"object\" !== \"undefined\") {\n                        setTimeout(()=>{\n                            sessionStorage.removeItem(\"hasRecentLogin\");\n                            sessionStorage.removeItem(\"loginTimestamp\");\n                            sessionStorage.removeItem(\"redirectingToBoard\");\n                        }, 2000);\n                    } else {\n                        hasLoadedRef.current = false;\n                    }\n                }).catch((error)=>{\n                    isLoadingRef.current = false;\n                    hasLoadedRef.current = false;\n                    console.error(\"❌ Error al cargar tablero:\", error);\n                });\n            }\n        }\n        // Cleanup\n        return ()=>{\n            if (waitTimerRef.current) {\n                clearTimeout(waitTimerRef.current);\n                waitTimerRef.current = null;\n            }\n            if (cleanupRef.current) {\n                cleanupRef.current();\n            }\n        };\n    }, [\n        boardId,\n        user,\n        authLoading\n    ]);\n    // -- HANDLERS DE ACCIÓN --\n    const handleSelectElement = (elementId, isMultiSelect)=>{\n        if (elementId === null) setSelectedElementIds([]);\n        else setSelectedElementIds([\n            elementId\n        ]);\n    };\n    const handleUploadImage = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        if (!(user === null || user === void 0 ? void 0 : user.uid)) {\n            toast({\n                title: \"Error\",\n                description: \"Debes iniciar sesi\\xf3n\"\n            });\n            return;\n        }\n        const userId = user.uid; // Guardar en variable local\n        const input = document.createElement(\"input\");\n        input.type = \"file\";\n        input.accept = \"image/*\";\n        input.onchange = async (e)=>{\n            var _e_target_files;\n            const file = (_e_target_files = e.target.files) === null || _e_target_files === void 0 ? void 0 : _e_target_files[0];\n            if (!file) return;\n            try {\n                const uploadResult = await (0,_lib_upload_helper__WEBPACK_IMPORTED_MODULE_9__.uploadFile)(file, userId, storage);\n                if (uploadResult.url) {\n                    await addElement(\"image\", {\n                        content: {\n                            url: uploadResult.url\n                        },\n                        properties: {\n                            size: {\n                                width: 300,\n                                height: 200\n                            }\n                        }\n                    });\n                    toast({\n                        title: \"Imagen subida\"\n                    });\n                }\n            } catch (error) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error al subir imagen\"\n                });\n            }\n        };\n        input.click();\n    }, [\n        user,\n        storage,\n        addElement,\n        toast\n    ]);\n    const handleFormatToggle = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>setIsFormatToolbarOpen((prev)=>!prev), []);\n    // Handler para agregar marcador/localizador desde el menú formato\n    const handleAddMarker = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        const viewportCenter = getViewportCenter();\n        try {\n            await addElement(\"comment\", {\n                content: {\n                    title: \"Nuevo Localizador\",\n                    label: \"Localizador\",\n                    text: \"\"\n                },\n                properties: {\n                    position: viewportCenter,\n                    size: {\n                        width: 48,\n                        height: 48\n                    }\n                }\n            });\n            toast({\n                title: \"Localizador creado\",\n                description: \"Se ha marcado una nueva ubicaci\\xf3n en el tablero. Edita el nombre para identificarlo.\"\n            });\n        } catch (error) {\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: error.message || \"No se pudo crear el localizador.\"\n            });\n        }\n    }, [\n        getViewportCenter,\n        addElement,\n        toast\n    ]);\n    const handleLocateElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (element && canvasRef.current) {\n            handleSelectElement(id, false);\n            canvasRef.current.centerOnElement(element);\n        }\n    }, [\n        elements\n    ]);\n    const handleOpenNotepad = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (!element) return;\n        updateElement(id, {\n            hidden: false\n        });\n        handleSelectElement(id, false);\n        if (canvasRef.current) canvasRef.current.centerOnElement(element);\n    }, [\n        elements,\n        updateElement\n    ]);\n    const handleChangeNotepadFormat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id)=>{\n        const element = elements.find((el)=>el.id === id);\n        if (element) {\n            setSelectedNotepadForFormat(element);\n            setChangeFormatDialogOpen(true);\n        }\n    }, [\n        elements\n    ]);\n    const handleSaveFormat = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((id, format)=>{\n        // FIX: Corregir dimensiones - 10x15 significa 10cm ancho x 15cm alto (no 21 alto x 15 ancho)\n        // 10cm = ~378px, 15cm = ~567px (a 96 DPI)\n        const newSize = format === \"letter\" ? {\n            width: 794,\n            height: 1021\n        } // Carta: 8.5\" x 11\"\n         : {\n            width: 378,\n            height: 567\n        }; // 10x15: 10cm ancho x 15cm alto (CORREGIDO)\n        updateElement(id, {\n            width: newSize.width,\n            height: newSize.height,\n            properties: {\n                ...selectedNotepadForFormat === null || selectedNotepadForFormat === void 0 ? void 0 : selectedNotepadForFormat.properties,\n                format,\n                size: newSize\n            }\n        });\n        setChangeFormatDialogOpen(false);\n    }, [\n        selectedNotepadForFormat,\n        updateElement\n    ]);\n    const handleEditComment = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((comment)=>{\n        setSelectedCommentForEdit(comment);\n        setIsEditCommentDialogOpen(true);\n    }, []);\n    // REGLAS Z-INDEX: Cuando se hace click en un elemento, pasa al frente para editarlo\n    // Cuadernos y lienzo siempre están en primera capa (zIndex base alto)\n    // Después de editar, el elemento vuelve a su posición original\n    const handleEditElement = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((elementId)=>{\n        const element = elements.find((el)=>el.id === elementId);\n        if (!element) return;\n        // Tipos que siempre deben estar en primera capa (después del tablero)\n        const firstLayerTypes = [\n            \"notepad\",\n            \"notepad-simple\",\n            \"test-notepad\",\n            \"tabbed-notepad\",\n            \"yellow-notepad\"\n        ];\n        const isFirstLayer = firstLayerTypes.includes(element.type);\n        // Obtener zIndex actual\n        const elementProps = typeof element.properties === \"object\" && element.properties !== null ? element.properties : {};\n        var _elementProps_zIndex, _ref;\n        const currentZIndex = (_ref = (_elementProps_zIndex = elementProps.zIndex) !== null && _elementProps_zIndex !== void 0 ? _elementProps_zIndex : element.zIndex) !== null && _ref !== void 0 ? _ref : 1;\n        // Guardar zIndex original si no está guardado\n        if (!originalZIndexRef.current.has(elementId)) {\n            originalZIndexRef.current.set(elementId, currentZIndex);\n        }\n        // Calcular nuevo zIndex: traer al frente temporalmente\n        const maxZIndex = getNextZIndex();\n        const newZIndex = isFirstLayer ? Math.max(maxZIndex - 100, 1000) // Primera capa: mínimo 1000\n         : maxZIndex; // Otros elementos: máximo disponible\n        // Actualizar zIndex para traer al frente\n        updateElement(elementId, {\n            properties: {\n                ...elementProps,\n                zIndex: newZIndex\n            }\n        });\n        // Activar elemento para edición\n        setActivatedElementId(elementId);\n        // Centrar vista en el elemento si está disponible\n        if (canvasRef.current) {\n            canvasRef.current.centerOnElement(element);\n        }\n    }, [\n        elements,\n        getNextZIndex,\n        updateElement\n    ]);\n    // Restaurar zIndex original cuando se deselecciona un elemento\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!activatedElementId && originalZIndexRef.current.size > 0) {\n            // Restaurar zIndex original de todos los elementos editados\n            originalZIndexRef.current.forEach((originalZIndex, elementId)=>{\n                const element = elements.find((el)=>el.id === elementId);\n                if (element) {\n                    const elementProps = typeof element.properties === \"object\" && element.properties !== null ? element.properties : {};\n                    var _elementProps_zIndex, _ref;\n                    const currentZIndex = (_ref = (_elementProps_zIndex = elementProps.zIndex) !== null && _elementProps_zIndex !== void 0 ? _elementProps_zIndex : element.zIndex) !== null && _ref !== void 0 ? _ref : 1;\n                    // Solo restaurar si el zIndex actual es diferente al original\n                    if (currentZIndex !== originalZIndex) {\n                        updateElement(elementId, {\n                            properties: {\n                                ...elementProps,\n                                zIndex: originalZIndex\n                            }\n                        });\n                    }\n                }\n            });\n            // Limpiar el mapa después de restaurar\n            originalZIndexRef.current.clear();\n        }\n    }, [\n        activatedElementId,\n        elements,\n        updateElement\n    ]);\n    // Función para exportar el tablero completo a PNG de alta resolución\n    const handleExportBoardToPng = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{\n        try {\n            if (!canvasRef.current) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error\",\n                    description: \"No se pudo acceder al lienzo.\"\n                });\n                return;\n            }\n            // Obtener el contenedor del canvas\n            const canvasContainer = canvasRef.current.getCanvasContainer();\n            if (!canvasContainer) {\n                toast({\n                    variant: \"destructive\",\n                    title: \"Error\",\n                    description: \"No se pudo encontrar el contenedor del lienzo.\"\n                });\n                return;\n            }\n            toast({\n                title: \"Exportando...\",\n                description: \"Generando imagen PNG de alta resoluci\\xf3n del tablero completo. Esto puede tardar unos segundos...\"\n            });\n            // Ocultar elementos de UI temporalmente para la exportación\n            document.body.classList.add(\"exporting-to-png\");\n            // Capturar SOLO el área visible del usuario (viewport) - Usar misma lógica de alta resolución que cuadernos\n            const scrollLeft = canvasContainer.scrollLeft;\n            const scrollTop = canvasContainer.scrollTop;\n            const viewportWidth = canvasContainer.clientWidth;\n            const viewportHeight = canvasContainer.clientHeight;\n            const scale = 3; // Alta resolución (misma que cuadernos) - captando todos los detalles\n            // Obtener el rectángulo del contenedor para calcular la posición relativa\n            const containerRect = canvasContainer.getBoundingClientRect();\n            const canvas = await html2canvas__WEBPACK_IMPORTED_MODULE_10___default()(canvasContainer, {\n                backgroundColor: \"#96e4e6\",\n                scale: scale,\n                useCORS: true,\n                logging: false,\n                allowTaint: false,\n                scrollX: -scrollLeft,\n                scrollY: -scrollTop,\n                width: viewportWidth,\n                height: viewportHeight,\n                windowWidth: viewportWidth,\n                windowHeight: viewportHeight,\n                x: containerRect.left + scrollLeft,\n                y: containerRect.top + scrollTop\n            });\n            // Restaurar elementos de UI\n            document.body.classList.remove(\"exporting-to-png\");\n            // Convertir canvas a blob y descargar\n            canvas.toBlob((blob)=>{\n                if (!blob) {\n                    toast({\n                        variant: \"destructive\",\n                        title: \"Error\",\n                        description: \"No se pudo generar la imagen.\"\n                    });\n                    return;\n                }\n                // Crear URL temporal y descargar\n                const url = URL.createObjectURL(blob);\n                const link = document.createElement(\"a\");\n                link.href = url;\n                const boardName = (board === null || board === void 0 ? void 0 : board.name) || \"tablero\";\n                link.download = \"\".concat(boardName, \"_\").concat(Date.now(), \".png\");\n                document.body.appendChild(link);\n                link.click();\n                document.body.removeChild(link);\n                URL.revokeObjectURL(url);\n                // Mostrar toast de éxito\n                toast({\n                    title: \"Exportado\",\n                    description: \"El tablero se ha exportado como PNG de alta resoluci\\xf3n.\"\n                });\n            }, \"image/png\", 1.0); // Calidad máxima\n        } catch (error) {\n            document.body.classList.remove(\"exporting-to-png\");\n            console.error(\"Error al exportar tablero:\", error);\n            toast({\n                variant: \"destructive\",\n                title: \"Error\",\n                description: error.message || \"No se pudo exportar el tablero.\"\n            });\n        }\n    }, [\n        canvasRef,\n        board,\n        toast\n    ]);\n    // -- RENDER --\n    // DEBUG: Log del estado antes de cualquier return\n    console.log(\"\\uD83C\\uDFA8 [BoardPage] Render:\", {\n        boardId,\n        hasUser: !!user,\n        userId: user === null || user === void 0 ? void 0 : user.uid,\n        isAnonymous: user === null || user === void 0 ? void 0 : user.isAnonymous,\n        authLoading,\n        isBoardLoading,\n        hasBoard: !!board,\n        sessionStorage:  true ? {\n            hasRecentLogin: sessionStorage.getItem(\"hasRecentLogin\"),\n            loginTimestamp: sessionStorage.getItem(\"loginTimestamp\"),\n            redirectingToBoard: sessionStorage.getItem(\"redirectingToBoard\")\n        } : 0\n    });\n    // Mostrar loading mientras auth está cargando\n    if (authLoading) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#96e4e6\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 769,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Verificando autenticaci\\xf3n...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 770,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 768,\n            columnNumber: 7\n        }, this);\n    }\n    // Si no hay usuario después de cargar, verificar login reciente antes de redirigir\n    if (!user) {\n        // Verificar si hay login reciente (para usuarios anónimos después de redirect)\n        if (true) {\n            const hasRecentLogin = sessionStorage.getItem(\"hasRecentLogin\") === \"true\";\n            const loginTimestamp = sessionStorage.getItem(\"loginTimestamp\");\n            const redirectingToBoard = sessionStorage.getItem(\"redirectingToBoard\");\n            const isLoginRecent = hasRecentLogin && loginTimestamp && Date.now() - parseInt(loginTimestamp) < 60000;\n            if (isLoginRecent) {\n                // Mostrar loading mientras esperamos que Firebase Auth restaure el usuario anónimo\n                console.log(\"⏳ [BoardPage] Render: Login reciente detectado, esperando usuario...\", {\n                    hasRecentLogin,\n                    loginTimestamp,\n                    redirectingToBoard,\n                    boardId\n                });\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex h-screen w-full flex-col items-center justify-center\",\n                    style: {\n                        backgroundColor: \"#96e4e6\"\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                            className: \"h-8 w-8 animate-spin text-slate-900\"\n                        }, void 0, false, {\n                            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                            lineNumber: 794,\n                            columnNumber: 13\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                            className: \"mt-4 text-lg font-semibold text-slate-900\",\n                            children: \"Cargando tu tablero...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                            lineNumber: 795,\n                            columnNumber: 13\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 793,\n                    columnNumber: 11\n                }, this);\n            }\n        }\n        // Si no hay login reciente, redirigir\n        console.log(\"⚠️ [BoardPage] Render: No hay usuario y no hay login reciente, redirigiendo...\");\n        if (true) {\n            sessionStorage.clear();\n            localStorage.clear();\n            window.location.replace(\"/\");\n        }\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#cae3e1\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 810,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Redirigiendo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 811,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 809,\n            columnNumber: 7\n        }, this);\n    }\n    if (isBoardLoading || boardId === \"new\") {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#75e8ce\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 819,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Cargando tu lienzo...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 820,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 818,\n            columnNumber: 7\n        }, this);\n    }\n    if (error) return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"p-10 text-red-500\",\n        children: [\n            \"Error: \",\n            error\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n        lineNumber: 825,\n        columnNumber: 21\n    }, this);\n    // Si no hay tablero pero hay usuario, mostrar loading mientras se carga\n    if (!board && user) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"flex h-screen w-full flex-col items-center justify-center\",\n            style: {\n                backgroundColor: \"#cae3e1\"\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Loader2_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                    className: \"h-8 w-8 animate-spin text-slate-900\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 831,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"mt-4 text-lg font-semibold text-slate-900\",\n                    children: \"Cargando tu tablero...\"\n                }, void 0, false, {\n                    fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                    lineNumber: 832,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n            lineNumber: 830,\n            columnNumber: 7\n        }, this);\n    }\n    // Si no hay tablero y no hay usuario, ya se manejó arriba\n    if (!board) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_rename_board_dialog__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n                isOpen: isRenameBoardDialogOpen,\n                onOpenChange: setIsRenameBoardDialogOpen,\n                currentBoardName: (board === null || board === void 0 ? void 0 : board.name) || \"Sin nombre\",\n                onSave: handleSaveRenameBoard\n            }, void 0, false, {\n                fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                lineNumber: 842,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"h-screen w-screen relative bg-[#3b3b3b] overflow-hidden\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_canvas__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n                        ref: canvasRef,\n                        elements: elements,\n                        board: board,\n                        selectedElementIds: selectedElementIds,\n                        onSelectElement: handleSelectElement,\n                        updateElement: updateElement,\n                        deleteElement: deleteElement,\n                        unanchorElement: (id)=>{\n                            const element = elements.find((el)=>el.id === id);\n                            if (element && element.parentId) {\n                                updateElement(id, {\n                                    parentId: undefined\n                                });\n                            }\n                        },\n                        addElement: addElement,\n                        // Interacciones\n                        onLocateElement: handleLocateElement,\n                        onFormatToggle: handleFormatToggle,\n                        onChangeNotepadFormat: handleChangeNotepadFormat,\n                        onEditElement: handleEditElement,\n                        // Estado\n                        selectedElement: selectedElement,\n                        activatedElementId: activatedElementId,\n                        isMobile: isMobile,\n                        setIsDirty: setIsDirty,\n                        isListening: isDictationListening,\n                        liveTranscript: liveTranscript,\n                        finalTranscript: finalTranscript,\n                        interimTranscript: interimTranscript,\n                        // Placeholders para props requeridas por Canvas antiguo\n                        onBringToFront: ()=>{},\n                        onSendToBack: ()=>{},\n                        onMoveBackward: ()=>{},\n                        onGoToHome: ()=>{\n                            var _canvasRef_current;\n                            return (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.goToHome();\n                        },\n                        onCenterView: ()=>{},\n                        onGroupElements: ()=>{},\n                        saveLastView: ()=>{},\n                        onActivateDrag: ()=>{},\n                        onEditComment: handleEditComment,\n                        onDuplicateElement: ()=>{},\n                        onUngroup: ()=>{}\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 851,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_tools_sidebar__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                        elements: elements || [],\n                        boards: boards || [],\n                        onUploadImage: handleUploadImage,\n                        onAddImageFromUrl: ()=>setIsImageUrlDialogOpen(true),\n                        onPanToggle: ()=>{\n                            var _canvasRef_current;\n                            return (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.activatePanMode();\n                        },\n                        onRenameBoard: handleRenameBoardWrapper,\n                        onDeleteBoard: handleDeleteBoard,\n                        isListening: isDictationListening,\n                        onToggleDictation: handleToggleDictation,\n                        onOpenNotepad: handleOpenNotepad,\n                        onLocateElement: handleLocateElement,\n                        addElement: addElement,\n                        clearCanvas: clearCanvasWrapper,\n                        onExportBoardToPng: handleExportBoardToPng,\n                        onFormatToggle: handleFormatToggle,\n                        isFormatToolbarOpen: isFormatToolbarOpen\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 898,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_formatting_toolbar__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n                        isOpen: isFormatToolbarOpen,\n                        onClose: ()=>setIsFormatToolbarOpen(false),\n                        elements: selectedElement ? [\n                            selectedElement\n                        ] : [],\n                        onAddComment: handleAddMarker,\n                        onEditComment: handleEditComment,\n                        isMobileSheet: isMobile,\n                        onLocateElement: handleLocateElement,\n                        onPanToggle: ()=>{\n                            var _canvasRef_current;\n                            setIsPanningActive((prev)=>!prev);\n                            (_canvasRef_current = canvasRef.current) === null || _canvasRef_current === void 0 ? void 0 : _canvasRef_current.activatePanMode();\n                        },\n                        addElement: addElement,\n                        isPanningActive: isPanningActive\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 918,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_change_format_dialog__WEBPACK_IMPORTED_MODULE_15__[\"default\"], {\n                        isOpen: changeFormatDialogOpen,\n                        onOpenChange: setChangeFormatDialogOpen,\n                        notepad: selectedNotepadForFormat,\n                        onSaveFormat: handleSaveFormat\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 935,\n                        columnNumber: 7\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_elements_add_image_from_url_dialog__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n                        isOpen: isImageUrlDialogOpen,\n                        onOpenChange: setIsImageUrlDialogOpen,\n                        onAddImage: async (url)=>{\n                            await addElement(\"image\", {\n                                content: {\n                                    url\n                                },\n                                properties: {\n                                    size: {\n                                        width: 300,\n                                        height: 200\n                                    }\n                                }\n                            });\n                            setIsImageUrlDialogOpen(false);\n                        }\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 942,\n                        columnNumber: 7\n                    }, this),\n                    selectedCommentForEdit && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_elements_edit_comment_dialog__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n                        isOpen: isEditCommentDialogOpen,\n                        onOpenChange: setIsEditCommentDialogOpen,\n                        comment: selectedCommentForEdit,\n                        onUpdate: updateElement,\n                        onDelete: deleteElement\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 954,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_canvas_element_info_panel__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n                        element: selectedElement,\n                        isVisible: isInfoPanelVisible && !!selectedElement,\n                        onClose: ()=>setIsInfoPanelVisible(false)\n                    }, void 0, false, {\n                        fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                        lineNumber: 964,\n                        columnNumber: 7\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/imacm3-pia/Downloads/canvasmind_backup (1)/src/app/board/[boardId]/page.tsx\",\n                lineNumber: 848,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n_s(BoardPage, \"zzFkk7oERMBMgcoDhUIUAZpUJa0=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter,\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useUser,\n        _firebase_provider__WEBPACK_IMPORTED_MODULE_3__.useStorage,\n        _hooks_use_toast__WEBPACK_IMPORTED_MODULE_8__.useToast,\n        _hooks_use_media_query__WEBPACK_IMPORTED_MODULE_7__.useMediaQuery,\n        _lib_store_boardStore__WEBPACK_IMPORTED_MODULE_4__.useBoardStore,\n        _hooks_use_board_state__WEBPACK_IMPORTED_MODULE_5__.useBoardState,\n        _hooks_use_dictation__WEBPACK_IMPORTED_MODULE_19__.useDictation,\n        _hooks_use_element_manager__WEBPACK_IMPORTED_MODULE_6__.useElementManager\n    ];\n});\n_c = BoardPage;\nvar _c;\n$RefreshReg$(_c, \"BoardPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYm9hcmQvW2JvYXJkSWRdL3BhZ2UudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRWlGO0FBQ3JDO0FBQ0w7QUFFdkMsb0JBQW9CO0FBQytDO0FBQ1o7QUFDQztBQUNRO0FBQ1I7QUFDWDtBQUU3QyxxQkFBcUI7QUFDNEI7QUFFWDtBQUt0Qyx5QkFBeUI7QUFDdUI7QUFDYTtBQUNVO0FBQ3ZFLFdBQVc7QUFDZ0Y7QUFDakI7QUFDTztBQUNYO0FBQ0U7QUFDeEUsa0JBQWtCO0FBQ21DO0FBUXRDLFNBQVMwQixVQUFVLEtBQTBCO1FBQTFCLEVBQUVDLE1BQU0sRUFBa0IsR0FBMUI7UUF5TTRCQzs7SUF4TTVELE1BQU0sRUFBRUMsT0FBTyxFQUFFLEdBQUdGO0lBQ3BCLE1BQU1HLFNBQVN4QiwwREFBU0E7SUFDeEIsTUFBTSxFQUFFeUIsSUFBSSxFQUFFQyxlQUFlQyxXQUFXLEVBQUVDLFNBQVMsRUFBRSxHQUFHMUIsMkRBQU9BO0lBQy9ELE1BQU0yQixVQUFVMUIsOERBQVVBO0lBQzFCLE1BQU0sRUFBRTJCLEtBQUssRUFBRSxHQUFHdEIsMERBQVFBO0lBQzFCLE1BQU11QixXQUFXeEIscUVBQWFBLENBQUM7SUFFL0IsZ0RBQWdEO0lBQ2hEeUIsUUFBUUMsR0FBRyxDQUFDLGdEQUFzQztRQUNoRFY7UUFDQVcsU0FBUyxDQUFDLENBQUNUO1FBQ1hVLE1BQU0sRUFBRVYsaUJBQUFBLDJCQUFBQSxLQUFNVyxHQUFHO1FBQ2pCQyxXQUFXLEVBQUVaLGlCQUFBQSwyQkFBQUEsS0FBTVksV0FBVztRQUM5QlY7UUFDQVcsVUFBVSxLQUFrQixHQUFjQyxPQUFPQyxRQUFRLENBQUNGLFFBQVEsR0FBRztJQUN2RTtJQUVBLG9GQUFvRjtJQUNwRixNQUFNRyxlQUFlN0MsNkNBQU1BLENBQU07SUFDakMsTUFBTThDLGlCQUFpQjlDLDZDQUFNQSxDQUFNO0lBQ25DLE1BQU0rQyxhQUFhL0Ms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QndRLFFBQVF6TTt3QkFDUjBNLGNBQWN6TTt3QkFDZDhPLFlBQVksT0FBT2hIOzRCQUNqQixNQUFNcEUsV0FBVyxTQUFTO2dDQUFFcUUsU0FBUztvQ0FBRUQ7Z0NBQUk7Z0NBQUd4RCxZQUFZO29DQUFFQyxNQUFNO3dDQUFFQyxPQUFPO3dDQUFLQyxRQUFRO29DQUFJO2dDQUFFOzRCQUFFOzRCQUNoR3pFLHdCQUF3Qjt3QkFDMUI7Ozs7OztvQkFLRGdCLHdDQUNDLDhEQUFDOUUsd0ZBQWlCQTt3QkFDaEJzUSxRQUFRMUw7d0JBQ1IyTCxjQUFjMUw7d0JBQ2RpSSxTQUFTaEk7d0JBQ1QrTixVQUFVcFE7d0JBQ1ZxUSxVQUFVcFE7Ozs7OztrQ0FLZCw4REFBQ3pDLDhFQUFnQkE7d0JBQ2ZvTSxTQUFTakk7d0JBQ1QyTyxXQUFXN04sc0JBQXNCLENBQUMsQ0FBQ2Q7d0JBQ25DbU8sU0FBUyxJQUFNcE4sc0JBQXNCOzs7Ozs7Ozs7Ozs7OztBQUs3QztHQWw2QndCL0U7O1FBRVBwQixzREFBU0E7UUFDZ0NFLHVEQUFPQTtRQUMvQ0MsMERBQVVBO1FBQ1JLLHNEQUFRQTtRQUNURCxpRUFBYUE7UUEwRDFCSCxnRUFBYUE7UUFhcURDLGlFQUFhQTtRQWdEL0VjLCtEQUFZQTtRQWtFT2IseUVBQWlCQTs7O0tBL0xsQmMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2FwcC9ib2FyZC9bYm9hcmRJZF0vcGFnZS50c3g/MTVlYiJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCc7XG5cbmltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAnbmV4dC9uYXZpZ2F0aW9uJztcbmltcG9ydCB7IExvYWRlcjIgfSBmcm9tICdsdWNpZGUtcmVhY3QnO1xuXG4vLyBIb29rcyB5IENvbnRleHRvc1xuaW1wb3J0IHsgdXNlQXV0aCwgdXNlVXNlciwgdXNlU3RvcmFnZSB9IGZyb20gJ0AvZmlyZWJhc2UvcHJvdmlkZXInO1xuaW1wb3J0IHsgdXNlQm9hcmRTdG9yZSB9IGZyb20gJ0AvbGliL3N0b3JlL2JvYXJkU3RvcmUnO1xuaW1wb3J0IHsgdXNlQm9hcmRTdGF0ZSB9IGZyb20gJ0AvaG9va3MvdXNlLWJvYXJkLXN0YXRlJztcbmltcG9ydCB7IHVzZUVsZW1lbnRNYW5hZ2VyIH0gZnJvbSAnQC9ob29rcy91c2UtZWxlbWVudC1tYW5hZ2VyJztcbmltcG9ydCB7IHVzZU1lZGlhUXVlcnkgfSBmcm9tICdAL2hvb2tzL3VzZS1tZWRpYS1xdWVyeSc7XG5pbXBvcnQgeyB1c2VUb2FzdCB9IGZyb20gJ0AvaG9va3MvdXNlLXRvYXN0JztcblxuLy8gVXRpbGlkYWRlcyB5IFRpcG9zXG5pbXBvcnQgeyB1cGxvYWRGaWxlIH0gZnJvbSAnQC9saWIvdXBsb2FkLWhlbHBlcic7XG5pbXBvcnQgeyBXaXRoSWQsIENhbnZhc0VsZW1lbnQsIEJvYXJkLCBFbGVtZW50VHlwZSwgRWxlbWVudENvbnRlbnQsIENhbnZhc0VsZW1lbnRQcm9wZXJ0aWVzIH0gZnJvbSAnQC9saWIvdHlwZXMnO1xuaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcblxuLy8gQ29tcG9uZW50ZXMgZGUgVUlcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ0AvY29tcG9uZW50cy91aS9idXR0b24nO1xuXG4vLyBDb21wb25lbnRlcyBkZWwgQ2FudmFzXG5pbXBvcnQgQ2FudmFzIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvY2FudmFzJztcbmltcG9ydCBUb29sc1NpZGViYXIgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy90b29scy1zaWRlYmFyJztcbmltcG9ydCBGb3JtYXR0aW5nVG9vbGJhciBmcm9tICdAL2NvbXBvbmVudHMvY2FudmFzL2Zvcm1hdHRpbmctdG9vbGJhcic7XG4vLyBEacOhbG9nb3NcbmltcG9ydCBBZGRJbWFnZUZyb21VcmxEaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy9lbGVtZW50cy9hZGQtaW1hZ2UtZnJvbS11cmwtZGlhbG9nJztcbmltcG9ydCBDaGFuZ2VGb3JtYXREaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy9jaGFuZ2UtZm9ybWF0LWRpYWxvZyc7XG5pbXBvcnQgRWRpdENvbW1lbnREaWFsb2cgZnJvbSAnQC9jb21wb25lbnRzL2NhbnZhcy9lbGVtZW50cy9lZGl0LWNvbW1lbnQtZGlhbG9nJztcbmltcG9ydCBFbGVtZW50SW5mb1BhbmVsIGZyb20gJ0AvY29tcG9uZW50cy9jYW52YXMvZWxlbWVudC1pbmZvLXBhbmVsJztcbmltcG9ydCBSZW5hbWVCb2FyZERpYWxvZyBmcm9tICdAL2NvbXBvbmVudHMvY2FudmFzL3JlbmFtZS1ib2FyZC1kaWFsb2cnO1xuLy8gSG9vayBkZSBkaWN0YWRvXG5pbXBvcnQgeyB1c2VEaWN0YXRpb24gfSBmcm9tICdAL2hvb2tzL3VzZS1kaWN0YXRpb24nO1xuXG5pbnRlcmZhY2UgQm9hcmRQYWdlUHJvcHMge1xuICBwYXJhbXM6IHtcbiAgICBib2FyZElkOiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEJvYXJkUGFnZSh7IHBhcmFtcyB9OiBCb2FyZFBhZ2VQcm9wcykge1xuICBjb25zdCB7IGJvYXJkSWQgfSA9IHBhcmFtcztcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IHsgdXNlciwgaXNVc2VyTG9hZGluZzogYXV0aExvYWRpbmcsIHVzZXJFcnJvciB9ID0gdXNlVXNlcigpO1xuICBjb25zdCBzdG9yYWdlID0gdXNlU3RvcmFnZSgpO1xuICBjb25zdCB7IHRvYXN0IH0gPSB1c2VUb2FzdCgpO1xuICBjb25zdCBpc01vYmlsZSA9IHVzZU1lZGlhUXVlcnkoJyhtYXgtd2lkdGg6IDc2OHB4KScpO1xuICBcbiAgLy8gREVCVUc6IExvZyBpbm1lZGlhdG8gYWwgaW5pY2lvIGRlbCBjb21wb25lbnRlXG4gIGNvbnNvbGUubG9nKCfwn46vIFtCb2FyZFBhZ2VdIENvbXBvbmVudGUgaW5pY2lhZG8nLCB7XG4gICAgYm9hcmRJZCxcbiAgICBoYXNVc2VyOiAhIXVzZXIsXG4gICAgdXNlcklkOiB1c2VyPy51aWQsXG4gICAgaXNBbm9ueW1vdXM6IHVzZXI/LmlzQW5vbnltb3VzLFxuICAgIGF1dGhMb2FkaW5nLFxuICAgIHBhdGhuYW1lOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA6ICdTU1InXG4gIH0pO1xuICBcbiAgLy8gQ1LDjVRJQ086IFVzYXIgcmVmcyBwYXJhIGZ1bmNpb25lcyBkZSBadXN0YW5kIHkgdG9hc3QgcGFyYSBldml0YXIgYnVjbGVzIGluZmluaXRvc1xuICBjb25zdCBsb2FkQm9hcmRSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgY29uc3QgY3JlYXRlQm9hcmRSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgY29uc3QgY2xlYW51cFJlZiA9IHVzZVJlZjxhbnk+KG51bGwpO1xuICBjb25zdCB0b2FzdFJlZiA9IHVzZVJlZih0b2FzdCk7XG4gIFxuICAvLyBBY3R1YWxpemFyIHJlZnMgY3VhbmRvIGNhbWJpYW5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICB0b2FzdFJlZi5jdXJyZW50ID0gdG9hc3Q7XG4gIH0sIFt0b2FzdF0pO1xuICBcbiAgLy8gREVCVUc6IExvZyBjdWFuZG8gZWwgY29tcG9uZW50ZSBzZSBtb250YVxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5qAIFtCb2FyZFBhZ2VdIENvbXBvbmVudGUgbW9udGFkbycsIHsgYm9hcmRJZCB9KTtcbiAgfSwgW2JvYXJkSWRdKTtcbiAgXG4gIC8vIERFQlVHOiBMb2cgZGVsIGVzdGFkbyBkZWwgdXN1YXJpb1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtCb2FyZFBhZ2VdIEVzdGFkbyBkZWwgdXN1YXJpbzonLCB7XG4gICAgICBoYXNVc2VyOiAhIXVzZXIsXG4gICAgICB1c2VySWQ6IHVzZXI/LnVpZCxcbiAgICAgIGlzVXNlckxvYWRpbmc6IGF1dGhMb2FkaW5nLFxuICAgICAgdXNlckVycm9yOiB1c2VyRXJyb3I/Lm1lc3NhZ2UsXG4gICAgICB1c2VyRW1haWw6IHVzZXI/LmVtYWlsLFxuICAgICAgaXNBbm9ueW1vdXM6IHVzZXI/LmlzQW5vbnltb3VzLFxuICAgICAgc2Vzc2lvblN0b3JhZ2U6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8ge1xuICAgICAgICBoYXNSZWNlbnRMb2dpbjogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaGFzUmVjZW50TG9naW4nKSxcbiAgICAgICAgbG9naW5UaW1lc3RhbXA6IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2luVGltZXN0YW1wJyksXG4gICAgICAgIHJlZGlyZWN0aW5nVG9Cb2FyZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJylcbiAgICAgIH0gOiAnTi9BIChTU1IpJ1xuICAgIH0pO1xuICB9LCBbdXNlciwgYXV0aExvYWRpbmcsIHVzZXJFcnJvcl0pO1xuXG4gIC8vIC0tIEVTVEFETyBHTE9CQUwgREVMIFRBQkxFUk8gKFp1c3RhbmQpIC0tXG4gIGNvbnN0IHtcbiAgICBlbGVtZW50cyxcbiAgICBib2FyZCxcbiAgICBsb2FkQm9hcmQsXG4gICAgY3JlYXRlQm9hcmQsXG4gICAgdXBkYXRlRWxlbWVudCxcbiAgICBkZWxldGVFbGVtZW50LFxuICAgIHNlbGVjdGVkRWxlbWVudElkcyxcbiAgICBzZXRTZWxlY3RlZEVsZW1lbnRJZHMsXG4gICAgaXNMb2FkaW5nOiBpc0JvYXJkTG9hZGluZyxcbiAgICBlcnJvcixcbiAgICBjbGVhbnVwLFxuICB9ID0gdXNlQm9hcmRTdG9yZSgpO1xuICBcbiAgLy8gQ1LDjVRJQ086IEFjdHVhbGl6YXIgcmVmcyBjdWFuZG8gbGFzIGZ1bmNpb25lcyBkZSBadXN0YW5kIGNhbWJpYW5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsb2FkQm9hcmRSZWYuY3VycmVudCA9IGxvYWRCb2FyZDtcbiAgICBjcmVhdGVCb2FyZFJlZi5jdXJyZW50ID0gY3JlYXRlQm9hcmQ7XG4gICAgY2xlYW51cFJlZi5jdXJyZW50ID0gY2xlYW51cDtcbiAgfSwgW2xvYWRCb2FyZCwgY3JlYXRlQm9hcmQsIGNsZWFudXBdKTtcblxuICAvLyAtLSBFU1RBRE8gTE9DQUwgWSBIT09LUyAtLVxuICAvLyBDUsONVElDTzogdXNlQm9hcmRTdGF0ZSBjcmVhIGxpc3RlbmVycyBEVVBMSUNBRE9TIGRlIEZpcmViYXNlIHBhcmEgZWxlbWVudHNcbiAgLy8gU29sbyB1c2FyIHBhcmEgYm9hcmRzLCBoYW5kbGVSZW5hbWVCb2FyZCwgaGFuZGxlRGVsZXRlQm9hcmQsIGNsZWFyQ2FudmFzXG4gIC8vIE5PIHVzYXIgZWxlbWVudHMgZGUgdXNlQm9hcmRTdGF0ZSAtIHVzYXIgc29sbyBkZSB1c2VCb2FyZFN0b3JlXG4gIGNvbnN0IHsgYm9hcmRzLCBoYW5kbGVSZW5hbWVCb2FyZCwgaGFuZGxlRGVsZXRlQm9hcmQsIGNsZWFyQ2FudmFzIH0gPSB1c2VCb2FyZFN0YXRlKGJvYXJkSWQpO1xuICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWY8YW55PihudWxsKTtcbiAgXG4gIC8vIFdyYXBwZXIgZnVuY3Rpb25zIHBhcmEgY29pbmNpZGlyIGNvbiBsb3MgdGlwb3MgZXNwZXJhZG9zXG4gIGNvbnN0IGhhbmRsZVJlbmFtZUJvYXJkV3JhcHBlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBzZXRJc1JlbmFtZUJvYXJkRGlhbG9nT3Blbih0cnVlKTtcbiAgfSwgW10pO1xuICBcbiAgY29uc3QgaGFuZGxlU2F2ZVJlbmFtZUJvYXJkID0gdXNlQ2FsbGJhY2soKG5ld05hbWU6IHN0cmluZykgPT4ge1xuICAgIGhhbmRsZVJlbmFtZUJvYXJkKG5ld05hbWUpO1xuICAgIHNldElzUmVuYW1lQm9hcmREaWFsb2dPcGVuKGZhbHNlKTtcbiAgfSwgW2hhbmRsZVJlbmFtZUJvYXJkXSk7XG4gIFxuICBjb25zdCBjbGVhckNhbnZhc1dyYXBwZXIgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY2xlYXJDYW52YXMoZWxlbWVudHMpO1xuICB9LCBbZWxlbWVudHMsIGNsZWFyQ2FudmFzXSk7XG5cbiAgLy8gRXN0YWRvcyBkZSBVSVxuICBjb25zdCBbaXNGb3JtYXRUb29sYmFyT3Blbiwgc2V0SXNGb3JtYXRUb29sYmFyT3Blbl0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2lzSW1hZ2VVcmxEaWFsb2dPcGVuLCBzZXRJc0ltYWdlVXJsRGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtjaGFuZ2VGb3JtYXREaWFsb2dPcGVuLCBzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUGFubmluZ0FjdGl2ZSwgc2V0SXNQYW5uaW5nQWN0aXZlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUmVuYW1lQm9hcmREaWFsb2dPcGVuLCBzZXRJc1JlbmFtZUJvYXJkRGlhbG9nT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIFxuICAvLyBFc3RhZG9zIGRlIFNlbGVjY2nDs24geSBFZGljacOzblxuICBjb25zdCBbc2VsZWN0ZWRFbGVtZW50LCBzZXRTZWxlY3RlZEVsZW1lbnRdID0gdXNlU3RhdGU8V2l0aElkPENhbnZhc0VsZW1lbnQ+IHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFthY3RpdmF0ZWRFbGVtZW50SWQsIHNldEFjdGl2YXRlZEVsZW1lbnRJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW3NlbGVjdGVkTm90ZXBhZEZvckZvcm1hdCwgc2V0U2VsZWN0ZWROb3RlcGFkRm9yRm9ybWF0XSA9IHVzZVN0YXRlPFdpdGhJZDxDYW52YXNFbGVtZW50PiB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNEaXJ0eSwgc2V0SXNEaXJ0eV0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtpc0VkaXRDb21tZW50RGlhbG9nT3Blbiwgc2V0SXNFZGl0Q29tbWVudERpYWxvZ09wZW5dID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2VsZWN0ZWRDb21tZW50Rm9yRWRpdCwgc2V0U2VsZWN0ZWRDb21tZW50Rm9yRWRpdF0gPSB1c2VTdGF0ZTxXaXRoSWQ8Q2FudmFzRWxlbWVudD4gfCBudWxsPihudWxsKTtcbiAgXG4gIC8vIFJlZiBwYXJhIGFsbWFjZW5hciB6SW5kZXggb3JpZ2luYWwgZGUgZWxlbWVudG9zIGN1YW5kbyBzZSBlZGl0YW5cbiAgY29uc3Qgb3JpZ2luYWxaSW5kZXhSZWYgPSB1c2VSZWY8TWFwPHN0cmluZywgbnVtYmVyPj4obmV3IE1hcCgpKTtcbiAgXG4gIC8vIFBhbmVsIGRlIGluZm9ybWFjacOzbiBkZWwgZWxlbWVudG8gKE9wY2nDs24gNDogQ29tYmluYWNpw7NuIFBhbmVsICsgQ29uc29sYSlcbiAgY29uc3QgW2lzSW5mb1BhbmVsVmlzaWJsZSwgc2V0SXNJbmZvUGFuZWxWaXNpYmxlXSA9IHVzZVN0YXRlKGZhbHNlKTsgLy8gT2N1bHRvIHBvciBkZWZlY3RvLCBzZSBtdWVzdHJhIGFsIHNlbGVjY2lvbmFyIGVsZW1lbnRvXG5cbiAgLy8gLS0gRElDVEFETyBERSBWT1ogLS1cbiAgLy8gSG9vayBkZSBkaWN0YWRvIHNpbXBsaWZpY2FkbyBzZWfDum4gUmVhZG1lIDE4IE5vdlxuICBjb25zdCB7XG4gICAgaXNTdXBwb3J0ZWQ6IGlzRGljdGF0aW9uU3VwcG9ydGVkLFxuICAgIGlzTGlzdGVuaW5nOiBpc0RpY3RhdGlvbkxpc3RlbmluZyxcbiAgICB0cmFuc2NyaXB0LFxuICAgIGZpbmFsVHJhbnNjcmlwdCxcbiAgICBpbnRlcmltVHJhbnNjcmlwdCxcbiAgICBwZXJtaXNzaW9uRXJyb3IsXG4gICAgdG9nZ2xlOiB0b2dnbGVEaWN0YXRpb24sXG4gIH0gPSB1c2VEaWN0YXRpb24oKTtcbiAgXG4gIC8vIGxpdmVUcmFuc2NyaXB0IGNvbWJpbmEgZmluYWxUcmFuc2NyaXB0ICsgaW50ZXJpbVRyYW5zY3JpcHQgcGFyYSBtb3N0cmFyIGVuIHRpZW1wbyByZWFsXG4gIGNvbnN0IGxpdmVUcmFuc2NyaXB0ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgLy8gQ29tYmluYXIgdGV4dG8gZmluYWwgYWN1bXVsYWRvIGNvbiB0ZXh0byBwcm92aXNpb25hbFxuICAgIGNvbnN0IGZpbmFsID0gZmluYWxUcmFuc2NyaXB0IHx8ICcnO1xuICAgIGNvbnN0IGludGVyaW0gPSBpbnRlcmltVHJhbnNjcmlwdCB8fCAnJztcbiAgICBcbiAgICAvLyBTaSBoYXkgdGV4dG8gcHJvdmlzaW9uYWwsIGFncmVnYXJsbyBhbCBmaW5hbCBkZWwgdGV4dG8gZmluYWxcbiAgICBpZiAoaW50ZXJpbS50cmltKCkpIHtcbiAgICAgIHJldHVybiBmaW5hbCArIChmaW5hbCA/ICcgJyA6ICcnKSArIGludGVyaW07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBmaW5hbDtcbiAgfSwgW2ZpbmFsVHJhbnNjcmlwdCwgaW50ZXJpbVRyYW5zY3JpcHRdKTtcbiAgXG4gIGNvbnN0IGhhbmRsZVRvZ2dsZURpY3RhdGlvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgdG9nZ2xlRGljdGF0aW9uKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGFsdGVybmFyIGRpY3RhZG86JywgZXJyb3IpO1xuICAgIH1cbiAgfSwgW3RvZ2dsZURpY3RhdGlvbl0pO1xuXG4gIC8vIE1vc3RyYXIgZXJyb3IgZGUgcGVybWlzb3MgYWwgdXN1YXJpb1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwZXJtaXNzaW9uRXJyb3IpIHtcbiAgICAgIHRvYXN0KHtcbiAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgdGl0bGU6ICdFcnJvciBkZSBQZXJtaXNvcycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBwZXJtaXNzaW9uRXJyb3IsXG4gICAgICAgIGR1cmF0aW9uOiA1MDAwLFxuICAgICAgfSk7XG4gICAgfVxuICB9LCBbcGVybWlzc2lvbkVycm9yLCB0b2FzdF0pO1xuXG4gIC8vIC0tIEdFU1RJw5NOIERFIEVMRU1FTlRPUyAtLVxuICBjb25zdCBnZXRWaWV3cG9ydENlbnRlciA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoY2FudmFzUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNvbnN0IGNlbnRlciA9IGNhbnZhc1JlZi5jdXJyZW50LmdldFZpZXdwb3J0Q2VudGVyKCk7XG4gICAgICAvLyBDUsONVElDTzogQXNlZ3VyYXIgcXVlIGN1YW5kbyBlbCBzY3JvbGwgZXN0w6EgZW4gMCwwLCBsb3MgZWxlbWVudG9zIHNlIGNyZWVuIGNlcmNhIGRlbCBvcmlnZW5cbiAgICAgIC8vIEVsIHZpZXdwb3J0IGNlbnRlciBkZWJlIHNlciByZWxhdGl2byBhIGxhIHBvc2ljacOzbiB2aXNpYmxlLCBubyBhYnNvbHV0YVxuICAgICAgcmV0dXJuIGNlbnRlcjtcbiAgICB9XG4gICAgLy8gRmFsbGJhY2s6IHJldG9ybmFyIGNlbnRybyBkZWwgdmlld3BvcnQgdmlzaWJsZSAobm8gYWJzb2x1dG8pXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4geyB4OiB3aW5kb3cuaW5uZXJXaWR0aCAvIDIsIHk6IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgeDogNDAwMDAsIHk6IDQwMDAwIH07IC8vIEZhbGxiYWNrIHBhcmEgU1NSXG4gIH0sIFtdKTtcblxuICAvLyBDUsONVElDTzogVXNhciByZWYgcGFyYSBlbGVtZW50cyBwYXJhIGV2aXRhciByZWNyZWFjacOzbiBkZSBmdW5jacOzblxuICBjb25zdCBlbGVtZW50c1JlZiA9IHVzZVJlZihlbGVtZW50cyk7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgZWxlbWVudHNSZWYuY3VycmVudCA9IGVsZW1lbnRzO1xuICB9LCBbZWxlbWVudHNdKTtcblxuICBjb25zdCBnZXROZXh0WkluZGV4ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50cyA9IGVsZW1lbnRzUmVmLmN1cnJlbnQ7XG4gICAgaWYgKCFjdXJyZW50RWxlbWVudHMgfHwgY3VycmVudEVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDE7XG4gICAgY29uc3QgekluZGV4ZXMgPSBjdXJyZW50RWxlbWVudHNcbiAgICAgIC5maWx0ZXIoZSA9PiB0eXBlb2YgZS56SW5kZXggPT09ICdudW1iZXInKVxuICAgICAgLm1hcChlID0+IGUuekluZGV4ISk7XG4gICAgcmV0dXJuIHpJbmRleGVzLmxlbmd0aCA+IDAgPyBNYXRoLm1heCguLi56SW5kZXhlcykgKyAxIDogMjtcbiAgfSwgW10pOyAvLyDinIUgU2luIGRlcGVuZGVuY2lhcyAtIHVzYSByZWZcblxuICBjb25zdCB7IGFkZEVsZW1lbnQgfSA9IHVzZUVsZW1lbnRNYW5hZ2VyKGJvYXJkSWQsIGdldFZpZXdwb3J0Q2VudGVyLCBnZXROZXh0WkluZGV4KTtcblxuICAvLyAtLSBFRkVDVE9TIC0tXG5cbiAgLy8gU2luY3Jvbml6YXIgc2VsZWNjacOzblxuICAvLyBDUsONVElDTzogT3B0aW1pemFkbyBwYXJhIGV2aXRhciByZS1yZW5kZXJzIGNvbnN0YW50ZXMgeSBidWNsZXMgaW5maW5pdG9zXG4gIGNvbnN0IHNlbGVjdGVkRWxlbWVudElkID0gc2VsZWN0ZWRFbGVtZW50SWRzLmxlbmd0aCA9PT0gMSA/IHNlbGVjdGVkRWxlbWVudElkc1swXSA6IG51bGw7XG4gIGNvbnN0IGZvdW5kRWxlbWVudCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRFbGVtZW50SWQgfHwgIWVsZW1lbnRzIHx8IGVsZW1lbnRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IHNlbGVjdGVkRWxlbWVudElkKSB8fCBudWxsO1xuICB9LCBbc2VsZWN0ZWRFbGVtZW50SWQsIGVsZW1lbnRzLmxlbmd0aCwgc2VsZWN0ZWRFbGVtZW50SWQgPyBlbGVtZW50cy5maW5kKGUgPT4gZS5pZCA9PT0gc2VsZWN0ZWRFbGVtZW50SWQpPy51cGRhdGVkQXQgOiBudWxsXSk7IC8vIOKchSBEZXBlbmRlciBkZSBsZW5ndGggeSB1cGRhdGVkQXQsIG5vIGRlbCBhcnJheSBjb21wbGV0b1xuICBcbiAgLy8gQ1LDjVRJQ086IFNvbG8gYWN0dWFsaXphciBzaSBlbCBJRCByZWFsbWVudGUgY2FtYmnDsyAoZXZpdGFyIGJ1Y2xlcyBpbmZpbml0b3MpXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgZm91bmRJZCA9IGZvdW5kRWxlbWVudD8uaWQgPz8gbnVsbDtcbiAgICBjb25zdCBjdXJyZW50SWQgPSBzZWxlY3RlZEVsZW1lbnQ/LmlkID8/IG51bGw7XG4gICAgaWYgKGZvdW5kSWQgIT09IGN1cnJlbnRJZCkge1xuICAgICAgc2V0U2VsZWN0ZWRFbGVtZW50KGZvdW5kRWxlbWVudCk7XG4gICAgfVxuICB9LCBbZm91bmRFbGVtZW50Py5pZCwgc2VsZWN0ZWRFbGVtZW50Py5pZF0pOyAvLyDinIUgRGVwZW5kZXIgc29sbyBkZSBJRHMsIG5vIGRlIG9iamV0b3MgY29tcGxldG9zXG5cbiAgLy8gLS0gTE9HR0lORyBFTiBDT05TT0xBIGN1YW5kbyBzZSBzZWxlY2Npb25hIHVuIGVsZW1lbnRvIC0tXG4gIC8vIE9QVElNSVpBRE86IFNvbG8gbG9nZ2VhciBlbiBkZXNhcnJvbGxvIHkgY29uIGluZm9ybWFjacOzbiBlc2VuY2lhbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAgIC8vIE1vc3RyYXIgcGFuZWwgYXV0b23DoXRpY2FtZW50ZSBjdWFuZG8gc2Ugc2VsZWNjaW9uYSB1biBlbGVtZW50b1xuICAgICAgc2V0SXNJbmZvUGFuZWxWaXNpYmxlKHRydWUpO1xuICAgICAgXG4gICAgICAvLyBTb2xvIGxvZ2dlYXIgZW4gZGVzYXJyb2xsbyB5IGRlIGZvcm1hIG9wdGltaXphZGFcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TiyBFbGVtZW50byBzZWxlY2Npb25hZG86Jywge1xuICAgICAgICAgIGlkOiBzZWxlY3RlZEVsZW1lbnQuaWQsXG4gICAgICAgICAgdHlwZTogc2VsZWN0ZWRFbGVtZW50LnR5cGUsXG4gICAgICAgICAgcG9zaXRpb246IHtcbiAgICAgICAgICAgIHg6IHNlbGVjdGVkRWxlbWVudC5wcm9wZXJ0aWVzPy5wb3NpdGlvbj8ueCB8fCBzZWxlY3RlZEVsZW1lbnQueCB8fCAwLFxuICAgICAgICAgICAgeTogc2VsZWN0ZWRFbGVtZW50LnByb3BlcnRpZXM/LnBvc2l0aW9uPy55IHx8IHNlbGVjdGVkRWxlbWVudC55IHx8IDAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaXplOiB7XG4gICAgICAgICAgICB3aWR0aDogc2VsZWN0ZWRFbGVtZW50LnByb3BlcnRpZXM/LnNpemU/LndpZHRoIHx8IHNlbGVjdGVkRWxlbWVudC53aWR0aCB8fCAwLFxuICAgICAgICAgICAgaGVpZ2h0OiBzZWxlY3RlZEVsZW1lbnQucHJvcGVydGllcz8uc2l6ZT8uaGVpZ2h0IHx8IHNlbGVjdGVkRWxlbWVudC5oZWlnaHQgfHwgMCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHpJbmRleDogc2VsZWN0ZWRFbGVtZW50LnpJbmRleCxcbiAgICAgICAgICBwYXJlbnRJZDogc2VsZWN0ZWRFbGVtZW50LnBhcmVudElkLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gTG9nIGNvbXBsZXRvIHNvbG8gc2kgZXN0w6EgaGFiaWxpdGFkbyBlbCBkZWJ1Z1xuICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLkRFQlVHX0VMRU1FTlRTKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ0VsZW1lbnRvIGNvbXBsZXRvOicsIHNlbGVjdGVkRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT2N1bHRhciBwYW5lbCBjdWFuZG8gbm8gaGF5IGVsZW1lbnRvIHNlbGVjY2lvbmFkb1xuICAgICAgc2V0SXNJbmZvUGFuZWxWaXNpYmxlKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtzZWxlY3RlZEVsZW1lbnRdKTtcblxuICAvLyAtLSBBVEFKTyBERSBURUNMQURPOiBDdHJsK1NoaWZ0K0QgcGFyYSBtb3N0cmFyL29jdWx0YXIgcGFuZWwgLS1cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmICgoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgZS5zaGlmdEtleSAmJiBlLmtleSA9PT0gJ0QnKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0SXNJbmZvUGFuZWxWaXNpYmxlKHByZXYgPT4gIXByZXYpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pO1xuICB9LCBbXSk7XG5cbiAgLy8gQ1LDjVRJQ086IFJFRlMgcGFyYSBwcmV2ZW5pciBtw7psdGlwbGVzIGVqZWN1Y2lvbmVzXG4gIGNvbnN0IGhhc0xvYWRlZFJlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IGlzTG9hZGluZ1JlZiA9IHVzZVJlZihmYWxzZSk7XG4gIGNvbnN0IHdhaXRUaW1lclJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBjdXJyZW50Qm9hcmRJZFJlZiA9IHVzZVJlZjxzdHJpbmcgfCBudWxsPihudWxsKTtcblxuICAvLyBDT05TT0xJREFETzogVW4gc29sbyB1c2VFZmZlY3QgcGFyYSBsb2dpbiB5IGNhcmdhIGRlIHRhYmxlcm9cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+UhCBbQm9hcmRQYWdlXSB1c2VFZmZlY3QgZWplY3V0YWRvJywge1xuICAgICAgYm9hcmRJZCxcbiAgICAgIGhhc1VzZXI6ICEhdXNlcixcbiAgICAgIHVzZXJJZDogdXNlcj8udWlkLFxuICAgICAgaXNBbm9ueW1vdXM6IHVzZXI/LmlzQW5vbnltb3VzLFxuICAgICAgYXV0aExvYWRpbmcsXG4gICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ1JlZi5jdXJyZW50LFxuICAgICAgaGFzTG9hZGVkOiBoYXNMb2FkZWRSZWYuY3VycmVudCxcbiAgICAgIGN1cnJlbnRCb2FyZElkOiBjdXJyZW50Qm9hcmRJZFJlZi5jdXJyZW50XG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVzZXRlYXIgZmxhZ3Mgc2kgY2FtYmnDsyBib2FyZElkXG4gICAgaWYgKGN1cnJlbnRCb2FyZElkUmVmLmN1cnJlbnQgIT09IGJvYXJkSWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIFtCb2FyZFBhZ2VdIEJvYXJkSWQgY2FtYmnDsywgcmVzZXRlYW5kbyBmbGFncycsIHtcbiAgICAgICAgb2xkOiBjdXJyZW50Qm9hcmRJZFJlZi5jdXJyZW50LFxuICAgICAgICBuZXc6IGJvYXJkSWRcbiAgICAgIH0pO1xuICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICBjdXJyZW50Qm9hcmRJZFJlZi5jdXJyZW50ID0gYm9hcmRJZDtcbiAgICB9XG4gICAgXG4gICAgLy8gUHJldmVuaXIgbcO6bHRpcGxlcyBlamVjdWNpb25lc1xuICAgIGlmIChpc0xvYWRpbmdSZWYuY3VycmVudCB8fCBhdXRoTG9hZGluZykge1xuICAgICAgY29uc29sZS5sb2coJ+KPuO+4jyBbQm9hcmRQYWdlXSBTYWx0YW5kbyBlamVjdWNpw7NuICh5YSBjYXJnYW5kbyBvIGF1dGggY2FyZ2FuZG8pJywge1xuICAgICAgICBpc0xvYWRpbmc6IGlzTG9hZGluZ1JlZi5jdXJyZW50LFxuICAgICAgICBhdXRoTG9hZGluZ1xuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTGltcGlhciB0aW1lciBhbnRlcmlvclxuICAgIGlmICh3YWl0VGltZXJSZWYuY3VycmVudCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHdhaXRUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgIHdhaXRUaW1lclJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBWZXJpZmljYXIgbG9naW4gcmVjaWVudGUgKHNvbG8gZW4gY2xpZW50ZSlcbiAgICBjb25zdCBoYXNSZWNlbnRMb2dpbiA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnaGFzUmVjZW50TG9naW4nKSA9PT0gJ3RydWUnIDogZmFsc2U7XG4gICAgY29uc3QgbG9naW5UaW1lc3RhbXAgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2xvZ2luVGltZXN0YW1wJykgOiBudWxsO1xuICAgIGNvbnN0IHJlZGlyZWN0aW5nVG9Cb2FyZCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJykgOiBudWxsO1xuICAgIGNvbnN0IGFub255bW91c1VzZXJJZCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYW5vbnltb3VzVXNlcklkJykgOiBudWxsO1xuICAgIC8vIENSw41USUNPOiBBdW1lbnRhciB0aWVtcG8gZGUgZXNwZXJhIGEgMiBtaW51dG9zIHBhcmEgZGFyIHRpZW1wbyBhIEZpcmViYXNlIEF1dGggZGUgaW5pY2lhbGl6YXJcbiAgICBjb25zdCBpc0xvZ2luUmVjZW50ID0gaGFzUmVjZW50TG9naW4gJiYgbG9naW5UaW1lc3RhbXAgJiYgKERhdGUubm93KCkgLSBwYXJzZUludChsb2dpblRpbWVzdGFtcCkpIDwgMTIwMDAwO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFtCb2FyZFBhZ2VdIEVzdGFkbyBkZSBhdXRlbnRpY2FjacOzbjonLCB7XG4gICAgICBoYXNVc2VyOiAhIXVzZXIsXG4gICAgICB1c2VySWQ6IHVzZXI/LnVpZCxcbiAgICAgIGhhc1JlY2VudExvZ2luLFxuICAgICAgbG9naW5UaW1lc3RhbXAsXG4gICAgICByZWRpcmVjdGluZ1RvQm9hcmQsXG4gICAgICBib2FyZElkLFxuICAgICAgaXNMb2dpblJlY2VudCxcbiAgICAgIGFub255bW91c1VzZXJJZCxcbiAgICAgIHRpbWVTaW5jZUxvZ2luOiBsb2dpblRpbWVzdGFtcCA/IERhdGUubm93KCkgLSBwYXJzZUludChsb2dpblRpbWVzdGFtcCkgOiBudWxsXG4gICAgfSk7XG4gICAgXG4gICAgLy8gUmVkaXJpZ2lyIHNpIG5vIGhheSB1c3VhcmlvIHkgbm8gaGF5IGxvZ2luIHJlY2llbnRlXG4gICAgaWYgKCF1c2VyICYmICFpc0xvZ2luUmVjZW50KSB7XG4gICAgICBjb25zb2xlLmxvZygn4pqg77iPIFtCb2FyZFBhZ2VdIE5vIGhheSB1c3VhcmlvIG5pIGxvZ2luIHJlY2llbnRlLCByZWRpcmlnaWVuZG8gYSBpbmljaW8uLi4nKTtcbiAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzZXNzaW9uU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJy8nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gRXNwZXJhciBzaSBoYXkgbG9naW4gcmVjaWVudGUgcGVybyBubyB1c3VhcmlvIChDUsONVElDTyBwYXJhIHVzdWFyaW9zIGFuw7NuaW1vcyBkZXNwdcOpcyBkZSByZWRpcmVjdClcbiAgICBpZiAoaXNMb2dpblJlY2VudCAmJiAhdXNlcikge1xuICAgICAgLy8gQ1LDjVRJQ086IEF1bWVudGFyIHRpZW1wbyBkZSBlc3BlcmEgLSBGaXJlYmFzZSBBdXRoIHB1ZWRlIHRhcmRhciBlbiBpbmljaWFsaXphciBkZXNwdcOpcyBkZSByZWRpcmVjdFxuICAgICAgY29uc3Qgd2FpdFRpbWUgPSByZWRpcmVjdGluZ1RvQm9hcmQgPT09IGJvYXJkSWQgPyA2MDAwMCA6IDMwMDAwOyAvLyA2MHMgc2kgZXMgZWwgdGFibGVybyBjb3JyZWN0bywgMzBzIHNpIG5vXG4gICAgICBjb25zb2xlLmxvZygn4o+zIFtCb2FyZFBhZ2VdIEVzcGVyYW5kbyB1c3VhcmlvIGRlc3B1w6lzIGRlIGxvZ2luIHJlY2llbnRlLi4uJywge1xuICAgICAgICB3YWl0VGltZSxcbiAgICAgICAgcmVkaXJlY3RpbmdUb0JvYXJkLFxuICAgICAgICBib2FyZElkLFxuICAgICAgICBoYXNSZWNlbnRMb2dpbixcbiAgICAgICAgbG9naW5UaW1lc3RhbXAsXG4gICAgICAgIGFub255bW91c1VzZXJJZCxcbiAgICAgICAgdGltZVNpbmNlTG9naW46IGxvZ2luVGltZXN0YW1wID8gRGF0ZS5ub3coKSAtIHBhcnNlSW50KGxvZ2luVGltZXN0YW1wKSA6IG51bGxcbiAgICAgIH0pO1xuICAgICAgd2FpdFRpbWVyUmVmLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaWYgKCF1c2VyICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBbQm9hcmRQYWdlXSBUaW1lb3V0OiBVc3VhcmlvIG5vIGRpc3BvbmlibGUgZGVzcHXDqXMgZGUgZXNwZXJhciwgcmVkaXJpZ2llbmRvLi4uJyk7XG4gICAgICAgICAgLy8gQ1LDjVRJQ086IE5vIGxpbXBpYXIgc2Vzc2lvblN0b3JhZ2UgY29tcGxldGFtZW50ZSAtIHB1ZWRlIGhhYmVyIGluZm9ybWFjacOzbiDDunRpbFxuICAgICAgICAgIC8vIFNvbG8gbGltcGlhciBmbGFncyBkZSBsb2dpbiwgbWFudGVuZXIgYW5vbnltb3VzVXNlcklkIHNpIGV4aXN0ZVxuICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2hhc1JlY2VudExvZ2luJyk7XG4gICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9naW5UaW1lc3RhbXAnKTtcbiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCdyZWRpcmVjdGluZ1RvQm9hcmQnKTtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgnLycpO1xuICAgICAgICB9XG4gICAgICB9LCB3YWl0VGltZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2FyZ2FyL2NyZWFyIHRhYmxlcm8gKFNPTE8gVU5BIFZFWilcbiAgICBpZiAodXNlcj8udWlkICYmICFoYXNMb2FkZWRSZWYuY3VycmVudCAmJiBsb2FkQm9hcmRSZWYuY3VycmVudCAmJiBjcmVhdGVCb2FyZFJlZi5jdXJyZW50KSB7XG4gICAgICBjb25zb2xlLmxvZygn4pyFIFtCb2FyZFBhZ2VdIFVzdWFyaW8gZGlzcG9uaWJsZSwgY2FyZ2FuZG8vY3JlYW5kbyB0YWJsZXJvJywge1xuICAgICAgICB1c2VySWQ6IHVzZXIudWlkLFxuICAgICAgICBib2FyZElkLFxuICAgICAgICBpc0Fub255bW91czogdXNlci5pc0Fub255bW91c1xuICAgICAgfSk7XG4gICAgICBoYXNMb2FkZWRSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IHRydWU7XG4gICAgICBjb25zdCB1c2VySWQgPSB1c2VyLnVpZDtcbiAgICAgIFxuICAgICAgaWYgKGJvYXJkSWQgPT09ICduZXcnKSB7XG4gICAgICAgIGNyZWF0ZUJvYXJkUmVmLmN1cnJlbnQodXNlcklkKS50aGVuKChuZXdCb2FyZElkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBpc0xvYWRpbmdSZWYuY3VycmVudCA9IGZhbHNlO1xuICAgICAgICAgIGlmIChuZXdCb2FyZElkICYmIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdoYXNSZWNlbnRMb2dpbicsICd0cnVlJyk7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdsb2dpblRpbWVzdGFtcCcsIERhdGUubm93KCkudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvYm9hcmQvJHtuZXdCb2FyZElkfWA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgYWwgY3JlYXIgdGFibGVybzonLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9hZEJvYXJkUmVmLmN1cnJlbnQoYm9hcmRJZCwgdXNlcklkKS50aGVuKChsb2FkZWRCb2FyZElkOiBzdHJpbmcgfCBudWxsKSA9PiB7XG4gICAgICAgICAgaXNMb2FkaW5nUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBpZiAobG9hZGVkQm9hcmRJZCAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2hhc1JlY2VudExvZ2luJyk7XG4gICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2xvZ2luVGltZXN0YW1wJyk7XG4gICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlZGlyZWN0aW5nVG9Cb2FyZCcpO1xuICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhc0xvYWRlZFJlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaCgoZXJyb3I6IGFueSkgPT4ge1xuICAgICAgICAgIGlzTG9hZGluZ1JlZi5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgICAgaGFzTG9hZGVkUmVmLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgYWwgY2FyZ2FyIHRhYmxlcm86JywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ2xlYW51cFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAod2FpdFRpbWVyUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHdhaXRUaW1lclJlZi5jdXJyZW50KTtcbiAgICAgICAgd2FpdFRpbWVyUmVmLmN1cnJlbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKGNsZWFudXBSZWYuY3VycmVudCkge1xuICAgICAgICBjbGVhbnVwUmVmLmN1cnJlbnQoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbYm9hcmRJZCwgdXNlciwgYXV0aExvYWRpbmddKTtcblxuICAvLyAtLSBIQU5ETEVSUyBERSBBQ0NJw5NOIC0tXG5cbiAgY29uc3QgaGFuZGxlU2VsZWN0RWxlbWVudCA9IChlbGVtZW50SWQ6IHN0cmluZyB8IG51bGwsIGlzTXVsdGlTZWxlY3Q6IGJvb2xlYW4pID0+IHtcbiAgICBpZiAoZWxlbWVudElkID09PSBudWxsKSBzZXRTZWxlY3RlZEVsZW1lbnRJZHMoW10pO1xuICAgIGVsc2Ugc2V0U2VsZWN0ZWRFbGVtZW50SWRzKFtlbGVtZW50SWRdKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVVcGxvYWRJbWFnZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIXVzZXI/LnVpZCkge1xuICAgICAgdG9hc3QoeyB0aXRsZTogJ0Vycm9yJywgZGVzY3JpcHRpb246ICdEZWJlcyBpbmljaWFyIHNlc2nDs24nIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJJZCA9IHVzZXIudWlkOyAvLyBHdWFyZGFyIGVuIHZhcmlhYmxlIGxvY2FsXG4gICAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgaW5wdXQuYWNjZXB0ID0gJ2ltYWdlLyonO1xuICAgIGlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKGUpID0+IHtcbiAgICAgIGNvbnN0IGZpbGUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkuZmlsZXM/LlswXTtcbiAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGxvYWRSZXN1bHQgPSBhd2FpdCB1cGxvYWRGaWxlKGZpbGUsIHVzZXJJZCwgc3RvcmFnZSk7XG4gICAgICAgIGlmICh1cGxvYWRSZXN1bHQudXJsKSB7XG4gICAgICAgICAgYXdhaXQgYWRkRWxlbWVudCgnaW1hZ2UnLCB7XG4gICAgICAgICAgICBjb250ZW50OiB7IHVybDogdXBsb2FkUmVzdWx0LnVybCB9LFxuICAgICAgICAgICAgcHJvcGVydGllczogeyBzaXplOiB7IHdpZHRoOiAzMDAsIGhlaWdodDogMjAwIH0gfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0b2FzdCh7IHRpdGxlOiAnSW1hZ2VuIHN1YmlkYScgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRvYXN0KHsgdmFyaWFudDogJ2Rlc3RydWN0aXZlJywgdGl0bGU6ICdFcnJvciBhbCBzdWJpciBpbWFnZW4nIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgaW5wdXQuY2xpY2soKTtcbiAgfSwgW3VzZXIsIHN0b3JhZ2UsIGFkZEVsZW1lbnQsIHRvYXN0XSk7XG5cbiAgY29uc3QgaGFuZGxlRm9ybWF0VG9nZ2xlID0gdXNlQ2FsbGJhY2soKCkgPT4gc2V0SXNGb3JtYXRUb29sYmFyT3BlbihwcmV2ID0+ICFwcmV2KSwgW10pO1xuXG4gIC8vIEhhbmRsZXIgcGFyYSBhZ3JlZ2FyIG1hcmNhZG9yL2xvY2FsaXphZG9yIGRlc2RlIGVsIG1lbsO6IGZvcm1hdG9cbiAgY29uc3QgaGFuZGxlQWRkTWFya2VyID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHZpZXdwb3J0Q2VudGVyID0gZ2V0Vmlld3BvcnRDZW50ZXIoKTtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgYWRkRWxlbWVudCgnY29tbWVudCcsIHtcbiAgICAgICAgY29udGVudDogeyBcbiAgICAgICAgICB0aXRsZTogJ051ZXZvIExvY2FsaXphZG9yJywgXG4gICAgICAgICAgbGFiZWw6ICdMb2NhbGl6YWRvcicsXG4gICAgICAgICAgdGV4dDogJycgXG4gICAgICAgIH0sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwb3NpdGlvbjogdmlld3BvcnRDZW50ZXIsXG4gICAgICAgICAgc2l6ZTogeyB3aWR0aDogNDgsIGhlaWdodDogNDggfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgdG9hc3QoeyBcbiAgICAgICAgdGl0bGU6ICdMb2NhbGl6YWRvciBjcmVhZG8nLCBcbiAgICAgICAgZGVzY3JpcHRpb246ICdTZSBoYSBtYXJjYWRvIHVuYSBudWV2YSB1YmljYWNpw7NuIGVuIGVsIHRhYmxlcm8uIEVkaXRhIGVsIG5vbWJyZSBwYXJhIGlkZW50aWZpY2FybG8uJyBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIHRvYXN0KHsgXG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsIFxuICAgICAgICB0aXRsZTogJ0Vycm9yJywgXG4gICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlIHx8ICdObyBzZSBwdWRvIGNyZWFyIGVsIGxvY2FsaXphZG9yLicgXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtnZXRWaWV3cG9ydENlbnRlciwgYWRkRWxlbWVudCwgdG9hc3RdKTtcblxuICBjb25zdCBoYW5kbGVMb2NhdGVFbGVtZW50ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgIGlmIChlbGVtZW50ICYmIGNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICBoYW5kbGVTZWxlY3RFbGVtZW50KGlkLCBmYWxzZSk7XG4gICAgICBjYW52YXNSZWYuY3VycmVudC5jZW50ZXJPbkVsZW1lbnQoZWxlbWVudCk7XG4gICAgfVxuICB9LCBbZWxlbWVudHNdKTtcblxuICBjb25zdCBoYW5kbGVPcGVuTm90ZXBhZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChpZDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IGlkKTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcbiAgICB1cGRhdGVFbGVtZW50KGlkLCB7IGhpZGRlbjogZmFsc2UgfSk7XG4gICAgaGFuZGxlU2VsZWN0RWxlbWVudChpZCwgZmFsc2UpO1xuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkgY2FudmFzUmVmLmN1cnJlbnQuY2VudGVyT25FbGVtZW50KGVsZW1lbnQpO1xuICB9LCBbZWxlbWVudHMsIHVwZGF0ZUVsZW1lbnRdKTtcblxuICBjb25zdCBoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0ID0gdXNlQ2FsbGJhY2soKGlkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBzZXRTZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXQoZWxlbWVudCk7XG4gICAgICBzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVuKHRydWUpO1xuICAgIH1cbiAgfSwgW2VsZW1lbnRzXSk7XG5cbiAgY29uc3QgaGFuZGxlU2F2ZUZvcm1hdCA9IHVzZUNhbGxiYWNrKChpZDogc3RyaW5nLCBmb3JtYXQ6ICdsZXR0ZXInIHwgJzEweDE1JykgPT4ge1xuICAgIC8vIEZJWDogQ29ycmVnaXIgZGltZW5zaW9uZXMgLSAxMHgxNSBzaWduaWZpY2EgMTBjbSBhbmNobyB4IDE1Y20gYWx0byAobm8gMjEgYWx0byB4IDE1IGFuY2hvKVxuICAgIC8vIDEwY20gPSB+Mzc4cHgsIDE1Y20gPSB+NTY3cHggKGEgOTYgRFBJKVxuICAgIGNvbnN0IG5ld1NpemUgPSBmb3JtYXQgPT09ICdsZXR0ZXInIFxuICAgICAgPyB7IHdpZHRoOiA3OTQsIGhlaWdodDogMTAyMSB9IC8vIENhcnRhOiA4LjVcIiB4IDExXCJcbiAgICAgIDogeyB3aWR0aDogMzc4LCBoZWlnaHQ6IDU2NyB9OyAvLyAxMHgxNTogMTBjbSBhbmNobyB4IDE1Y20gYWx0byAoQ09SUkVHSURPKVxuICAgIHVwZGF0ZUVsZW1lbnQoaWQsIHsgXG4gICAgICB3aWR0aDogbmV3U2l6ZS53aWR0aCxcbiAgICAgIGhlaWdodDogbmV3U2l6ZS5oZWlnaHQsXG4gICAgICBwcm9wZXJ0aWVzOiB7IFxuICAgICAgICAuLi5zZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXQ/LnByb3BlcnRpZXMsIFxuICAgICAgICBmb3JtYXQsIFxuICAgICAgICBzaXplOiBuZXdTaXplIFxuICAgICAgfSBcbiAgICB9KTtcbiAgICBzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVuKGZhbHNlKTtcbiAgfSwgW3NlbGVjdGVkTm90ZXBhZEZvckZvcm1hdCwgdXBkYXRlRWxlbWVudF0pO1xuXG4gIGNvbnN0IGhhbmRsZUVkaXRDb21tZW50ID0gdXNlQ2FsbGJhY2soKGNvbW1lbnQ6IFdpdGhJZDxDYW52YXNFbGVtZW50PikgPT4ge1xuICAgIHNldFNlbGVjdGVkQ29tbWVudEZvckVkaXQoY29tbWVudCk7XG4gICAgc2V0SXNFZGl0Q29tbWVudERpYWxvZ09wZW4odHJ1ZSk7XG4gIH0sIFtdKTtcblxuICAvLyBSRUdMQVMgWi1JTkRFWDogQ3VhbmRvIHNlIGhhY2UgY2xpY2sgZW4gdW4gZWxlbWVudG8sIHBhc2EgYWwgZnJlbnRlIHBhcmEgZWRpdGFybG9cbiAgLy8gQ3VhZGVybm9zIHkgbGllbnpvIHNpZW1wcmUgZXN0w6FuIGVuIHByaW1lcmEgY2FwYSAoekluZGV4IGJhc2UgYWx0bylcbiAgLy8gRGVzcHXDqXMgZGUgZWRpdGFyLCBlbCBlbGVtZW50byB2dWVsdmUgYSBzdSBwb3NpY2nDs24gb3JpZ2luYWxcbiAgY29uc3QgaGFuZGxlRWRpdEVsZW1lbnQgPSB1c2VDYWxsYmFjaygoZWxlbWVudElkOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gZWxlbWVudElkKTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIC8vIFRpcG9zIHF1ZSBzaWVtcHJlIGRlYmVuIGVzdGFyIGVuIHByaW1lcmEgY2FwYSAoZGVzcHXDqXMgZGVsIHRhYmxlcm8pXG4gICAgY29uc3QgZmlyc3RMYXllclR5cGVzID0gWydub3RlcGFkJywgJ25vdGVwYWQtc2ltcGxlJywgJ3Rlc3Qtbm90ZXBhZCcsICd0YWJiZWQtbm90ZXBhZCcsICd5ZWxsb3ctbm90ZXBhZCddO1xuICAgIGNvbnN0IGlzRmlyc3RMYXllciA9IGZpcnN0TGF5ZXJUeXBlcy5pbmNsdWRlcyhlbGVtZW50LnR5cGUpO1xuICAgIFxuICAgIC8vIE9idGVuZXIgekluZGV4IGFjdHVhbFxuICAgIGNvbnN0IGVsZW1lbnRQcm9wcyA9IHR5cGVvZiBlbGVtZW50LnByb3BlcnRpZXMgPT09ICdvYmplY3QnICYmIGVsZW1lbnQucHJvcGVydGllcyAhPT0gbnVsbCA/IGVsZW1lbnQucHJvcGVydGllcyA6IHt9O1xuICAgIGNvbnN0IGN1cnJlbnRaSW5kZXggPSBlbGVtZW50UHJvcHMuekluZGV4ID8/IGVsZW1lbnQuekluZGV4ID8/IDE7XG4gICAgXG4gICAgLy8gR3VhcmRhciB6SW5kZXggb3JpZ2luYWwgc2kgbm8gZXN0w6EgZ3VhcmRhZG9cbiAgICBpZiAoIW9yaWdpbmFsWkluZGV4UmVmLmN1cnJlbnQuaGFzKGVsZW1lbnRJZCkpIHtcbiAgICAgIG9yaWdpbmFsWkluZGV4UmVmLmN1cnJlbnQuc2V0KGVsZW1lbnRJZCwgY3VycmVudFpJbmRleCk7XG4gICAgfVxuICAgIFxuICAgIC8vIENhbGN1bGFyIG51ZXZvIHpJbmRleDogdHJhZXIgYWwgZnJlbnRlIHRlbXBvcmFsbWVudGVcbiAgICBjb25zdCBtYXhaSW5kZXggPSBnZXROZXh0WkluZGV4KCk7XG4gICAgY29uc3QgbmV3WkluZGV4ID0gaXNGaXJzdExheWVyIFxuICAgICAgPyBNYXRoLm1heChtYXhaSW5kZXggLSAxMDAsIDEwMDApIC8vIFByaW1lcmEgY2FwYTogbcOtbmltbyAxMDAwXG4gICAgICA6IG1heFpJbmRleDsgLy8gT3Ryb3MgZWxlbWVudG9zOiBtw6F4aW1vIGRpc3BvbmlibGVcbiAgICBcbiAgICAvLyBBY3R1YWxpemFyIHpJbmRleCBwYXJhIHRyYWVyIGFsIGZyZW50ZVxuICAgIHVwZGF0ZUVsZW1lbnQoZWxlbWVudElkLCB7XG4gICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIC4uLmVsZW1lbnRQcm9wcyxcbiAgICAgICAgekluZGV4OiBuZXdaSW5kZXgsXG4gICAgICB9LFxuICAgIH0pO1xuICAgIFxuICAgIC8vIEFjdGl2YXIgZWxlbWVudG8gcGFyYSBlZGljacOzblxuICAgIHNldEFjdGl2YXRlZEVsZW1lbnRJZChlbGVtZW50SWQpO1xuICAgIFxuICAgIC8vIENlbnRyYXIgdmlzdGEgZW4gZWwgZWxlbWVudG8gc2kgZXN0w6EgZGlzcG9uaWJsZVxuICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkge1xuICAgICAgY2FudmFzUmVmLmN1cnJlbnQuY2VudGVyT25FbGVtZW50KGVsZW1lbnQpO1xuICAgIH1cbiAgfSwgW2VsZW1lbnRzLCBnZXROZXh0WkluZGV4LCB1cGRhdGVFbGVtZW50XSk7XG5cbiAgLy8gUmVzdGF1cmFyIHpJbmRleCBvcmlnaW5hbCBjdWFuZG8gc2UgZGVzZWxlY2Npb25hIHVuIGVsZW1lbnRvXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhY3RpdmF0ZWRFbGVtZW50SWQgJiYgb3JpZ2luYWxaSW5kZXhSZWYuY3VycmVudC5zaXplID4gMCkge1xuICAgICAgLy8gUmVzdGF1cmFyIHpJbmRleCBvcmlnaW5hbCBkZSB0b2RvcyBsb3MgZWxlbWVudG9zIGVkaXRhZG9zXG4gICAgICBvcmlnaW5hbFpJbmRleFJlZi5jdXJyZW50LmZvckVhY2goKG9yaWdpbmFsWkluZGV4LCBlbGVtZW50SWQpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmZpbmQoZWwgPT4gZWwuaWQgPT09IGVsZW1lbnRJZCk7XG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgY29uc3QgZWxlbWVudFByb3BzID0gdHlwZW9mIGVsZW1lbnQucHJvcGVydGllcyA9PT0gJ29iamVjdCcgJiYgZWxlbWVudC5wcm9wZXJ0aWVzICE9PSBudWxsID8gZWxlbWVudC5wcm9wZXJ0aWVzIDoge307XG4gICAgICAgICAgY29uc3QgY3VycmVudFpJbmRleCA9IGVsZW1lbnRQcm9wcy56SW5kZXggPz8gZWxlbWVudC56SW5kZXggPz8gMTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTb2xvIHJlc3RhdXJhciBzaSBlbCB6SW5kZXggYWN0dWFsIGVzIGRpZmVyZW50ZSBhbCBvcmlnaW5hbFxuICAgICAgICAgIGlmIChjdXJyZW50WkluZGV4ICE9PSBvcmlnaW5hbFpJbmRleCkge1xuICAgICAgICAgICAgdXBkYXRlRWxlbWVudChlbGVtZW50SWQsIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgIC4uLmVsZW1lbnRQcm9wcyxcbiAgICAgICAgICAgICAgICB6SW5kZXg6IG9yaWdpbmFsWkluZGV4LFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTGltcGlhciBlbCBtYXBhIGRlc3B1w6lzIGRlIHJlc3RhdXJhclxuICAgICAgb3JpZ2luYWxaSW5kZXhSZWYuY3VycmVudC5jbGVhcigpO1xuICAgIH1cbiAgfSwgW2FjdGl2YXRlZEVsZW1lbnRJZCwgZWxlbWVudHMsIHVwZGF0ZUVsZW1lbnRdKTtcblxuICAvLyBGdW5jacOzbiBwYXJhIGV4cG9ydGFyIGVsIHRhYmxlcm8gY29tcGxldG8gYSBQTkcgZGUgYWx0YSByZXNvbHVjacOzblxuICBjb25zdCBoYW5kbGVFeHBvcnRCb2FyZFRvUG5nID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNhbnZhc1JlZi5jdXJyZW50KSB7XG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB2YXJpYW50OiAnZGVzdHJ1Y3RpdmUnLFxuICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTm8gc2UgcHVkbyBhY2NlZGVyIGFsIGxpZW56by4nLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBPYnRlbmVyIGVsIGNvbnRlbmVkb3IgZGVsIGNhbnZhc1xuICAgICAgY29uc3QgY2FudmFzQ29udGFpbmVyID0gY2FudmFzUmVmLmN1cnJlbnQuZ2V0Q2FudmFzQ29udGFpbmVyKCk7XG4gICAgICBpZiAoIWNhbnZhc0NvbnRhaW5lcikge1xuICAgICAgICB0b2FzdCh7XG4gICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ05vIHNlIHB1ZG8gZW5jb250cmFyIGVsIGNvbnRlbmVkb3IgZGVsIGxpZW56by4nLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0b2FzdCh7XG4gICAgICAgIHRpdGxlOiAnRXhwb3J0YW5kby4uLicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnR2VuZXJhbmRvIGltYWdlbiBQTkcgZGUgYWx0YSByZXNvbHVjacOzbiBkZWwgdGFibGVybyBjb21wbGV0by4gRXN0byBwdWVkZSB0YXJkYXIgdW5vcyBzZWd1bmRvcy4uLicsXG4gICAgICB9KTtcblxuICAgICAgLy8gT2N1bHRhciBlbGVtZW50b3MgZGUgVUkgdGVtcG9yYWxtZW50ZSBwYXJhIGxhIGV4cG9ydGFjacOzblxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdleHBvcnRpbmctdG8tcG5nJyk7XG5cbiAgICAgIC8vIENhcHR1cmFyIFNPTE8gZWwgw6FyZWEgdmlzaWJsZSBkZWwgdXN1YXJpbyAodmlld3BvcnQpIC0gVXNhciBtaXNtYSBsw7NnaWNhIGRlIGFsdGEgcmVzb2x1Y2nDs24gcXVlIGN1YWRlcm5vc1xuICAgICAgY29uc3Qgc2Nyb2xsTGVmdCA9IGNhbnZhc0NvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgY29uc3Qgc2Nyb2xsVG9wID0gY2FudmFzQ29udGFpbmVyLnNjcm9sbFRvcDtcbiAgICAgIGNvbnN0IHZpZXdwb3J0V2lkdGggPSBjYW52YXNDb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgICBjb25zdCB2aWV3cG9ydEhlaWdodCA9IGNhbnZhc0NvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgICBjb25zdCBzY2FsZSA9IDM7IC8vIEFsdGEgcmVzb2x1Y2nDs24gKG1pc21hIHF1ZSBjdWFkZXJub3MpIC0gY2FwdGFuZG8gdG9kb3MgbG9zIGRldGFsbGVzXG4gICAgICBcbiAgICAgIC8vIE9idGVuZXIgZWwgcmVjdMOhbmd1bG8gZGVsIGNvbnRlbmVkb3IgcGFyYSBjYWxjdWxhciBsYSBwb3NpY2nDs24gcmVsYXRpdmFcbiAgICAgIGNvbnN0IGNvbnRhaW5lclJlY3QgPSBjYW52YXNDb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNhbnZhcyA9IGF3YWl0IGh0bWwyY2FudmFzKGNhbnZhc0NvbnRhaW5lciwge1xuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjOTZlNGU2JyxcbiAgICAgICAgc2NhbGU6IHNjYWxlLFxuICAgICAgICB1c2VDT1JTOiB0cnVlLFxuICAgICAgICBsb2dnaW5nOiBmYWxzZSxcbiAgICAgICAgYWxsb3dUYWludDogZmFsc2UsXG4gICAgICAgIHNjcm9sbFg6IC1zY3JvbGxMZWZ0LFxuICAgICAgICBzY3JvbGxZOiAtc2Nyb2xsVG9wLFxuICAgICAgICB3aWR0aDogdmlld3BvcnRXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2aWV3cG9ydEhlaWdodCxcbiAgICAgICAgd2luZG93V2lkdGg6IHZpZXdwb3J0V2lkdGgsXG4gICAgICAgIHdpbmRvd0hlaWdodDogdmlld3BvcnRIZWlnaHQsXG4gICAgICAgIHg6IGNvbnRhaW5lclJlY3QubGVmdCArIHNjcm9sbExlZnQsXG4gICAgICAgIHk6IGNvbnRhaW5lclJlY3QudG9wICsgc2Nyb2xsVG9wLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlc3RhdXJhciBlbGVtZW50b3MgZGUgVUlcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZXhwb3J0aW5nLXRvLXBuZycpO1xuXG4gICAgICAvLyBDb252ZXJ0aXIgY2FudmFzIGEgYmxvYiB5IGRlc2NhcmdhclxuICAgICAgY2FudmFzLnRvQmxvYigoYmxvYjogQmxvYiB8IG51bGwpID0+IHtcbiAgICAgICAgaWYgKCFibG9iKSB7XG4gICAgICAgICAgdG9hc3Qoe1xuICAgICAgICAgICAgdmFyaWFudDogJ2Rlc3RydWN0aXZlJyxcbiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdObyBzZSBwdWRvIGdlbmVyYXIgbGEgaW1hZ2VuLicsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXIgVVJMIHRlbXBvcmFsIHkgZGVzY2FyZ2FyXG4gICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICAgICAgY29uc3QgYm9hcmROYW1lID0gYm9hcmQ/Lm5hbWUgfHwgJ3RhYmxlcm8nO1xuICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7Ym9hcmROYW1lfV8ke0RhdGUubm93KCl9LnBuZ2A7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobGluayk7XG4gICAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChsaW5rKTtcbiAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuXG4gICAgICAgIC8vIE1vc3RyYXIgdG9hc3QgZGUgw6l4aXRvXG4gICAgICAgIHRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ0V4cG9ydGFkbycsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdFbCB0YWJsZXJvIHNlIGhhIGV4cG9ydGFkbyBjb21vIFBORyBkZSBhbHRhIHJlc29sdWNpw7NuLicsXG4gICAgICAgIH0pO1xuICAgICAgfSwgJ2ltYWdlL3BuZycsIDEuMCk7IC8vIENhbGlkYWQgbcOheGltYVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZXhwb3J0aW5nLXRvLXBuZycpO1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgZXhwb3J0YXIgdGFibGVybzonLCBlcnJvcik7XG4gICAgICB0b2FzdCh7XG4gICAgICAgIHZhcmlhbnQ6ICdkZXN0cnVjdGl2ZScsXG4gICAgICAgIHRpdGxlOiAnRXJyb3InLFxuICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSB8fCAnTm8gc2UgcHVkbyBleHBvcnRhciBlbCB0YWJsZXJvLicsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIFtjYW52YXNSZWYsIGJvYXJkLCB0b2FzdF0pO1xuXG4gIC8vIC0tIFJFTkRFUiAtLVxuICBcbiAgLy8gREVCVUc6IExvZyBkZWwgZXN0YWRvIGFudGVzIGRlIGN1YWxxdWllciByZXR1cm5cbiAgY29uc29sZS5sb2coJ/CfjqggW0JvYXJkUGFnZV0gUmVuZGVyOicsIHtcbiAgICBib2FyZElkLFxuICAgIGhhc1VzZXI6ICEhdXNlcixcbiAgICB1c2VySWQ6IHVzZXI/LnVpZCxcbiAgICBpc0Fub255bW91czogdXNlcj8uaXNBbm9ueW1vdXMsXG4gICAgYXV0aExvYWRpbmcsXG4gICAgaXNCb2FyZExvYWRpbmcsXG4gICAgaGFzQm9hcmQ6ICEhYm9hcmQsXG4gICAgc2Vzc2lvblN0b3JhZ2U6IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8ge1xuICAgICAgaGFzUmVjZW50TG9naW46IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJyksXG4gICAgICBsb2dpblRpbWVzdGFtcDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5UaW1lc3RhbXAnKSxcbiAgICAgIHJlZGlyZWN0aW5nVG9Cb2FyZDogc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgncmVkaXJlY3RpbmdUb0JvYXJkJylcbiAgICB9IDogJ04vQSAoU1NSKSdcbiAgfSk7XG5cbiAgLy8gTW9zdHJhciBsb2FkaW5nIG1pZW50cmFzIGF1dGggZXN0w6EgY2FyZ2FuZG9cbiAgaWYgKGF1dGhMb2FkaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnIzk2ZTRlNicgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5WZXJpZmljYW5kbyBhdXRlbnRpY2FjacOzbi4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICAvLyBTaSBubyBoYXkgdXN1YXJpbyBkZXNwdcOpcyBkZSBjYXJnYXIsIHZlcmlmaWNhciBsb2dpbiByZWNpZW50ZSBhbnRlcyBkZSByZWRpcmlnaXJcbiAgaWYgKCF1c2VyKSB7XG4gICAgLy8gVmVyaWZpY2FyIHNpIGhheSBsb2dpbiByZWNpZW50ZSAocGFyYSB1c3VhcmlvcyBhbsOzbmltb3MgZGVzcHXDqXMgZGUgcmVkaXJlY3QpXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBoYXNSZWNlbnRMb2dpbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2hhc1JlY2VudExvZ2luJykgPT09ICd0cnVlJztcbiAgICAgIGNvbnN0IGxvZ2luVGltZXN0YW1wID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbG9naW5UaW1lc3RhbXAnKTtcbiAgICAgIGNvbnN0IHJlZGlyZWN0aW5nVG9Cb2FyZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3JlZGlyZWN0aW5nVG9Cb2FyZCcpO1xuICAgICAgY29uc3QgaXNMb2dpblJlY2VudCA9IGhhc1JlY2VudExvZ2luICYmIGxvZ2luVGltZXN0YW1wICYmIChEYXRlLm5vdygpIC0gcGFyc2VJbnQobG9naW5UaW1lc3RhbXApKSA8IDYwMDAwO1xuICAgICAgXG4gICAgICBpZiAoaXNMb2dpblJlY2VudCkge1xuICAgICAgICAvLyBNb3N0cmFyIGxvYWRpbmcgbWllbnRyYXMgZXNwZXJhbW9zIHF1ZSBGaXJlYmFzZSBBdXRoIHJlc3RhdXJlIGVsIHVzdWFyaW8gYW7Ds25pbW9cbiAgICAgICAgY29uc29sZS5sb2coJ+KPsyBbQm9hcmRQYWdlXSBSZW5kZXI6IExvZ2luIHJlY2llbnRlIGRldGVjdGFkbywgZXNwZXJhbmRvIHVzdWFyaW8uLi4nLCB7XG4gICAgICAgICAgaGFzUmVjZW50TG9naW4sXG4gICAgICAgICAgbG9naW5UaW1lc3RhbXAsXG4gICAgICAgICAgcmVkaXJlY3RpbmdUb0JvYXJkLFxuICAgICAgICAgIGJvYXJkSWRcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGgtc2NyZWVuIHctZnVsbCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXJcIiBzdHlsZT17eyBiYWNrZ3JvdW5kQ29sb3I6ICcjOTZlNGU2JyB9fT5cbiAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtOTAwXCI+Q2FyZ2FuZG8gdHUgdGFibGVyby4uLjwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gU2kgbm8gaGF5IGxvZ2luIHJlY2llbnRlLCByZWRpcmlnaXJcbiAgICBjb25zb2xlLmxvZygn4pqg77iPIFtCb2FyZFBhZ2VdIFJlbmRlcjogTm8gaGF5IHVzdWFyaW8geSBubyBoYXkgbG9naW4gcmVjaWVudGUsIHJlZGlyaWdpZW5kby4uLicpO1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc2Vzc2lvblN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoJy8nKTtcbiAgICB9XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnI2NhZTNlMScgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5SZWRpcmlnaWVuZG8uLi48L3A+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGlzQm9hcmRMb2FkaW5nIHx8IGJvYXJkSWQgPT09ICduZXcnKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBoLXNjcmVlbiB3LWZ1bGwgZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyXCIgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnIzc1ZThjZScgfX0+XG4gICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cImgtOCB3LTggYW5pbWF0ZS1zcGluIHRleHQtc2xhdGUtOTAwXCIgLz5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5DYXJnYW5kbyB0dSBsaWVuem8uLi48L3A+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgaWYgKGVycm9yKSByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJwLTEwIHRleHQtcmVkLTUwMFwiPkVycm9yOiB7ZXJyb3J9PC9kaXY+O1xuICBcbiAgLy8gU2kgbm8gaGF5IHRhYmxlcm8gcGVybyBoYXkgdXN1YXJpbywgbW9zdHJhciBsb2FkaW5nIG1pZW50cmFzIHNlIGNhcmdhXG4gIGlmICghYm9hcmQgJiYgdXNlcikge1xuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaC1zY3JlZW4gdy1mdWxsIGZsZXgtY29sIGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlclwiIHN0eWxlPXt7IGJhY2tncm91bmRDb2xvcjogJyNjYWUzZTEnIH19PlxuICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTggdy04IGFuaW1hdGUtc3BpbiB0ZXh0LXNsYXRlLTkwMFwiIC8+XG4gICAgICAgIDxwIGNsYXNzTmFtZT1cIm10LTQgdGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtc2xhdGUtOTAwXCI+Q2FyZ2FuZG8gdHUgdGFibGVyby4uLjwvcD5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cbiAgXG4gIC8vIFNpIG5vIGhheSB0YWJsZXJvIHkgbm8gaGF5IHVzdWFyaW8sIHlhIHNlIG1hbmVqw7MgYXJyaWJhXG4gIGlmICghYm9hcmQpIHJldHVybiBudWxsO1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxSZW5hbWVCb2FyZERpYWxvZ1xuICAgICAgICBpc09wZW49e2lzUmVuYW1lQm9hcmREaWFsb2dPcGVufVxuICAgICAgICBvbk9wZW5DaGFuZ2U9e3NldElzUmVuYW1lQm9hcmREaWFsb2dPcGVufVxuICAgICAgICBjdXJyZW50Qm9hcmROYW1lPXtib2FyZD8ubmFtZSB8fCAnU2luIG5vbWJyZSd9XG4gICAgICAgIG9uU2F2ZT17aGFuZGxlU2F2ZVJlbmFtZUJvYXJkfVxuICAgICAgLz5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaC1zY3JlZW4gdy1zY3JlZW4gcmVsYXRpdmUgYmctWyMzYjNiM2JdIG92ZXJmbG93LWhpZGRlblwiPlxuICAgICAgXG4gICAgICB7LyogMS4gTElFTlpPIElORklOSVRPICovfVxuICAgICAgPENhbnZhc1xuICAgICAgICByZWY9e2NhbnZhc1JlZn1cbiAgICAgICAgZWxlbWVudHM9e2VsZW1lbnRzIGFzIFdpdGhJZDxDYW52YXNFbGVtZW50PltdfVxuICAgICAgICBib2FyZD17Ym9hcmQgYXMgV2l0aElkPEJvYXJkPn1cbiAgICAgICAgc2VsZWN0ZWRFbGVtZW50SWRzPXtzZWxlY3RlZEVsZW1lbnRJZHN9XG4gICAgICAgIG9uU2VsZWN0RWxlbWVudD17aGFuZGxlU2VsZWN0RWxlbWVudH1cbiAgICAgICAgdXBkYXRlRWxlbWVudD17dXBkYXRlRWxlbWVudH1cbiAgICAgICAgZGVsZXRlRWxlbWVudD17ZGVsZXRlRWxlbWVudH1cbiAgICAgICAgdW5hbmNob3JFbGVtZW50PXsoaWQpID0+IHtcbiAgICAgICAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHMuZmluZChlbCA9PiBlbC5pZCA9PT0gaWQpO1xuICAgICAgICAgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucGFyZW50SWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZUVsZW1lbnQoaWQsIHsgcGFyZW50SWQ6IHVuZGVmaW5lZCB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH19XG4gICAgICAgIGFkZEVsZW1lbnQ9e2FkZEVsZW1lbnR9XG4gICAgICAgIFxuICAgICAgICAvLyBJbnRlcmFjY2lvbmVzXG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgb25Gb3JtYXRUb2dnbGU9e2hhbmRsZUZvcm1hdFRvZ2dsZX1cbiAgICAgICAgb25DaGFuZ2VOb3RlcGFkRm9ybWF0PXtoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0fVxuICAgICAgICBvbkVkaXRFbGVtZW50PXtoYW5kbGVFZGl0RWxlbWVudH1cbiAgICAgICAgXG4gICAgICAgIC8vIEVzdGFkb1xuICAgICAgICBzZWxlY3RlZEVsZW1lbnQ9e3NlbGVjdGVkRWxlbWVudH1cbiAgICAgICAgYWN0aXZhdGVkRWxlbWVudElkPXthY3RpdmF0ZWRFbGVtZW50SWR9XG4gICAgICAgIGlzTW9iaWxlPXtpc01vYmlsZX1cbiAgICAgICAgc2V0SXNEaXJ0eT17c2V0SXNEaXJ0eX1cbiAgICAgICAgaXNMaXN0ZW5pbmc9e2lzRGljdGF0aW9uTGlzdGVuaW5nfVxuICAgICAgICBsaXZlVHJhbnNjcmlwdD17bGl2ZVRyYW5zY3JpcHR9XG4gICAgICAgIGZpbmFsVHJhbnNjcmlwdD17ZmluYWxUcmFuc2NyaXB0fVxuICAgICAgICBpbnRlcmltVHJhbnNjcmlwdD17aW50ZXJpbVRyYW5zY3JpcHR9XG4gICAgICAgIFxuICAgICAgICAvLyBQbGFjZWhvbGRlcnMgcGFyYSBwcm9wcyByZXF1ZXJpZGFzIHBvciBDYW52YXMgYW50aWd1b1xuICAgICAgICBvbkJyaW5nVG9Gcm9udD17KCkgPT4ge319XG4gICAgICAgIG9uU2VuZFRvQmFjaz17KCkgPT4ge319XG4gICAgICAgIG9uTW92ZUJhY2t3YXJkPXsoKSA9PiB7fX1cbiAgICAgICAgb25Hb1RvSG9tZT17KCkgPT4gY2FudmFzUmVmLmN1cnJlbnQ/LmdvVG9Ib21lKCl9XG4gICAgICAgIG9uQ2VudGVyVmlldz17KCkgPT4ge319XG4gICAgICAgIG9uR3JvdXBFbGVtZW50cz17KCkgPT4ge319XG4gICAgICAgIHNhdmVMYXN0Vmlldz17KCkgPT4ge319XG4gICAgICAgIG9uQWN0aXZhdGVEcmFnPXsoKSA9PiB7fX1cbiAgICAgICAgb25FZGl0Q29tbWVudD17aGFuZGxlRWRpdENvbW1lbnR9XG4gICAgICAgIG9uRHVwbGljYXRlRWxlbWVudD17KCkgPT4ge319XG4gICAgICAgIG9uVW5ncm91cD17KCkgPT4ge319XG4gICAgICAvPlxuICAgICAgXG4gICAgICB7LyogMi4gTUVOw5ogUFJJTkNJUEFMIChNYXBlbyBkZSBmdW5jaW9uZXMgYWwgbnVldm8gVG9vbHNTaWRlYmFyIFwiQmxpbmRhZG9cIikgKi99XG4gICAgICA8VG9vbHNTaWRlYmFyXG4gICAgICAgIGVsZW1lbnRzPXtlbGVtZW50cyB8fCBbXX1cbiAgICAgICAgYm9hcmRzPXtib2FyZHMgfHwgW119XG4gICAgICAgIG9uVXBsb2FkSW1hZ2U9e2hhbmRsZVVwbG9hZEltYWdlfVxuICAgICAgICBvbkFkZEltYWdlRnJvbVVybD17KCkgPT4gc2V0SXNJbWFnZVVybERpYWxvZ09wZW4odHJ1ZSl9XG4gICAgICAgIG9uUGFuVG9nZ2xlPXsoKSA9PiBjYW52YXNSZWYuY3VycmVudD8uYWN0aXZhdGVQYW5Nb2RlKCl9XG4gICAgICAgIG9uUmVuYW1lQm9hcmQ9e2hhbmRsZVJlbmFtZUJvYXJkV3JhcHBlcn1cbiAgICAgICAgb25EZWxldGVCb2FyZD17aGFuZGxlRGVsZXRlQm9hcmR9XG4gICAgICAgIGlzTGlzdGVuaW5nPXtpc0RpY3RhdGlvbkxpc3RlbmluZ31cbiAgICAgICAgb25Ub2dnbGVEaWN0YXRpb249e2hhbmRsZVRvZ2dsZURpY3RhdGlvbn1cbiAgICAgICAgb25PcGVuTm90ZXBhZD17aGFuZGxlT3Blbk5vdGVwYWR9XG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgYWRkRWxlbWVudD17YWRkRWxlbWVudH1cbiAgICAgICAgY2xlYXJDYW52YXM9e2NsZWFyQ2FudmFzV3JhcHBlcn1cbiAgICAgICAgb25FeHBvcnRCb2FyZFRvUG5nPXtoYW5kbGVFeHBvcnRCb2FyZFRvUG5nfVxuICAgICAgICBvbkZvcm1hdFRvZ2dsZT17aGFuZGxlRm9ybWF0VG9nZ2xlfVxuICAgICAgICBpc0Zvcm1hdFRvb2xiYXJPcGVuPXtpc0Zvcm1hdFRvb2xiYXJPcGVufVxuICAgICAgLz5cblxuICAgICAgey8qIDMuIEJBUlJBIERFIEZPUk1BVE8gKi99XG4gICAgICA8Rm9ybWF0dGluZ1Rvb2xiYXJcbiAgICAgICAgaXNPcGVuPXtpc0Zvcm1hdFRvb2xiYXJPcGVufVxuICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRJc0Zvcm1hdFRvb2xiYXJPcGVuKGZhbHNlKX1cbiAgICAgICAgZWxlbWVudHM9e3NlbGVjdGVkRWxlbWVudCA/IFtzZWxlY3RlZEVsZW1lbnRdIDogW119XG4gICAgICAgIG9uQWRkQ29tbWVudD17aGFuZGxlQWRkTWFya2VyfVxuICAgICAgICBvbkVkaXRDb21tZW50PXtoYW5kbGVFZGl0Q29tbWVudH1cbiAgICAgICAgaXNNb2JpbGVTaGVldD17aXNNb2JpbGV9XG4gICAgICAgIG9uTG9jYXRlRWxlbWVudD17aGFuZGxlTG9jYXRlRWxlbWVudH1cbiAgICAgICAgb25QYW5Ub2dnbGU9eygpID0+IHtcbiAgICAgICAgICBzZXRJc1Bhbm5pbmdBY3RpdmUocHJldiA9PiAhcHJldik7XG4gICAgICAgICAgY2FudmFzUmVmLmN1cnJlbnQ/LmFjdGl2YXRlUGFuTW9kZSgpO1xuICAgICAgICB9fVxuICAgICAgICBhZGRFbGVtZW50PXthZGRFbGVtZW50fVxuICAgICAgICBpc1Bhbm5pbmdBY3RpdmU9e2lzUGFubmluZ0FjdGl2ZX1cbiAgICAgIC8+XG5cbiAgICAgIHsvKiA0LiBEScOBTE9HT1MgKi99XG4gICAgICA8Q2hhbmdlRm9ybWF0RGlhbG9nXG4gICAgICAgIGlzT3Blbj17Y2hhbmdlRm9ybWF0RGlhbG9nT3Blbn1cbiAgICAgICAgb25PcGVuQ2hhbmdlPXtzZXRDaGFuZ2VGb3JtYXREaWFsb2dPcGVufVxuICAgICAgICBub3RlcGFkPXtzZWxlY3RlZE5vdGVwYWRGb3JGb3JtYXR9XG4gICAgICAgIG9uU2F2ZUZvcm1hdD17aGFuZGxlU2F2ZUZvcm1hdH1cbiAgICAgIC8+XG5cbiAgICAgIDxBZGRJbWFnZUZyb21VcmxEaWFsb2dcbiAgICAgICAgaXNPcGVuPXtpc0ltYWdlVXJsRGlhbG9nT3Blbn1cbiAgICAgICAgb25PcGVuQ2hhbmdlPXtzZXRJc0ltYWdlVXJsRGlhbG9nT3Blbn1cbiAgICAgICAgb25BZGRJbWFnZT17YXN5bmMgKHVybCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGFkZEVsZW1lbnQoJ2ltYWdlJywgeyBjb250ZW50OiB7IHVybCB9LCBwcm9wZXJ0aWVzOiB7IHNpemU6IHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAyMDAgfSB9IH0pO1xuICAgICAgICAgIHNldElzSW1hZ2VVcmxEaWFsb2dPcGVuKGZhbHNlKTtcbiAgICAgICAgfX1cbiAgICAgIC8+XG5cblxuICAgICAgey8qIERpw6Fsb2dvIGRlIGVkaWNpw7NuIGRlIGNvbWVudGFyaW9zICovfVxuICAgICAge3NlbGVjdGVkQ29tbWVudEZvckVkaXQgJiYgKFxuICAgICAgICA8RWRpdENvbW1lbnREaWFsb2dcbiAgICAgICAgICBpc09wZW49e2lzRWRpdENvbW1lbnREaWFsb2dPcGVufVxuICAgICAgICAgIG9uT3BlbkNoYW5nZT17c2V0SXNFZGl0Q29tbWVudERpYWxvZ09wZW59XG4gICAgICAgICAgY29tbWVudD17c2VsZWN0ZWRDb21tZW50Rm9yRWRpdH1cbiAgICAgICAgICBvblVwZGF0ZT17dXBkYXRlRWxlbWVudH1cbiAgICAgICAgICBvbkRlbGV0ZT17ZGVsZXRlRWxlbWVudH1cbiAgICAgICAgLz5cbiAgICAgICl9XG5cbiAgICAgIHsvKiBQYW5lbCBkZSBpbmZvcm1hY2nDs24gZGVsIGVsZW1lbnRvIChPcGNpw7NuIDQpICovfVxuICAgICAgPEVsZW1lbnRJbmZvUGFuZWxcbiAgICAgICAgZWxlbWVudD17c2VsZWN0ZWRFbGVtZW50fVxuICAgICAgICBpc1Zpc2libGU9e2lzSW5mb1BhbmVsVmlzaWJsZSAmJiAhIXNlbGVjdGVkRWxlbWVudH1cbiAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0SXNJbmZvUGFuZWxWaXNpYmxlKGZhbHNlKX1cbiAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICA8Lz5cbiAgKTtcbn0iXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUNhbGxiYWNrIiwidXNlTWVtbyIsInVzZVJvdXRlciIsIkxvYWRlcjIiLCJ1c2VVc2VyIiwidXNlU3RvcmFnZSIsInVzZUJvYXJkU3RvcmUiLCJ1c2VCb2FyZFN0YXRlIiwidXNlRWxlbWVudE1hbmFnZXIiLCJ1c2VNZWRpYVF1ZXJ5IiwidXNlVG9hc3QiLCJ1cGxvYWRGaWxlIiwiaHRtbDJjYW52YXMiLCJDYW52YXMiLCJUb29sc1NpZGViYXIiLCJGb3JtYXR0aW5nVG9vbGJhciIsIkFkZEltYWdlRnJvbVVybERpYWxvZyIsIkNoYW5nZUZvcm1hdERpYWxvZyIsIkVkaXRDb21tZW50RGlhbG9nIiwiRWxlbWVudEluZm9QYW5lbCIsIlJlbmFtZUJvYXJkRGlhbG9nIiwidXNlRGljdGF0aW9uIiwiQm9hcmRQYWdlIiwicGFyYW1zIiwiZWxlbWVudHMiLCJib2FyZElkIiwicm91dGVyIiwidXNlciIsImlzVXNlckxvYWRpbmciLCJhdXRoTG9hZGluZyIsInVzZXJFcnJvciIsInN0b3JhZ2UiLCJ0b2FzdCIsImlzTW9iaWxlIiwiY29uc29sZSIsImxvZyIsImhhc1VzZXIiLCJ1c2VySWQiLCJ1aWQiLCJpc0Fub255bW91cyIsInBhdGhuYW1lIiwid2luZG93IiwibG9jYXRpb24iLCJsb2FkQm9hcmRSZWYiLCJjcmVhdGVCb2FyZFJlZiIsImNsZWFudXBSZWYiLCJ0b2FzdFJlZiIsImN1cnJlbnQiLCJtZXNzYWdlIiwidXNlckVtYWlsIiwiZW1haWwiLCJzZXNzaW9uU3RvcmFnZSIsImhhc1JlY2VudExvZ2luIiwiZ2V0SXRlbSIsImxvZ2luVGltZXN0YW1wIiwicmVkaXJlY3RpbmdUb0JvYXJkIiwiYm9hcmQiLCJsb2FkQm9hcmQiLCJjcmVhdGVCb2FyZCIsInVwZGF0ZUVsZW1lbnQiLCJkZWxldGVFbGVtZW50Iiwic2VsZWN0ZWRFbGVtZW50SWRzIiwic2V0U2VsZWN0ZWRFbGVtZW50SWRzIiwiaXNMb2FkaW5nIiwiaXNCb2FyZExvYWRpbmciLCJlcnJvciIsImNsZWFudXAiLCJib2FyZHMiLCJoYW5kbGVSZW5hbWVCb2FyZCIsImhhbmRsZURlbGV0ZUJvYXJkIiwiY2xlYXJDYW52YXMiLCJjYW52YXNSZWYiLCJoYW5kbGVSZW5hbWVCb2FyZFdyYXBwZXIiLCJzZXRJc1JlbmFtZUJvYXJkRGlhbG9nT3BlbiIsImhhbmRsZVNhdmVSZW5hbWVCb2FyZCIsIm5ld05hbWUiLCJjbGVhckNhbnZhc1dyYXBwZXIiLCJpc0Zvcm1hdFRvb2xiYXJPcGVuIiwic2V0SXNGb3JtYXRUb29sYmFyT3BlbiIsImlzSW1hZ2VVcmxEaWFsb2dPcGVuIiwic2V0SXNJbWFnZVVybERpYWxvZ09wZW4iLCJjaGFuZ2VGb3JtYXREaWFsb2dPcGVuIiwic2V0Q2hhbmdlRm9ybWF0RGlhbG9nT3BlbiIsImlzUGFubmluZ0FjdGl2ZSIsInNldElzUGFubmluZ0FjdGl2ZSIsImlzUmVuYW1lQm9hcmREaWFsb2dPcGVuIiwic2VsZWN0ZWRFbGVtZW50Iiwic2V0U2VsZWN0ZWRFbGVtZW50IiwiYWN0aXZhdGVkRWxlbWVudElkIiwic2V0QWN0aXZhdGVkRWxlbWVudElkIiwic2VsZWN0ZWROb3RlcGFkRm9yRm9ybWF0Iiwic2V0U2VsZWN0ZWROb3RlcGFkRm9yRm9ybWF0IiwiaXNEaXJ0eSIsInNldElzRGlydHkiLCJpc0VkaXRDb21tZW50RGlhbG9nT3BlbiIsInNldElzRWRpdENvbW1lbnREaWFsb2dPcGVuIiwic2VsZWN0ZWRDb21tZW50Rm9yRWRpdCIsInNldFNlbGVjdGVkQ29tbWVudEZvckVkaXQiLCJvcmlnaW5hbFpJbmRleFJlZiIsIk1hcCIsImlzSW5mb1BhbmVsVmlzaWJsZSIsInNldElzSW5mb1BhbmVsVmlzaWJsZSIsImlzU3VwcG9ydGVkIiwiaXNEaWN0YXRpb25TdXBwb3J0ZWQiLCJpc0xpc3RlbmluZyIsImlzRGljdGF0aW9uTGlzdGVuaW5nIiwidHJhbnNjcmlwdCIsImZpbmFsVHJhbnNjcmlwdCIsImludGVyaW1UcmFuc2NyaXB0IiwicGVybWlzc2lvbkVycm9yIiwidG9nZ2xlIiwidG9nZ2xlRGljdGF0aW9uIiwibGl2ZVRyYW5zY3JpcHQiLCJmaW5hbCIsImludGVyaW0iLCJ0cmltIiwiaGFuZGxlVG9nZ2xlRGljdGF0aW9uIiwidmFyaWFudCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsImdldFZpZXdwb3J0Q2VudGVyIiwiY2VudGVyIiwieCIsImlubmVyV2lkdGgiLCJ5IiwiaW5uZXJIZWlnaHQiLCJlbGVtZW50c1JlZiIsImdldE5leHRaSW5kZXgiLCJjdXJyZW50RWxlbWVudHMiLCJsZW5ndGgiLCJ6SW5kZXhlcyIsImZpbHRlciIsImUiLCJ6SW5kZXgiLCJtYXAiLCJNYXRoIiwibWF4IiwiYWRkRWxlbWVudCIsInNlbGVjdGVkRWxlbWVudElkIiwiZm91bmRFbGVtZW50IiwiZmluZCIsImVsIiwiaWQiLCJ1cGRhdGVkQXQiLCJmb3VuZElkIiwiY3VycmVudElkIiwicHJvY2VzcyIsInR5cGUiLCJwb3NpdGlvbiIsInByb3BlcnRpZXMiLCJzaXplIiwid2lkdGgiLCJoZWlnaHQiLCJwYXJlbnRJZCIsIkRFQlVHX0VMRU1FTlRTIiwiaGFuZGxlS2V5RG93biIsImN0cmxLZXkiLCJtZXRhS2V5Iiwic2hpZnRLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsInByZXYiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhc0xvYWRlZFJlZiIsImlzTG9hZGluZ1JlZiIsIndhaXRUaW1lclJlZiIsImN1cnJlbnRCb2FyZElkUmVmIiwiaGFzTG9hZGVkIiwiY3VycmVudEJvYXJkSWQiLCJvbGQiLCJuZXciLCJjbGVhclRpbWVvdXQiLCJhbm9ueW1vdXNVc2VySWQiLCJpc0xvZ2luUmVjZW50IiwiRGF0ZSIsIm5vdyIsInBhcnNlSW50IiwidGltZVNpbmNlTG9naW4iLCJjbGVhciIsImxvY2FsU3RvcmFnZSIsInJlcGxhY2UiLCJ3YWl0VGltZSIsInNldFRpbWVvdXQiLCJyZW1vdmVJdGVtIiwidGhlbiIsIm5ld0JvYXJkSWQiLCJzZXRJdGVtIiwidG9TdHJpbmciLCJocmVmIiwiY2F0Y2giLCJsb2FkZWRCb2FyZElkIiwiaGFuZGxlU2VsZWN0RWxlbWVudCIsImVsZW1lbnRJZCIsImlzTXVsdGlTZWxlY3QiLCJoYW5kbGVVcGxvYWRJbWFnZSIsImlucHV0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYWNjZXB0Iiwib25jaGFuZ2UiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJ1cGxvYWRSZXN1bHQiLCJ1cmwiLCJjb250ZW50IiwiY2xpY2siLCJoYW5kbGVGb3JtYXRUb2dnbGUiLCJoYW5kbGVBZGRNYXJrZXIiLCJ2aWV3cG9ydENlbnRlciIsImxhYmVsIiwidGV4dCIsImhhbmRsZUxvY2F0ZUVsZW1lbnQiLCJlbGVtZW50IiwiY2VudGVyT25FbGVtZW50IiwiaGFuZGxlT3Blbk5vdGVwYWQiLCJoaWRkZW4iLCJoYW5kbGVDaGFuZ2VOb3RlcGFkRm9ybWF0IiwiaGFuZGxlU2F2ZUZvcm1hdCIsImZvcm1hdCIsIm5ld1NpemUiLCJoYW5kbGVFZGl0Q29tbWVudCIsImNvbW1lbnQiLCJoYW5kbGVFZGl0RWxlbWVudCIsImZpcnN0TGF5ZXJUeXBlcyIsImlzRmlyc3RMYXllciIsImluY2x1ZGVzIiwiZWxlbWVudFByb3BzIiwiY3VycmVudFpJbmRleCIsImhhcyIsInNldCIsIm1heFpJbmRleCIsIm5ld1pJbmRleCIsImZvckVhY2giLCJvcmlnaW5hbFpJbmRleCIsImhhbmRsZUV4cG9ydEJvYXJkVG9QbmciLCJjYW52YXNDb250YWluZXIiLCJnZXRDYW52YXNDb250YWluZXIiLCJib2R5IiwiY2xhc3NMaXN0IiwiYWRkIiwic2Nyb2xsTGVmdCIsInNjcm9sbFRvcCIsInZpZXdwb3J0V2lkdGgiLCJjbGllbnRXaWR0aCIsInZpZXdwb3J0SGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic2NhbGUiLCJjb250YWluZXJSZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2FudmFzIiwiYmFja2dyb3VuZENvbG9yIiwidXNlQ09SUyIsImxvZ2dpbmciLCJhbGxvd1RhaW50Iiwic2Nyb2xsWCIsInNjcm9sbFkiLCJ3aW5kb3dXaWR0aCIsIndpbmRvd0hlaWdodCIsImxlZnQiLCJ0b3AiLCJyZW1vdmUiLCJ0b0Jsb2IiLCJibG9iIiwiVVJMIiwiY3JlYXRlT2JqZWN0VVJMIiwibGluayIsImJvYXJkTmFtZSIsIm5hbWUiLCJkb3dubG9hZCIsImFwcGVuZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJyZXZva2VPYmplY3RVUkwiLCJoYXNCb2FyZCIsImRpdiIsImNsYXNzTmFtZSIsInN0eWxlIiwicCIsImlzT3BlbiIsIm9uT3BlbkNoYW5nZSIsImN1cnJlbnRCb2FyZE5hbWUiLCJvblNhdmUiLCJyZWYiLCJvblNlbGVjdEVsZW1lbnQiLCJ1bmFuY2hvckVsZW1lbnQiLCJ1bmRlZmluZWQiLCJvbkxvY2F0ZUVsZW1lbnQiLCJvbkZvcm1hdFRvZ2dsZSIsIm9uQ2hhbmdlTm90ZXBhZEZvcm1hdCIsIm9uRWRpdEVsZW1lbnQiLCJvbkJyaW5nVG9Gcm9udCIsIm9uU2VuZFRvQmFjayIsIm9uTW92ZUJhY2t3YXJkIiwib25Hb1RvSG9tZSIsImdvVG9Ib21lIiwib25DZW50ZXJWaWV3Iiwib25Hcm91cEVsZW1lbnRzIiwic2F2ZUxhc3RWaWV3Iiwib25BY3RpdmF0ZURyYWciLCJvbkVkaXRDb21tZW50Iiwib25EdXBsaWNhdGVFbGVtZW50Iiwib25Vbmdyb3VwIiwib25VcGxvYWRJbWFnZSIsIm9uQWRkSW1hZ2VGcm9tVXJsIiwib25QYW5Ub2dnbGUiLCJhY3RpdmF0ZVBhbk1vZGUiLCJvblJlbmFtZUJvYXJkIiwib25EZWxldGVCb2FyZCIsIm9uVG9nZ2xlRGljdGF0aW9uIiwib25PcGVuTm90ZXBhZCIsIm9uRXhwb3J0Qm9hcmRUb1BuZyIsIm9uQ2xvc2UiLCJvbkFkZENvbW1lbnQiLCJpc01vYmlsZVNoZWV0Iiwibm90ZXBhZCIsIm9uU2F2ZUZvcm1hdCIsIm9uQWRkSW1hZ2UiLCJvblVwZGF0ZSIsIm9uRGVsZXRlIiwiaXNWaXNpYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/board/[boardId]/page.tsx\n"));

/***/ })

});